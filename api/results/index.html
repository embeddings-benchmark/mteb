
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../model/">
      
      
        <link rel="next" href="../types/">
      
      
        
      
      
      <link rel="icon" href="../../images/logos/mteb_logo/dots-icon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Results - Massive Text Embedding Benchmark</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#results" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Massive Text Embedding Benchmark" class="md-header__button md-logo" aria-label="Massive Text Embedding Benchmark" data-md-component="logo">
      
  <img src="../../images/logos/mteb_logo/dots-icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Massive Text Embedding Benchmark
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Results
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/embeddings-benchmark/mteb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
    
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contributing/adding_a_model/" class="md-tabs__link">
          
  
  
    
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../overview/" class="md-tabs__link">
          
  
  
    
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://huggingface.co/spaces/mteb/leaderboard" class="md-tabs__link">
        
  
  
    
  
  Leaderboard

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Massive Text Embedding Benchmark" class="md-nav__button md-logo" aria-label="Massive Text Embedding Benchmark" data-md-component="logo">
      
  <img src="../../images/logos/mteb_logo/dots-icon.png" alt="logo">

    </a>
    Massive Text Embedding Benchmark
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/embeddings-benchmark/mteb" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Get Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../whats_new/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What's New
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Usage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/get_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Get Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/defining_the_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Defining the Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/selecting_tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Selecting Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/running_the_evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Running the Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/loading_results/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Loading Results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Command Line Interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/leaderboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Running the Leaderboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Advanced Usage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/two_stage_reranking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Two stage reranking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/cache_embeddings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cache embeddings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/retrieval_backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieval backend
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced_usage/vllm_wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vLLM Wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/adding_a_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adding a Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/adding_a_dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adding a Task
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/adding_a_benchmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adding a Benchmark
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing to mteb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../overview/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Benchmarks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Benchmarks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Available Benchmarks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tasks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_3_1" id="__nav_3_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Available Tasks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Available Tasks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/any2anymultilingualretrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Any2AnyMultilingualRetrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/any2anyretrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Any2AnyRetrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/audioclassification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AudioClassification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/audioclustering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AudioClustering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/audiomultilabelclassification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AudioMultilabelClassification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/audiopairclassification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AudioPairClassification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/audioreranking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AudioReranking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/audiozeroshotclassification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AudioZeroshotClassification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/bitextmining/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BitextMining
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/classification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Classification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/clustering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Clustering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/compositionality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Compositionality
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/documentunderstanding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DocumentUnderstanding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/imageclassification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ImageClassification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/imageclustering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ImageClustering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/instructionreranking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    InstructionReranking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/instructionretrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    InstructionRetrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/multilabelclassification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MultilabelClassification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/pairclassification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PairClassification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/regression/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Regression
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/reranking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reranking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/retrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/sts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    STS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/summarization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Summarization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/visioncentricqa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VisionCentricQA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/visualsts%28eng%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VisualSTS(eng)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/visualsts%28multi%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VisualSTS(multi)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_tasks/zeroshotclassification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ZeroShotClassification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_1" >
        
          
          <label class="md-nav__link" for="__nav_3_4_1" id="__nav_3_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Available Models
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Available Models
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_models/audio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Audio Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_models/audio_image_text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Audio-image-text Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_models/audio_text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Audio-text Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_models/image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Image Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_models/image_text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Image-text Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/available_models/text/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Text Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../benchmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Benchmark
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../task/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Results
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Results
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#results-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Results cache
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Results cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mteb.cache.ResultCache" class="md-nav__link">
    <span class="md-ellipsis">
      
        ResultCache
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#result-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Result Objects
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Result Objects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mteb.results.TaskResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        TaskResult
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mteb.results.ModelResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        ModelResult
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mteb.results.BenchmarkResults" class="md-nav__link">
    <span class="md-ellipsis">
      
        BenchmarkResults
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Additional Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://huggingface.co/spaces/mteb/leaderboard" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Leaderboard
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#results-cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Results cache
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Results cache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mteb.cache.ResultCache" class="md-nav__link">
    <span class="md-ellipsis">
      
        ResultCache
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#result-objects" class="md-nav__link">
    <span class="md-ellipsis">
      
        Result Objects
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Result Objects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mteb.results.TaskResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        TaskResult
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mteb.results.ModelResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        ModelResult
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mteb.results.BenchmarkResults" class="md-nav__link">
    <span class="md-ellipsis">
      
        BenchmarkResults
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/embeddings-benchmark/mteb/blob/main/docs/api/results.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/embeddings-benchmark/mteb/raw/main/docs/api/results.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="results">Results<a class="headerlink" href="#results" title="Permanent link">&para;</a></h1>
<p>When a models is evaluated in MTEB it produces results. These results consist of:</p>
<ul>
<li><code>TaskResult</code>: Result for a single task</li>
<li><code>ModelResult</code>: Result for a model on a set of tasks</li>
<li><code>BenchmarkResults</code>: Result for a set of models on a set of tasks</li>
</ul>
<p><img alt="" src="../../images/visualizations/result_objects.png" /></p>
<p>In normal use these come up when running a model:
<div class="highlight"><pre><span></span><code><span class="c1"># ...</span>
<span class="n">models_results</span> <span class="o">=</span> <span class="n">mteb</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">tasks</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="n">models_results</span><span class="p">)</span> <span class="c1"># mteb.results.ModelResults</span>

<span class="n">task_result</span> <span class="o">=</span> <span class="n">models_results</span><span class="o">.</span><span class="n">task_results</span>
<span class="nb">type</span><span class="p">(</span><span class="n">models_results</span><span class="p">)</span> <span class="c1"># mteb.results.TaskResult</span>
</code></pre></div></p>
<h2 id="results-cache">Results cache<a class="headerlink" href="#results-cache" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h3 id="mteb.cache.ResultCache" class="doc doc-heading">
            <code>mteb.cache.ResultCache</code>


<a href="#mteb.cache.ResultCache" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents first">



        <p>Class to handle the local cache of MTEB results.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">mteb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">mteb</span><span class="o">.</span><span class="n">ResultCache</span><span class="p">(</span><span class="n">cache_path</span><span class="o">=</span><span class="s2">&quot;~/.cache/mteb&quot;</span><span class="p">)</span>  <span class="c1"># default</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">download_from_remote</span><span class="p">()</span>  <span class="c1"># download the latest results from the remote repository</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">load_results</span><span class="p">(</span><span class="s2">&quot;task_name&quot;</span><span class="p">,</span> <span class="s2">&quot;model_name&quot;</span><span class="p">)</span>
</code></pre></div>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>mteb/cache.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ResultCache</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to handle the local cache of MTEB results.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; import mteb</span>
<span class="sd">        &gt;&gt;&gt; cache = mteb.ResultCache(cache_path=&quot;~/.cache/mteb&quot;)  # default</span>
<span class="sd">        &gt;&gt;&gt; cache.download_from_remote()  # download the latest results from the remote repository</span>
<span class="sd">        &gt;&gt;&gt; result = cache.load_results(&quot;task_name&quot;, &quot;model_name&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cache_path</span><span class="p">:</span> <span class="n">Path</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cache_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_cache_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the remote results repository exists in the cache directory.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the remote results repository exists, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;remote&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_task_result_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">task_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">ModelMeta</span><span class="p">,</span>
        <span class="n">model_revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">experiment_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the path to the results of a specific task for a specific model and revision.</span>

<span class="sd">        Args:</span>
<span class="sd">            task_name: The name of the task.</span>
<span class="sd">            model_name: The name of the model as a valid directory name or a ModelMeta object.</span>
<span class="sd">            model_revision: The revision of the model. Must be specified if model_name is a string.</span>
<span class="sd">            remote: If True, it will return the path to the remote results repository, otherwise it will return the path to the local results repository.</span>
<span class="sd">            experiment_name: The name of the experiment as a valid directory name. If model_name is a ModelMeta object, its experiment_name will be used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to the results of the task.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">results_folder</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;results&quot;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">remote</span>
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;remote&quot;</span> <span class="o">/</span> <span class="s2">&quot;results&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">ModelMeta</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">model_revision</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;model_revision and experiment_name is ignored when model_name is a ModelMeta object&quot;</span>
                <span class="p">)</span>
            <span class="n">model_revision</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">revision</span>
            <span class="n">experiment_name</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">experiment_name</span>
            <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">model_name_as_path</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;__&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>

        <span class="n">model_path</span> <span class="o">=</span> <span class="n">results_folder</span> <span class="o">/</span> <span class="n">model_name</span>

        <span class="k">if</span> <span class="n">model_revision</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;`model_revision` is not specified, attempting to load the latest revision. To disable this behavior, specify the &#39;model_revision` explicitly.&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1"># get revs from paths</span>
            <span class="n">revisions</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">model_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">revisions</span><span class="p">:</span>
                <span class="n">model_revision</span> <span class="o">=</span> <span class="s2">&quot;no_revision_available&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">revisions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Multiple revisions found for model </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">revisions</span><span class="si">}</span><span class="s2">. Using the latest one (according to latest edit).&quot;</span>
                    <span class="p">)</span>
                    <span class="c1"># sort folder by latest edit time</span>
                    <span class="n">revisions</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mtime</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">model_revision</span> <span class="o">=</span> <span class="n">revisions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>

        <span class="k">if</span> <span class="n">experiment_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">model_path</span>
                <span class="o">/</span> <span class="n">model_revision</span>
                <span class="o">/</span> <span class="n">_EXPERIMENTS_FOLDER_NAME</span>
                <span class="o">/</span> <span class="n">experiment_name</span>
                <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2">.json&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">model_path</span> <span class="o">/</span> <span class="n">model_revision</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2">.json&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_task_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">task_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">ModelMeta</span><span class="p">,</span>
        <span class="n">model_revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">raise_if_not_found</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">prioritize_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">experiment_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load the results from the local cache directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            task_name: The name of the task.</span>
<span class="sd">            model_name: The name of the model as a valid directory name or a ModelMeta object.</span>
<span class="sd">            model_revision: The revision of the model. Must be specified if model_name is a string.</span>
<span class="sd">            raise_if_not_found: If True, raise an error if the results are not found.</span>
<span class="sd">            prioritize_remote: If True, it will first try to load the results from the remote repository, if available.</span>
<span class="sd">            experiment_name: Optional experiment folder name (a valid directory name). If None, the default is used.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The results of the task, or None if not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_task_result_path</span><span class="p">(</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">model_revision</span><span class="o">=</span><span class="n">model_revision</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">task_name</span><span class="p">,</span>
            <span class="n">experiment_name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_remote</span><span class="p">:</span>
            <span class="n">remote_result_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_task_result_path</span><span class="p">(</span>
                <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
                <span class="n">model_revision</span><span class="o">=</span><span class="n">model_revision</span><span class="p">,</span>
                <span class="n">task_name</span><span class="o">=</span><span class="n">task_name</span><span class="p">,</span>
                <span class="n">remote</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">experiment_name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">remote_result_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="ow">and</span> <span class="n">prioritize_remote</span><span class="p">:</span>
                <span class="n">result_path</span> <span class="o">=</span> <span class="n">remote_result_path</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">result_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">result_path</span> <span class="o">=</span> <span class="n">remote_result_path</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">result_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Results for </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> not found in </span><span class="si">{</span><span class="n">result_path</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">raise_if_not_found</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_disk</span><span class="p">(</span><span class="n">result_path</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save_to_cache</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">task_result</span><span class="p">:</span> <span class="n">TaskResult</span><span class="p">,</span>
        <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">ModelMeta</span><span class="p">,</span>
        <span class="n">model_revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the task results to the local cache directory in the location {model_name}/{model_revision}/{task_name}.json.</span>

<span class="sd">        Where model_name is a path-normalized model name.</span>
<span class="sd">        In addition we also save a model_meta.json in the revision folder to preserve the model metadata.</span>

<span class="sd">        Args:</span>
<span class="sd">            task_result: The results of the task.</span>
<span class="sd">            model_name: The name of the model as a valid directory name or a ModelMeta object.</span>
<span class="sd">            model_revision: The revision of the model. Must be specified if model_name is a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_task_result_path</span><span class="p">(</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">model_revision</span><span class="o">=</span><span class="n">model_revision</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">result_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">task_result</span><span class="o">.</span><span class="n">to_disk</span><span class="p">(</span><span class="n">result_path</span><span class="p">)</span>

        <span class="n">model_meta_path</span> <span class="o">=</span> <span class="n">result_path</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;model_meta.json&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">ModelMeta</span><span class="p">):</span>
            <span class="n">meta</span> <span class="o">=</span> <span class="n">model_name</span>
            <span class="k">with</span> <span class="n">model_meta_path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">default_cache_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the local cache directory for MTEB results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to the local cache directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">default_cache_directory</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;.cache&quot;</span> <span class="o">/</span> <span class="s2">&quot;mteb&quot;</span>

        <span class="n">_cache_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MTEB_CACHE&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">cache_directory</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Path</span><span class="p">(</span><span class="n">_cache_directory</span><span class="p">)</span> <span class="k">if</span> <span class="n">_cache_directory</span> <span class="k">else</span> <span class="n">default_cache_directory</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">cache_directory</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">download_from_remote</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">remote</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/embeddings-benchmark/results&quot;</span><span class="p">,</span>
        <span class="n">download_latest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Downloads the latest version of the results repository from GitHub to a local cache directory. Required git to be installed.</span>

<span class="sd">        Args:</span>
<span class="sd">            remote: The URL of the results repository on GitHub.</span>
<span class="sd">            download_latest: If True it will download the latest version of the repository, otherwise it will only update the existing repository.</span>
<span class="sd">            revision: If specified, it will checkout the given revision after cloning or pulling the repository.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to the local cache directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cache directory </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="si">}</span><span class="s2"> does not exist, creating it&quot;</span>
            <span class="p">)</span>

        <span class="c1"># if &quot;results&quot; folder already exists update it</span>
        <span class="n">results_directory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;remote&quot;</span>

        <span class="k">if</span> <span class="n">results_directory</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="c1"># check repository in the directory is the same as the remote</span>
            <span class="n">remote_url</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;--get&quot;</span><span class="p">,</span> <span class="s2">&quot;remote.origin.url&quot;</span><span class="p">],</span>
                <span class="n">cwd</span><span class="o">=</span><span class="n">results_directory</span><span class="p">,</span>
                <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">remote_url</span> <span class="o">!=</span> <span class="n">remote</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;remote repository &#39;</span><span class="si">{</span><span class="n">remote</span><span class="si">}</span><span class="s2">&#39; does not match the one in </span><span class="si">{</span><span class="n">results_directory</span><span class="si">}</span><span class="s2">,  which is &#39;</span><span class="si">{</span><span class="n">remote_url</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                    <span class="o">+</span> <span class="s2">&quot; Please remove the directory and try again.&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">revision</span> <span class="ow">or</span> <span class="n">download_latest</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;remote repository already exists in </span><span class="si">{</span><span class="n">results_directory</span><span class="si">}</span><span class="s2">, fetching updates&quot;</span>
                <span class="p">)</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                    <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;fetch&quot;</span><span class="p">,</span> <span class="s2">&quot;--all&quot;</span><span class="p">,</span> <span class="s2">&quot;--tags&quot;</span><span class="p">],</span>
                    <span class="n">cwd</span><span class="o">=</span><span class="n">results_directory</span><span class="p">,</span>
                    <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Results repository already exists in </span><span class="si">{</span><span class="n">results_directory</span><span class="si">}</span><span class="s2">, skipping update, &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;set download_latest=True to update it&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">revision</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Checking out revision &#39;</span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                    <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;checkout&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="p">],</span>
                    <span class="n">cwd</span><span class="o">=</span><span class="n">results_directory</span><span class="p">,</span>
                    <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">results_directory</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No results repository found in </span><span class="si">{</span><span class="n">results_directory</span><span class="si">}</span><span class="s2">, cloning it from </span><span class="si">{</span><span class="n">remote</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="n">clone_cmd</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;clone&quot;</span><span class="p">,</span> <span class="s2">&quot;--depth&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">revision</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cloning repository at revision &#39;</span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="n">clone_cmd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--revision=</span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">clone_cmd</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">remote</span><span class="p">,</span> <span class="s2">&quot;remote&quot;</span><span class="p">])</span>

        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="n">clone_cmd</span><span class="p">,</span>
            <span class="n">cwd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="p">,</span>
            <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">results_directory</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_download_cached_results_from_branch</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">branch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cached-data&quot;</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;__cached_results.json.gz&quot;</span><span class="p">,</span>
        <span class="n">output_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">remote</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/embeddings-benchmark/results&quot;</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span>
        <span class="n">max_size_mb</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Download pre-computed cached results from a specific branch.</span>

<span class="sd">        This is significantly faster than download_from_remote() since it downloads</span>
<span class="sd">        only a compressed cache file instead of cloning the entire repository.</span>

<span class="sd">        The method performs the following steps:</span>
<span class="sd">        1. Downloads a gzipped JSON file from the specified branch</span>
<span class="sd">        2. Validates file size and content type</span>
<span class="sd">        3. Decompresses the gzip content</span>
<span class="sd">        4. Writes the decompressed JSON to disk</span>

<span class="sd">        Args:</span>
<span class="sd">            branch: Branch name to download from (default: &quot;cached-data&quot;)</span>
<span class="sd">            filename: Name of the cached results file (default: &quot;__cached_results.json.gz&quot;)</span>
<span class="sd">            output_path: Where to save the file. If None, uses {cache_path}/leaderboard/__cached_results.json</span>
<span class="sd">            remote: Base URL of the results repository</span>
<span class="sd">            timeout: Request timeout in seconds (default: 60)</span>
<span class="sd">            max_size_mb: Maximum allowed file size in megabytes (default: 500)</span>

<span class="sd">        Returns:</span>
<span class="sd">            Path to the downloaded and decompressed cache file</span>

<span class="sd">        Raises:</span>
<span class="sd">            requests.exceptions.RequestException: On HTTP errors</span>
<span class="sd">            ValueError: On validation failures (size, content-type)</span>
<span class="sd">            gzip.BadGzipFile: If content is not valid gzip</span>
<span class="sd">            UnicodeDecodeError: If content cannot be decoded as UTF-8</span>
<span class="sd">            PermissionError: If file cannot be written due to permissions</span>
<span class="sd">            OSError: On other file system errors</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; import mteb</span>
<span class="sd">            &gt;&gt;&gt; cache = mteb.ResultCache()</span>
<span class="sd">            &gt;&gt;&gt; # Download optimized cached results</span>
<span class="sd">            &gt;&gt;&gt; cache_file = cache._download_cached_results_from_branch()</span>
<span class="sd">            &gt;&gt;&gt; # Use custom output path</span>
<span class="sd">            &gt;&gt;&gt; cache_file = cache._download_cached_results_from_branch(</span>
<span class="sd">            ...     output_path=Path(&quot;/tmp/my_cache.json&quot;)</span>
<span class="sd">            ... )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">output_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Default to saving in {cache_path}/leaderboard/__cached_results.json</span>
            <span class="n">output_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;leaderboard&quot;</span> <span class="o">/</span> <span class="s2">&quot;__cached_results.json&quot;</span>

        <span class="c1"># Extract repository owner and name from the remote URL</span>
        <span class="c1"># e.g., &quot;https://github.com/embeddings-benchmark/results&quot; -&gt; &quot;embeddings-benchmark/results&quot;</span>
        <span class="n">repo_path</span> <span class="o">=</span> <span class="n">remote</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;https://github.com/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="s2">&quot;http://github.com/&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
        <span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://raw.githubusercontent.com/</span><span class="si">{</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloading cached results from </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Step 1: Download with validation</span>
        <span class="n">max_size_bytes</span> <span class="o">=</span> <span class="n">max_size_mb</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

            <span class="c1"># Check if this is a Git LFS pointer file</span>
            <span class="n">content_type</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content-type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">content_type</span> <span class="o">==</span> <span class="s2">&quot;text/plain; charset=utf-8&quot;</span>
                <span class="ow">and</span> <span class="sa">b</span><span class="s2">&quot;git-lfs&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span>
            <span class="p">):</span>
                <span class="c1"># Try Git LFS media URL instead</span>
                <span class="n">media_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://media.githubusercontent.com/media/</span><span class="si">{</span><span class="n">repo_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detected Git LFS file, trying media URL: </span><span class="si">{</span><span class="n">media_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">media_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>
                <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
                <span class="n">content_type</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content-type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

            <span class="c1"># Validate content-type header</span>
            <span class="n">expected_content_types</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;application/gzip&quot;</span><span class="p">,</span>
                <span class="s2">&quot;application/octet-stream&quot;</span><span class="p">,</span>
                <span class="s2">&quot;application/x-gzip&quot;</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="k">if</span> <span class="n">content_type</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span>
                <span class="n">ct</span> <span class="ow">in</span> <span class="n">content_type</span> <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="n">expected_content_types</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unexpected content-type: </span><span class="si">{</span><span class="n">content_type</span><span class="si">}</span><span class="s2">. Expected one of: </span><span class="si">{</span><span class="n">expected_content_types</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="c1"># Validate file size</span>
            <span class="n">content_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">content_length</span> <span class="o">&gt;</span> <span class="n">max_size_bytes</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Downloaded file too large: </span><span class="si">{</span><span class="n">content_length</span><span class="si">}</span><span class="s2"> bytes (max: </span><span class="si">{</span><span class="n">max_size_bytes</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="p">)</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;HTTP request successful, content length: </span><span class="si">{</span><span class="n">content_length</span><span class="si">}</span><span class="s2"> bytes&quot;</span>
            <span class="p">)</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected HTTP error: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="c1"># Step 2: Decompress gzip data</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Attempting gzip decompression...&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">gzip</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">content</span><span class="p">),</span> <span class="s2">&quot;rt&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">gz_file</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">gz_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Decompression successful, data length: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> chars&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected decompression error: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="c1"># Step 3: Write to disk</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attempting to write to: </span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Check parent directory exists and is writable</span>
        <span class="n">output_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">output_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;File write successful, size: </span><span class="si">{</span><span class="n">output_path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span><span class="si">}</span><span class="s2"> bytes&quot;</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unexpected file write error: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">e</span>

        <span class="k">return</span> <span class="n">output_path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the local cache directory.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cache directory </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="si">}</span><span class="s2"> cleared.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cache directory `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="si">}</span><span class="s2">` does not exist.&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_load_from_cache</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cache_filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;__cached_results.json&quot;</span><span class="p">,</span>
        <span class="n">rebuild</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load benchmark results using the best available strategy.</span>

<span class="sd">        Args:</span>
<span class="sd">            cache_filename: Name of the cache file. The full path will be constructed as</span>
<span class="sd">                {cache_path}/leaderboard/{cache_filename}.</span>
<span class="sd">            rebuild: If True, force a full rebuild from the results repository, bypassing any</span>
<span class="sd">                     pre-computed JSON cache.</span>

<span class="sd">        Strategy:</span>
<span class="sd">            1. If rebuild=False and local cache exists at cache_path  load and return</span>
<span class="sd">            2. If rebuild=False, try downloading pre-computed cache from &#39;cached-data&#39; branch</span>
<span class="sd">                save to cache_path and return</span>
<span class="sd">            3. Fallback (or if rebuild=True): clone the full results repository, build from</span>
<span class="sd">               individual model files, call results.to_disk(cache_path), and return.</span>

<span class="sd">        Returns:</span>
<span class="sd">            BenchmarkResults ready for leaderboard display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cache_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;leaderboard&quot;</span> <span class="o">/</span> <span class="n">cache_filename</span>

        <span class="c1"># If rebuild=True, skip directly to full repository rebuild</span>
        <span class="k">if</span> <span class="n">rebuild</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Rebuild requested, forcing full repository clone and rebuild...&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rebuild_from_full_repository</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>

        <span class="c1"># Strategy 1: Try loading from existing local quick cache</span>
        <span class="k">if</span> <span class="n">cache_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading existing quick cache from </span><span class="si">{</span><span class="n">cache_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">BenchmarkResults</span><span class="o">.</span><span class="n">from_disk</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Failed to load quick cache: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Trying other strategies...&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Strategy 2: Try downloading from cached-data branch</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Attempting to download pre-computed cache from cached-data branch...&quot;</span>
            <span class="p">)</span>
            <span class="n">downloaded_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_cached_results_from_branch</span><span class="p">(</span>
                <span class="n">output_path</span><span class="o">=</span><span class="n">cache_path</span>
            <span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloaded cache to </span><span class="si">{</span><span class="n">downloaded_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">BenchmarkResults</span><span class="o">.</span><span class="n">from_disk</span><span class="p">(</span><span class="n">downloaded_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to download from cached-data branch: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Strategy 3: Fallback to full repository clone</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Falling back to full repository clone and rebuild...&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rebuild_from_full_repository</span><span class="p">(</span><span class="n">cache_path</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_rebuild_from_full_repository</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quick_cache_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clone/pull the full results repository and build BenchmarkResults from individual files.</span>

<span class="sd">        This method performs a full rebuild by:</span>
<span class="sd">        1. Downloading or updating the full results repository</span>
<span class="sd">        2. Loading results from all individual model files</span>
<span class="sd">        3. Saving the aggregated results to the quick cache path</span>
<span class="sd">        4. Returning the BenchmarkResults object</span>

<span class="sd">        Args:</span>
<span class="sd">            quick_cache_path: Path where the rebuilt cache should be saved</span>

<span class="sd">        Returns:</span>
<span class="sd">            BenchmarkResults built from the full repository</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Download or update the full repository</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">download_from_remote</span><span class="p">()</span>

        <span class="n">all_model_names</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">model_meta</span><span class="o">.</span><span class="n">name</span>
            <span class="k">for</span> <span class="n">model_meta</span> <span class="ow">in</span> <span class="n">mteb</span><span class="o">.</span><span class="n">get_model_metas</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">model_meta</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">]</span>

        <span class="n">all_results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_results</span><span class="p">(</span>
            <span class="n">models</span><span class="o">=</span><span class="n">all_model_names</span><span class="p">,</span>
            <span class="n">only_main_score</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">require_model_meta</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">include_remote</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Save to disk for future use</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Saving rebuilt cache to </span><span class="si">{</span><span class="n">quick_cache_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">all_results</span><span class="o">.</span><span class="n">to_disk</span><span class="p">(</span><span class="n">quick_cache_path</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">all_results</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;ResultCache(cache_path=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_cache_paths</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">models</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ModelMeta</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">require_model_meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">include_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">load_experiments</span><span class="p">:</span> <span class="n">LoadExperimentEnum</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">NO_EXPERIMENTS</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all paths to result JSON files in the cache directory.</span>

<span class="sd">        These paths can then be used to fetch task results, like:</span>
<span class="sd">        ```python</span>
<span class="sd">        for path in paths:</span>
<span class="sd">            task_result = TaskResult.from_disk(path)</span>
<span class="sd">        ```</span>

<span class="sd">        Args:</span>
<span class="sd">            models: A list of model names or ModelMeta objects to filter the paths.</span>
<span class="sd">            tasks: A list of task names to filter the paths.</span>
<span class="sd">            require_model_meta: If True, only return paths that have a model_meta.json file.</span>
<span class="sd">            include_remote: If True, include remote results in the returned paths.</span>
<span class="sd">            load_experiments: If True, include experiments in the returned paths.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of paths in the cache directory.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; import mteb</span>
<span class="sd">            &gt;&gt;&gt; cache = mteb.ResultCache()</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # Get all cache paths</span>
<span class="sd">            &gt;&gt;&gt; paths = cache.get_cache_paths()</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # Get all cache paths for a specific task</span>
<span class="sd">            &gt;&gt;&gt; paths = cache.get_cache_paths(tasks=[&quot;STS12&quot;])</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # Get all cache paths for a specific model</span>
<span class="sd">            &gt;&gt;&gt; paths = cache.get_cache_paths(models=[&quot;sentence-transformers/all-MiniLM-L6-v2&quot;])</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # Get all cache paths for a specific model and revision</span>
<span class="sd">            &gt;&gt;&gt; model_meta = mteb.get_model_meta(&quot;sentence-transformers/all-MiniLM-L6-v2&quot;)</span>
<span class="sd">            &gt;&gt;&gt; paths = cache.get_cache_paths(models=[model_meta])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">load_experiments</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">load_experiments</span> <span class="o">=</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">load_experiments</span><span class="p">)</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_cache_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">p</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">base_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*/*/*.json&quot;</span><span class="p">)</span>  <span class="c1"># model/revision/task.json</span>
                <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;model_meta.json&quot;</span>
            <span class="p">]</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_experiments_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">p</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">base_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;*/*/</span><span class="si">{</span><span class="n">_EXPERIMENTS_FOLDER_NAME</span><span class="si">}</span><span class="s2">/*/*.json&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;model_meta.json&quot;</span>
            <span class="p">]</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_get_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">experiments</span><span class="p">:</span> <span class="n">LoadExperimentEnum</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
            <span class="n">paths</span> <span class="o">=</span> <span class="n">_cache_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">experiments</span> <span class="o">==</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">NO_EXPERIMENTS</span><span class="p">:</span>
                <span class="n">paths</span> <span class="o">+=</span> <span class="n">_experiments_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">paths</span>

        <span class="n">results_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;results&quot;</span>
        <span class="n">remote_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;remote&quot;</span> <span class="o">/</span> <span class="s2">&quot;results&quot;</span>

        <span class="n">cache_paths</span> <span class="o">=</span> <span class="n">_get_paths</span><span class="p">(</span><span class="n">results_path</span><span class="p">,</span> <span class="n">load_experiments</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">include_remote</span><span class="p">:</span>
            <span class="n">cache_paths</span> <span class="o">+=</span> <span class="n">_get_paths</span><span class="p">(</span><span class="n">remote_path</span><span class="p">,</span> <span class="n">load_experiments</span><span class="p">)</span>

        <span class="n">cache_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filter_paths_by_model_and_revision</span><span class="p">(</span>
            <span class="n">cache_paths</span><span class="p">,</span>
            <span class="n">models</span><span class="o">=</span><span class="n">models</span><span class="p">,</span>
            <span class="n">load_experiments</span><span class="o">=</span><span class="n">load_experiments</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">cache_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filter_paths_by_task</span><span class="p">(</span><span class="n">cache_paths</span><span class="p">,</span> <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">require_model_meta</span><span class="p">:</span>
            <span class="n">cache_paths</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">cache_paths</span> <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;model_meta.json&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
            <span class="p">]</span>
        <span class="k">return</span> <span class="n">cache_paths</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_models</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">require_model_meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">include_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">ModelName</span><span class="p">,</span> <span class="n">Revision</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all models in the cache directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            tasks: A list of task names to filter the models.</span>
<span class="sd">            require_model_meta: If True, only return models that have a model_meta.json file.</span>
<span class="sd">            include_remote: If True, include remote results in the returned models.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of tuples containing the model name and revision.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cache_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">(</span>
            <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">,</span>
            <span class="n">require_model_meta</span><span class="o">=</span><span class="n">require_model_meta</span><span class="p">,</span>
            <span class="n">include_remote</span><span class="o">=</span><span class="n">include_remote</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">models</span> <span class="o">=</span> <span class="p">[(</span><span class="n">p</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">cache_paths</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">models</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_task_names</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">models</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ModelMeta</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">require_model_meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">include_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all task names in the cache directory.</span>

<span class="sd">        Args:</span>
<span class="sd">            models: A list of model names or ModelMeta objects to filter the task names.</span>
<span class="sd">            require_model_meta: If True, only return task names that have a model_meta.json file</span>
<span class="sd">            include_remote: If True, include remote results in the returned task names.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of task names in the cache directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cache_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">(</span>
            <span class="n">models</span><span class="o">=</span><span class="n">models</span><span class="p">,</span>
            <span class="n">require_model_meta</span><span class="o">=</span><span class="n">require_model_meta</span><span class="p">,</span>
            <span class="n">include_remote</span><span class="o">=</span><span class="n">include_remote</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">stem</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">cache_paths</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tasks</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_model_name_and_revision_from_path</span><span class="p">(</span>
        <span class="n">revision_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">ModelName</span><span class="p">,</span> <span class="n">Revision</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get model name, revision and experiment name from the given path.</span>

<span class="sd">        Args:</span>
<span class="sd">            revision_path: The path to the revision folder, which should contain a model_meta.json file. If the file is not found, it will attempt to extract the model name and revision from the path.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple containing the model name, revision and experiment name (if available).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model_meta</span> <span class="o">=</span> <span class="n">revision_path</span> <span class="o">/</span> <span class="s2">&quot;model_meta.json&quot;</span>
        <span class="n">model_path</span> <span class="o">=</span> <span class="n">revision_path</span><span class="o">.</span><span class="n">parent</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">model_meta</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;model_meta.json not found in </span><span class="si">{</span><span class="n">revision_path</span><span class="si">}</span><span class="s2">, extracting model_name and revision from the path&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">_EXPERIMENTS_FOLDER_NAME</span> <span class="ow">in</span> <span class="n">revision_path</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Path </span><span class="si">{</span><span class="n">revision_path</span><span class="si">}</span><span class="s2"> contains an experiment folder, extracting model_name and revision accordingly&quot;</span>
                <span class="p">)</span>
                <span class="n">experiment_name</span> <span class="o">=</span> <span class="n">revision_path</span><span class="o">.</span><span class="n">name</span>
                <span class="n">revision</span> <span class="o">=</span> <span class="n">revision_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
                <span class="n">model_name</span> <span class="o">=</span> <span class="n">revision_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">revision</span><span class="p">,</span> <span class="n">experiment_name</span>
            <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_path</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
            <span class="n">revision</span> <span class="o">=</span> <span class="n">revision_path</span><span class="o">.</span><span class="n">name</span>
            <span class="k">return</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">revision</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">with</span> <span class="n">model_meta</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">model_meta_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_meta_json</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="n">revision</span> <span class="o">=</span> <span class="n">model_meta_json</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span>
        <span class="n">experiment_kwargs</span> <span class="o">=</span> <span class="n">model_meta_json</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;experiment_kwargs&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">experiment_name_</span> <span class="o">=</span> <span class="n">_serialize_experiment_kwargs_to_name</span><span class="p">(</span><span class="n">experiment_kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">revision</span><span class="p">,</span> <span class="n">experiment_name_</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_filter_paths_by_model_and_revision</span><span class="p">(</span>
        <span class="n">paths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">],</span>
        <span class="n">models</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ModelMeta</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">load_experiments</span><span class="p">:</span> <span class="n">LoadExperimentEnum</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filter a list of paths by model name and optional revision.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of paths that match the specified model names and revisions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">models</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">paths</span>

        <span class="n">first_model</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">models</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_model</span><span class="p">,</span> <span class="n">ModelMeta</span><span class="p">):</span>
            <span class="n">models</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;Iterable[ModelMeta]&quot;</span><span class="p">,</span> <span class="n">models</span><span class="p">)</span>
            <span class="n">name_and_revision</span> <span class="o">=</span> <span class="p">{</span>
                <span class="p">(</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">model_name_as_path</span><span class="p">(),</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">revision</span> <span class="ow">or</span> <span class="s2">&quot;no_revision_available&quot;</span><span class="p">,</span>
                    <span class="n">m</span><span class="o">.</span><span class="n">experiment_name</span>
                    <span class="k">if</span> <span class="n">load_experiments</span> <span class="ow">is</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">MATCH_KWARGS</span>
                    <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">models</span>
            <span class="p">}</span>
            <span class="n">model_name_and_revision</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">_EXPERIMENTS_FOLDER_NAME</span> <span class="ow">in</span> <span class="n">path</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                    <span class="n">revision</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
                    <span class="n">model_name</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
                    <span class="n">experiment_name</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
                        <span class="k">if</span> <span class="n">load_experiments</span> <span class="ow">is</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">MATCH_KWARGS</span>
                        <span class="k">else</span> <span class="kc">None</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">revision</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
                    <span class="n">model_name</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
                    <span class="n">experiment_name</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">model_name_and_revision</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">model_name</span><span class="p">,</span> <span class="n">revision</span><span class="p">,</span> <span class="n">experiment_name</span><span class="p">))</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">p</span>
                <span class="k">for</span> <span class="n">model_revision</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">model_name_and_revision</span><span class="p">,</span> <span class="n">paths</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">model_revision</span> <span class="ow">in</span> <span class="n">name_and_revision</span>
            <span class="p">]</span>

        <span class="n">str_models</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;Sequence[str]&quot;</span><span class="p">,</span> <span class="n">models</span><span class="p">)</span>
        <span class="n">model_names</span> <span class="o">=</span> <span class="p">{</span><span class="n">m</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;__&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">str_models</span><span class="p">}</span>
        <span class="n">filtered_paths</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">_EXPERIMENTS_FOLDER_NAME</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
                <span class="n">model_name</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">model_name</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>
            <span class="k">if</span> <span class="n">model_name</span> <span class="ow">in</span> <span class="n">model_names</span><span class="p">:</span>
                <span class="n">filtered_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">filtered_paths</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_filter_paths_by_task</span><span class="p">(</span>
        <span class="n">paths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">],</span>
        <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">tasks</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">task_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">AbsTask</span><span class="p">):</span>
                    <span class="n">task_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">task_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

            <span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paths</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">stem</span> <span class="ow">in</span> <span class="n">task_names</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">paths</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_results</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">models</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ModelMeta</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">]</span> <span class="o">|</span> <span class="n">Benchmark</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">require_model_meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">include_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">validate_and_filter</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">only_main_score</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">load_experiments</span><span class="p">:</span> <span class="n">LoadExperimentEnum</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">MATCH_KWARGS</span><span class="p">,</span>
        <span class="n">experiment_kwargs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Loads the results from the cache directory and returns a BenchmarkResults object.</span>

<span class="sd">        Args:</span>
<span class="sd">            models: A list of model names to load the results for. If None it will load the results for all models.</span>
<span class="sd">            tasks: A list of task names to load the results for. If str is passed, then benchmark will be loaded.</span>
<span class="sd">                If Benchmark is passed, then all tasks in the benchmark will be loaded.</span>
<span class="sd">                If None it will load the results for all tasks.</span>
<span class="sd">            require_model_meta: If True it will ignore results that do not have a model_meta.json file. If false it attempt to</span>
<span class="sd">                extract the model name and revision from the path.</span>
<span class="sd">            include_remote: If True, it will include results from the remote repository.</span>
<span class="sd">            validate_and_filter: If True it will validate that the results object for the task contains the correct splits and filter out</span>
<span class="sd">                splits from the results object that are not default in the task metadata.</span>
<span class="sd">            only_main_score: If True, only the main score will be loaded.</span>
<span class="sd">            load_experiments: If True, it will also load results from experiment folders.</span>
<span class="sd">            experiment_kwargs: If specified, it will only load results from experiments with the specified kwargs. Only used if load_experiments is True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A BenchmarkResults object containing the results for the specified models and tasks.</span>

<span class="sd">        Examples:</span>
<span class="sd">            &gt;&gt;&gt; import mteb</span>
<span class="sd">            &gt;&gt;&gt; cache = mteb.ResultCache()</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            &gt;&gt;&gt; # Load results for specific models and tasks</span>
<span class="sd">            &gt;&gt;&gt; results = cache.load_results(</span>
<span class="sd">            ...     models=[&quot;sentence-transformers/all-MiniLM-L6-v2&quot;],</span>
<span class="sd">            ...     tasks=[&quot;STS12&quot;],</span>
<span class="sd">            ...     require_model_meta=True,</span>
<span class="sd">            ... )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">tasks</span> <span class="o">=</span> <span class="n">mteb</span><span class="o">.</span><span class="n">get_benchmark</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">load_experiments</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">load_experiments</span> <span class="o">=</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">load_experiments</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">load_experiments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">MATCH_KWARGS</span>
            <span class="ow">and</span> <span class="n">experiment_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;experiment_kwargs is specified but load_experiments is not set to MATCH_KWARGS.&quot;</span>
                <span class="s2">&quot;No results will be loaded.&quot;</span>
            <span class="p">)</span>

        <span class="n">models_as_model_meta</span> <span class="o">=</span> <span class="n">models</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">models</span><span class="p">)),</span> <span class="n">ModelMeta</span>
        <span class="p">)</span>

        <span class="n">paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">(</span>
            <span class="n">models</span><span class="o">=</span><span class="n">models</span><span class="p">,</span>
            <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">,</span>
            <span class="n">require_model_meta</span><span class="o">=</span><span class="n">require_model_meta</span><span class="p">,</span>
            <span class="n">include_remote</span><span class="o">=</span><span class="n">include_remote</span><span class="p">,</span>
            <span class="n">load_experiments</span><span class="o">=</span><span class="n">load_experiments</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">models_results</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

        <span class="n">task_names</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AbsTask</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">tasks</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">AbsTask</span><span class="p">):</span>
                    <span class="n">task_names</span><span class="p">[</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">task</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">task_names</span><span class="p">[</span><span class="n">task</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">experiment_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">experiment_kwargs</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
            <span class="n">experiment_kwargs</span> <span class="o">=</span> <span class="p">[</span><span class="n">experiment_kwargs</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">experiment_kwargs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">experiment_names</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">_serialize_experiment_kwargs_to_name</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">experiment_kwargs</span>
            <span class="p">}</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
            <span class="n">task_result</span> <span class="o">=</span> <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">only_main_score</span><span class="p">:</span>
                <span class="n">task_result</span> <span class="o">=</span> <span class="n">task_result</span><span class="o">.</span><span class="n">only_main_score</span><span class="p">()</span>
            <span class="n">model_name</span><span class="p">,</span> <span class="n">revision</span><span class="p">,</span> <span class="n">experiment_name</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_name_and_revision_from_path</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">validate_and_filter</span><span class="p">:</span>
                <span class="n">task_instance</span> <span class="o">=</span> <span class="n">task_names</span><span class="p">[</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">task_result</span> <span class="o">=</span> <span class="n">task_result</span><span class="o">.</span><span class="n">validate_and_filter_scores</span><span class="p">(</span>
                        <span class="n">task</span><span class="o">=</span><span class="n">task_instance</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Validation failed for </span><span class="si">{</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">continue</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">experiment_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">experiment_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">experiment_names</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Skipping experiment </span><span class="si">{</span><span class="n">experiment_name</span><span class="si">}</span><span class="s2"> as it is not in the specified experiment names&quot;</span>
                <span class="p">)</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="p">(</span>
                <span class="n">load_experiments</span> <span class="ow">is</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">MATCH_KWARGS</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">models_as_model_meta</span>  <span class="c1"># for models meta path are prefiltered</span>
                <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">experiment_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="ow">and</span> <span class="n">experiment_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">models_results</span><span class="p">[(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">revision</span><span class="p">,</span> <span class="n">experiment_name</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task_result</span><span class="p">)</span>

        <span class="c1"># create BenchmarkResults object</span>
        <span class="n">models_results_object</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ModelResult</span><span class="p">(</span>
                <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
                <span class="n">model_revision</span><span class="o">=</span><span class="n">revision</span><span class="p">,</span>
                <span class="n">task_results</span><span class="o">=</span><span class="n">task_results</span><span class="p">,</span>
                <span class="n">experiment_name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="p">(</span>
                <span class="n">model_name</span><span class="p">,</span>
                <span class="n">revision</span><span class="p">,</span>
                <span class="n">experiment_name</span><span class="p">,</span>
            <span class="p">),</span> <span class="n">task_results</span> <span class="ow">in</span> <span class="n">models_results</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">BenchmarkResults</span><span class="p">(</span>
            <span class="n">model_results</span><span class="o">=</span><span class="n">models_results_object</span><span class="p">,</span>
            <span class="n">benchmark</span><span class="o">=</span><span class="n">tasks</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">Benchmark</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="mteb.cache.ResultCache.default_cache_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">default_cache_path</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.cache.ResultCache.default_cache_path" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the local cache directory for MTEB results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the local cache directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.cache.ResultCache.has_remote" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">has_remote</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.cache.ResultCache.has_remote" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the remote results repository exists in the cache directory.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the remote results repository exists, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="mteb.cache.ResultCache.clear_cache" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">clear_cache</span><span class="p">()</span></code>

<a href="#mteb.cache.ResultCache.clear_cache" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Clear the local cache directory.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear the local cache directory.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cache directory </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="si">}</span><span class="s2"> cleared.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cache directory `</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="si">}</span><span class="s2">` does not exist.&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.cache.ResultCache.download_from_remote" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">download_from_remote</span><span class="p">(</span><span class="n">remote</span><span class="o">=</span><span class="s1">&#39;https://github.com/embeddings-benchmark/results&#39;</span><span class="p">,</span> <span class="n">download_latest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#mteb.cache.ResultCache.download_from_remote" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Downloads the latest version of the results repository from GitHub to a local cache directory. Required git to be installed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>remote</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The URL of the results repository on GitHub.</p>
              </div>
            </td>
            <td>
                  <code>&#39;https://github.com/embeddings-benchmark/results&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>download_latest</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will download the latest version of the repository, otherwise it will only update the existing repository.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>revision</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If specified, it will checkout the given revision after cloning or pulling the repository.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the local cache directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">download_from_remote</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">remote</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/embeddings-benchmark/results&quot;</span><span class="p">,</span>
    <span class="n">download_latest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Downloads the latest version of the results repository from GitHub to a local cache directory. Required git to be installed.</span>

<span class="sd">    Args:</span>
<span class="sd">        remote: The URL of the results repository on GitHub.</span>
<span class="sd">        download_latest: If True it will download the latest version of the repository, otherwise it will only update the existing repository.</span>
<span class="sd">        revision: If specified, it will checkout the given revision after cloning or pulling the repository.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The path to the local cache directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Cache directory </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="si">}</span><span class="s2"> does not exist, creating it&quot;</span>
        <span class="p">)</span>

    <span class="c1"># if &quot;results&quot; folder already exists update it</span>
    <span class="n">results_directory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;remote&quot;</span>

    <span class="k">if</span> <span class="n">results_directory</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="c1"># check repository in the directory is the same as the remote</span>
        <span class="n">remote_url</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;--get&quot;</span><span class="p">,</span> <span class="s2">&quot;remote.origin.url&quot;</span><span class="p">],</span>
            <span class="n">cwd</span><span class="o">=</span><span class="n">results_directory</span><span class="p">,</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">remote_url</span> <span class="o">!=</span> <span class="n">remote</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;remote repository &#39;</span><span class="si">{</span><span class="n">remote</span><span class="si">}</span><span class="s2">&#39; does not match the one in </span><span class="si">{</span><span class="n">results_directory</span><span class="si">}</span><span class="s2">,  which is &#39;</span><span class="si">{</span><span class="n">remote_url</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
                <span class="o">+</span> <span class="s2">&quot; Please remove the directory and try again.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">revision</span> <span class="ow">or</span> <span class="n">download_latest</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;remote repository already exists in </span><span class="si">{</span><span class="n">results_directory</span><span class="si">}</span><span class="s2">, fetching updates&quot;</span>
            <span class="p">)</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;fetch&quot;</span><span class="p">,</span> <span class="s2">&quot;--all&quot;</span><span class="p">,</span> <span class="s2">&quot;--tags&quot;</span><span class="p">],</span>
                <span class="n">cwd</span><span class="o">=</span><span class="n">results_directory</span><span class="p">,</span>
                <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Results repository already exists in </span><span class="si">{</span><span class="n">results_directory</span><span class="si">}</span><span class="s2">, skipping update, &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;set download_latest=True to update it&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">revision</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Checking out revision &#39;</span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
                <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;checkout&quot;</span><span class="p">,</span> <span class="n">revision</span><span class="p">],</span>
                <span class="n">cwd</span><span class="o">=</span><span class="n">results_directory</span><span class="p">,</span>
                <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">results_directory</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;No results repository found in </span><span class="si">{</span><span class="n">results_directory</span><span class="si">}</span><span class="s2">, cloning it from </span><span class="si">{</span><span class="n">remote</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="n">clone_cmd</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;git&quot;</span><span class="p">,</span> <span class="s2">&quot;clone&quot;</span><span class="p">,</span> <span class="s2">&quot;--depth&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">revision</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cloning repository at revision &#39;</span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="n">clone_cmd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--revision=</span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">clone_cmd</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">remote</span><span class="p">,</span> <span class="s2">&quot;remote&quot;</span><span class="p">])</span>

    <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="n">clone_cmd</span><span class="p">,</span>
        <span class="n">cwd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="p">,</span>
        <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">results_directory</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.cache.ResultCache.get_cache_paths" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_cache_paths</span><span class="p">(</span><span class="n">models</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tasks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">require_model_meta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">include_remote</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">load_experiments</span><span class="o">=</span><span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">NO_EXPERIMENTS</span><span class="p">)</span></code>

<a href="#mteb.cache.ResultCache.get_cache_paths" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all paths to result JSON files in the cache directory.</p>
<p>These paths can then be used to fetch task results, like:
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
    <span class="n">task_result</span> <span class="o">=</span> <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>models</code>
            </td>
            <td>
                  <code><span title="collections.abc.Sequence">Sequence</span>[<span title="str">str</span>] | <span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.models.model_meta.ModelMeta&lt;/code&gt; (&lt;code&gt;mteb.models.ModelMeta&lt;/code&gt;)" href="../model/#mteb.models.model_meta.ModelMeta">ModelMeta</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of model names or ModelMeta objects to filter the paths.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tasks</code>
            </td>
            <td>
                  <code><span title="collections.abc.Sequence">Sequence</span>[<span title="str">str</span>] | <span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.AbsTask&lt;/code&gt; (&lt;code&gt;mteb.abstasks.AbsTask&lt;/code&gt;)" href="../task/#mteb.AbsTask">AbsTask</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of task names to filter the paths.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>require_model_meta</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, only return paths that have a model_meta.json file.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_remote</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, include remote results in the returned paths.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>load_experiments</code>
            </td>
            <td>
                  <code><span title="mteb.cache.LoadExperimentEnum">LoadExperimentEnum</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, include experiments in the returned paths.</p>
              </div>
            </td>
            <td>
                  <code><span title="mteb.cache.LoadExperimentEnum.NO_EXPERIMENTS">NO_EXPERIMENTS</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="pathlib.Path">Path</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of paths in the cache directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">mteb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">mteb</span><span class="o">.</span><span class="n">ResultCache</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get all cache paths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get all cache paths for a specific task</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">(</span><span class="n">tasks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;STS12&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get all cache paths for a specific model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">(</span><span class="n">models</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;sentence-transformers/all-MiniLM-L6-v2&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get all cache paths for a specific model and revision</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_meta</span> <span class="o">=</span> <span class="n">mteb</span><span class="o">.</span><span class="n">get_model_meta</span><span class="p">(</span><span class="s2">&quot;sentence-transformers/all-MiniLM-L6-v2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">paths</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">(</span><span class="n">models</span><span class="o">=</span><span class="p">[</span><span class="n">model_meta</span><span class="p">])</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_cache_paths</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">models</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ModelMeta</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">require_model_meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">include_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">load_experiments</span><span class="p">:</span> <span class="n">LoadExperimentEnum</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">NO_EXPERIMENTS</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all paths to result JSON files in the cache directory.</span>

<span class="sd">    These paths can then be used to fetch task results, like:</span>
<span class="sd">    ```python</span>
<span class="sd">    for path in paths:</span>
<span class="sd">        task_result = TaskResult.from_disk(path)</span>
<span class="sd">    ```</span>

<span class="sd">    Args:</span>
<span class="sd">        models: A list of model names or ModelMeta objects to filter the paths.</span>
<span class="sd">        tasks: A list of task names to filter the paths.</span>
<span class="sd">        require_model_meta: If True, only return paths that have a model_meta.json file.</span>
<span class="sd">        include_remote: If True, include remote results in the returned paths.</span>
<span class="sd">        load_experiments: If True, include experiments in the returned paths.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of paths in the cache directory.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; import mteb</span>
<span class="sd">        &gt;&gt;&gt; cache = mteb.ResultCache()</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Get all cache paths</span>
<span class="sd">        &gt;&gt;&gt; paths = cache.get_cache_paths()</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Get all cache paths for a specific task</span>
<span class="sd">        &gt;&gt;&gt; paths = cache.get_cache_paths(tasks=[&quot;STS12&quot;])</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Get all cache paths for a specific model</span>
<span class="sd">        &gt;&gt;&gt; paths = cache.get_cache_paths(models=[&quot;sentence-transformers/all-MiniLM-L6-v2&quot;])</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Get all cache paths for a specific model and revision</span>
<span class="sd">        &gt;&gt;&gt; model_meta = mteb.get_model_meta(&quot;sentence-transformers/all-MiniLM-L6-v2&quot;)</span>
<span class="sd">        &gt;&gt;&gt; paths = cache.get_cache_paths(models=[model_meta])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">load_experiments</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">load_experiments</span> <span class="o">=</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">load_experiments</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_cache_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">p</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">base_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*/*/*.json&quot;</span><span class="p">)</span>  <span class="c1"># model/revision/task.json</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;model_meta.json&quot;</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_experiments_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">p</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">base_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;*/*/</span><span class="si">{</span><span class="n">_EXPERIMENTS_FOLDER_NAME</span><span class="si">}</span><span class="s2">/*/*.json&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;model_meta.json&quot;</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">experiments</span><span class="p">:</span> <span class="n">LoadExperimentEnum</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="n">_cache_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">experiments</span> <span class="o">==</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">NO_EXPERIMENTS</span><span class="p">:</span>
            <span class="n">paths</span> <span class="o">+=</span> <span class="n">_experiments_paths</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">paths</span>

    <span class="n">results_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;results&quot;</span>
    <span class="n">remote_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;remote&quot;</span> <span class="o">/</span> <span class="s2">&quot;results&quot;</span>

    <span class="n">cache_paths</span> <span class="o">=</span> <span class="n">_get_paths</span><span class="p">(</span><span class="n">results_path</span><span class="p">,</span> <span class="n">load_experiments</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">include_remote</span><span class="p">:</span>
        <span class="n">cache_paths</span> <span class="o">+=</span> <span class="n">_get_paths</span><span class="p">(</span><span class="n">remote_path</span><span class="p">,</span> <span class="n">load_experiments</span><span class="p">)</span>

    <span class="n">cache_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filter_paths_by_model_and_revision</span><span class="p">(</span>
        <span class="n">cache_paths</span><span class="p">,</span>
        <span class="n">models</span><span class="o">=</span><span class="n">models</span><span class="p">,</span>
        <span class="n">load_experiments</span><span class="o">=</span><span class="n">load_experiments</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">cache_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filter_paths_by_task</span><span class="p">(</span><span class="n">cache_paths</span><span class="p">,</span> <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">require_model_meta</span><span class="p">:</span>
        <span class="n">cache_paths</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">cache_paths</span> <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;model_meta.json&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
        <span class="p">]</span>
    <span class="k">return</span> <span class="n">cache_paths</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.cache.ResultCache.get_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_models</span><span class="p">(</span><span class="n">tasks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">require_model_meta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">include_remote</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#mteb.cache.ResultCache.get_models" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all models in the cache directory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tasks</code>
            </td>
            <td>
                  <code><span title="collections.abc.Sequence">Sequence</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of task names to filter the models.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>require_model_meta</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, only return models that have a model_meta.json file.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_remote</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, include remote results in the returned models.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="tuple">tuple</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;ModelName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.ModelName&lt;/code&gt;)" href="../types/#mteb.types._metadata.ModelName">ModelName</a>, <a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Revision&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.Revision&lt;/code&gt;)" href="../types/#mteb.types._metadata.Revision">Revision</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tuples containing the model name and revision.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_models</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">require_model_meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">include_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">ModelName</span><span class="p">,</span> <span class="n">Revision</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all models in the cache directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        tasks: A list of task names to filter the models.</span>
<span class="sd">        require_model_meta: If True, only return models that have a model_meta.json file.</span>
<span class="sd">        include_remote: If True, include remote results in the returned models.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of tuples containing the model name and revision.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">(</span>
        <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">,</span>
        <span class="n">require_model_meta</span><span class="o">=</span><span class="n">require_model_meta</span><span class="p">,</span>
        <span class="n">include_remote</span><span class="o">=</span><span class="n">include_remote</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">models</span> <span class="o">=</span> <span class="p">[(</span><span class="n">p</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">cache_paths</span><span class="p">]</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">models</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.cache.ResultCache.get_task_names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_task_names</span><span class="p">(</span><span class="n">models</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">require_model_meta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">include_remote</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#mteb.cache.ResultCache.get_task_names" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all task names in the cache directory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>models</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | <span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.models.model_meta.ModelMeta&lt;/code&gt; (&lt;code&gt;mteb.models.ModelMeta&lt;/code&gt;)" href="../model/#mteb.models.model_meta.ModelMeta">ModelMeta</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of model names or ModelMeta objects to filter the task names.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>require_model_meta</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, only return task names that have a model_meta.json file</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_remote</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, include remote results in the returned task names.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of task names in the cache directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_task_names</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">models</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ModelMeta</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">require_model_meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">include_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all task names in the cache directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        models: A list of model names or ModelMeta objects to filter the task names.</span>
<span class="sd">        require_model_meta: If True, only return task names that have a model_meta.json file</span>
<span class="sd">        include_remote: If True, include remote results in the returned task names.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of task names in the cache directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">(</span>
        <span class="n">models</span><span class="o">=</span><span class="n">models</span><span class="p">,</span>
        <span class="n">require_model_meta</span><span class="o">=</span><span class="n">require_model_meta</span><span class="p">,</span>
        <span class="n">include_remote</span><span class="o">=</span><span class="n">include_remote</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">stem</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">cache_paths</span><span class="p">]</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tasks</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.cache.ResultCache.get_task_result_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_task_result_path</span><span class="p">(</span><span class="n">task_name</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_revision</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">remote</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">experiment_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#mteb.cache.ResultCache.get_task_result_path" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the path to the results of a specific task for a specific model and revision.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>task_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_name</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.models.model_meta.ModelMeta&lt;/code&gt; (&lt;code&gt;mteb.models.ModelMeta&lt;/code&gt;)" href="../model/#mteb.models.model_meta.ModelMeta">ModelMeta</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the model as a valid directory name or a ModelMeta object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_revision</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The revision of the model. Must be specified if model_name is a string.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>remote</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, it will return the path to the remote results repository, otherwise it will return the path to the local results repository.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>experiment_name</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the experiment as a valid directory name. If model_name is a ModelMeta object, its experiment_name will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the results of the task.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_task_result_path</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">task_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">ModelMeta</span><span class="p">,</span>
    <span class="n">model_revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">experiment_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the path to the results of a specific task for a specific model and revision.</span>

<span class="sd">    Args:</span>
<span class="sd">        task_name: The name of the task.</span>
<span class="sd">        model_name: The name of the model as a valid directory name or a ModelMeta object.</span>
<span class="sd">        model_revision: The revision of the model. Must be specified if model_name is a string.</span>
<span class="sd">        remote: If True, it will return the path to the remote results repository, otherwise it will return the path to the local results repository.</span>
<span class="sd">        experiment_name: The name of the experiment as a valid directory name. If model_name is a ModelMeta object, its experiment_name will be used.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The path to the results of the task.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">results_folder</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;results&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">remote</span>
        <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="s2">&quot;remote&quot;</span> <span class="o">/</span> <span class="s2">&quot;results&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">ModelMeta</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">model_revision</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;model_revision and experiment_name is ignored when model_name is a ModelMeta object&quot;</span>
            <span class="p">)</span>
        <span class="n">model_revision</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">revision</span>
        <span class="n">experiment_name</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">experiment_name</span>
        <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">model_name_as_path</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="s2">&quot;__&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>

    <span class="n">model_path</span> <span class="o">=</span> <span class="n">results_folder</span> <span class="o">/</span> <span class="n">model_name</span>

    <span class="k">if</span> <span class="n">model_revision</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;`model_revision` is not specified, attempting to load the latest revision. To disable this behavior, specify the &#39;model_revision` explicitly.&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="c1"># get revs from paths</span>
        <span class="n">revisions</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">model_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">is_dir</span><span class="p">()]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">revisions</span><span class="p">:</span>
            <span class="n">model_revision</span> <span class="o">=</span> <span class="s2">&quot;no_revision_available&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">revisions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Multiple revisions found for model </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">revisions</span><span class="si">}</span><span class="s2">. Using the latest one (according to latest edit).&quot;</span>
                <span class="p">)</span>
                <span class="c1"># sort folder by latest edit time</span>
                <span class="n">revisions</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mtime</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">model_revision</span> <span class="o">=</span> <span class="n">revisions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>

    <span class="k">if</span> <span class="n">experiment_name</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">model_path</span>
            <span class="o">/</span> <span class="n">model_revision</span>
            <span class="o">/</span> <span class="n">_EXPERIMENTS_FOLDER_NAME</span>
            <span class="o">/</span> <span class="n">experiment_name</span>
            <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2">.json&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">model_path</span> <span class="o">/</span> <span class="n">model_revision</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2">.json&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.cache.ResultCache.load_results" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_results</span><span class="p">(</span><span class="n">models</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tasks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">require_model_meta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">include_remote</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">validate_and_filter</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">only_main_score</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">load_experiments</span><span class="o">=</span><span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">MATCH_KWARGS</span><span class="p">,</span> <span class="n">experiment_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#mteb.cache.ResultCache.load_results" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Loads the results from the cache directory and returns a BenchmarkResults object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>models</code>
            </td>
            <td>
                  <code><span title="collections.abc.Sequence">Sequence</span>[<span title="str">str</span>] | <span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.models.model_meta.ModelMeta&lt;/code&gt; (&lt;code&gt;mteb.models.ModelMeta&lt;/code&gt;)" href="../model/#mteb.models.model_meta.ModelMeta">ModelMeta</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of model names to load the results for. If None it will load the results for all models.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tasks</code>
            </td>
            <td>
                  <code><span title="collections.abc.Sequence">Sequence</span>[<span title="str">str</span>] | <span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.AbsTask&lt;/code&gt; (&lt;code&gt;mteb.abstasks.AbsTask&lt;/code&gt;)" href="../task/#mteb.AbsTask">AbsTask</a>] | <a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.Benchmark&lt;/code&gt;


  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-dataclass&quot;&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.benchmarks.benchmark.Benchmark&lt;/code&gt;)" href="../benchmark/#mteb.Benchmark">Benchmark</a> | <span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of task names to load the results for. If str is passed, then benchmark will be loaded.
If Benchmark is passed, then all tasks in the benchmark will be loaded.
If None it will load the results for all tasks.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>require_model_meta</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will ignore results that do not have a model_meta.json file. If false it attempt to
extract the model name and revision from the path.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_remote</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, it will include results from the remote repository.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>validate_and_filter</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True it will validate that the results object for the task contains the correct splits and filter out
splits from the results object that are not default in the task metadata.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>only_main_score</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, only the main score will be loaded.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>load_experiments</code>
            </td>
            <td>
                  <code><span title="mteb.cache.LoadExperimentEnum">LoadExperimentEnum</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, it will also load results from experiment folders.</p>
              </div>
            </td>
            <td>
                  <code><span title="mteb.cache.LoadExperimentEnum.MATCH_KWARGS">MATCH_KWARGS</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>experiment_kwargs</code>
            </td>
            <td>
                  <code><span title="collections.abc.Mapping">Mapping</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | <span title="list">list</span>[<span title="collections.abc.Mapping">Mapping</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If specified, it will only load results from experiments with the specified kwargs. Only used if load_experiments is True.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.BenchmarkResults&lt;/code&gt;" href="#mteb.results.BenchmarkResults">BenchmarkResults</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A BenchmarkResults object containing the results for the specified models and tasks.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">mteb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">mteb</span><span class="o">.</span><span class="n">ResultCache</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load results for specific models and tasks</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">load_results</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">models</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;sentence-transformers/all-MiniLM-L6-v2&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">tasks</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;STS12&quot;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">require_model_meta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_results</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">models</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">ModelMeta</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">]</span> <span class="o">|</span> <span class="n">Benchmark</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">require_model_meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">include_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">validate_and_filter</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">only_main_score</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">load_experiments</span><span class="p">:</span> <span class="n">LoadExperimentEnum</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">MATCH_KWARGS</span><span class="p">,</span>
    <span class="n">experiment_kwargs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads the results from the cache directory and returns a BenchmarkResults object.</span>

<span class="sd">    Args:</span>
<span class="sd">        models: A list of model names to load the results for. If None it will load the results for all models.</span>
<span class="sd">        tasks: A list of task names to load the results for. If str is passed, then benchmark will be loaded.</span>
<span class="sd">            If Benchmark is passed, then all tasks in the benchmark will be loaded.</span>
<span class="sd">            If None it will load the results for all tasks.</span>
<span class="sd">        require_model_meta: If True it will ignore results that do not have a model_meta.json file. If false it attempt to</span>
<span class="sd">            extract the model name and revision from the path.</span>
<span class="sd">        include_remote: If True, it will include results from the remote repository.</span>
<span class="sd">        validate_and_filter: If True it will validate that the results object for the task contains the correct splits and filter out</span>
<span class="sd">            splits from the results object that are not default in the task metadata.</span>
<span class="sd">        only_main_score: If True, only the main score will be loaded.</span>
<span class="sd">        load_experiments: If True, it will also load results from experiment folders.</span>
<span class="sd">        experiment_kwargs: If specified, it will only load results from experiments with the specified kwargs. Only used if load_experiments is True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A BenchmarkResults object containing the results for the specified models and tasks.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; import mteb</span>
<span class="sd">        &gt;&gt;&gt; cache = mteb.ResultCache()</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; # Load results for specific models and tasks</span>
<span class="sd">        &gt;&gt;&gt; results = cache.load_results(</span>
<span class="sd">        ...     models=[&quot;sentence-transformers/all-MiniLM-L6-v2&quot;],</span>
<span class="sd">        ...     tasks=[&quot;STS12&quot;],</span>
<span class="sd">        ...     require_model_meta=True,</span>
<span class="sd">        ... )</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">tasks</span> <span class="o">=</span> <span class="n">mteb</span><span class="o">.</span><span class="n">get_benchmark</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">load_experiments</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">load_experiments</span> <span class="o">=</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">load_experiments</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">load_experiments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">MATCH_KWARGS</span>
        <span class="ow">and</span> <span class="n">experiment_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;experiment_kwargs is specified but load_experiments is not set to MATCH_KWARGS.&quot;</span>
            <span class="s2">&quot;No results will be loaded.&quot;</span>
        <span class="p">)</span>

    <span class="n">models_as_model_meta</span> <span class="o">=</span> <span class="n">models</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
        <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">models</span><span class="p">)),</span> <span class="n">ModelMeta</span>
    <span class="p">)</span>

    <span class="n">paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cache_paths</span><span class="p">(</span>
        <span class="n">models</span><span class="o">=</span><span class="n">models</span><span class="p">,</span>
        <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">,</span>
        <span class="n">require_model_meta</span><span class="o">=</span><span class="n">require_model_meta</span><span class="p">,</span>
        <span class="n">include_remote</span><span class="o">=</span><span class="n">include_remote</span><span class="p">,</span>
        <span class="n">load_experiments</span><span class="o">=</span><span class="n">load_experiments</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">models_results</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="n">task_names</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AbsTask</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">tasks</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">AbsTask</span><span class="p">):</span>
                <span class="n">task_names</span><span class="p">[</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">task</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">task_names</span><span class="p">[</span><span class="n">task</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">experiment_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">experiment_kwargs</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="n">experiment_kwargs</span> <span class="o">=</span> <span class="p">[</span><span class="n">experiment_kwargs</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">experiment_kwargs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">experiment_names</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">_serialize_experiment_kwargs_to_name</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">experiment_kwargs</span>
        <span class="p">}</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
        <span class="n">task_result</span> <span class="o">=</span> <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">only_main_score</span><span class="p">:</span>
            <span class="n">task_result</span> <span class="o">=</span> <span class="n">task_result</span><span class="o">.</span><span class="n">only_main_score</span><span class="p">()</span>
        <span class="n">model_name</span><span class="p">,</span> <span class="n">revision</span><span class="p">,</span> <span class="n">experiment_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_name_and_revision_from_path</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">validate_and_filter</span><span class="p">:</span>
            <span class="n">task_instance</span> <span class="o">=</span> <span class="n">task_names</span><span class="p">[</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">task_result</span> <span class="o">=</span> <span class="n">task_result</span><span class="o">.</span><span class="n">validate_and_filter_scores</span><span class="p">(</span>
                    <span class="n">task</span><span class="o">=</span><span class="n">task_instance</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Validation failed for </span><span class="si">{</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="k">continue</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">experiment_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">experiment_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">experiment_names</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Skipping experiment </span><span class="si">{</span><span class="n">experiment_name</span><span class="si">}</span><span class="s2"> as it is not in the specified experiment names&quot;</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">load_experiments</span> <span class="ow">is</span> <span class="n">LoadExperimentEnum</span><span class="o">.</span><span class="n">MATCH_KWARGS</span>
            <span class="ow">and</span> <span class="ow">not</span> <span class="n">models_as_model_meta</span>  <span class="c1"># for models meta path are prefiltered</span>
            <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">experiment_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="n">experiment_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">):</span>
            <span class="k">continue</span>

        <span class="n">models_results</span><span class="p">[(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">revision</span><span class="p">,</span> <span class="n">experiment_name</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task_result</span><span class="p">)</span>

    <span class="c1"># create BenchmarkResults object</span>
    <span class="n">models_results_object</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ModelResult</span><span class="p">(</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">model_revision</span><span class="o">=</span><span class="n">revision</span><span class="p">,</span>
            <span class="n">task_results</span><span class="o">=</span><span class="n">task_results</span><span class="p">,</span>
            <span class="n">experiment_name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span>
            <span class="n">model_name</span><span class="p">,</span>
            <span class="n">revision</span><span class="p">,</span>
            <span class="n">experiment_name</span><span class="p">,</span>
        <span class="p">),</span> <span class="n">task_results</span> <span class="ow">in</span> <span class="n">models_results</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">BenchmarkResults</span><span class="p">(</span>
        <span class="n">model_results</span><span class="o">=</span><span class="n">models_results_object</span><span class="p">,</span>
        <span class="n">benchmark</span><span class="o">=</span><span class="n">tasks</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">Benchmark</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.cache.ResultCache.load_task_result" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">load_task_result</span><span class="p">(</span><span class="n">task_name</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_revision</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">raise_if_not_found</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">prioritize_remote</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">experiment_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#mteb.cache.ResultCache.load_task_result" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Load the results from the local cache directory.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>task_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_name</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.models.model_meta.ModelMeta&lt;/code&gt; (&lt;code&gt;mteb.models.ModelMeta&lt;/code&gt;)" href="../model/#mteb.models.model_meta.ModelMeta">ModelMeta</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the model as a valid directory name or a ModelMeta object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_revision</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The revision of the model. Must be specified if model_name is a string.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>raise_if_not_found</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, raise an error if the results are not found.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prioritize_remote</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, it will first try to load the results from the remote repository, if available.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>experiment_name</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional experiment folder name (a valid directory name). If None, the default is used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt;" href="#mteb.results.TaskResult">TaskResult</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The results of the task, or None if not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_task_result</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">task_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">ModelMeta</span><span class="p">,</span>
    <span class="n">model_revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">raise_if_not_found</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">prioritize_remote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">experiment_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load the results from the local cache directory.</span>

<span class="sd">    Args:</span>
<span class="sd">        task_name: The name of the task.</span>
<span class="sd">        model_name: The name of the model as a valid directory name or a ModelMeta object.</span>
<span class="sd">        model_revision: The revision of the model. Must be specified if model_name is a string.</span>
<span class="sd">        raise_if_not_found: If True, raise an error if the results are not found.</span>
<span class="sd">        prioritize_remote: If True, it will first try to load the results from the remote repository, if available.</span>
<span class="sd">        experiment_name: Optional experiment folder name (a valid directory name). If None, the default is used.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The results of the task, or None if not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_task_result_path</span><span class="p">(</span>
        <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
        <span class="n">model_revision</span><span class="o">=</span><span class="n">model_revision</span><span class="p">,</span>
        <span class="n">task_name</span><span class="o">=</span><span class="n">task_name</span><span class="p">,</span>
        <span class="n">experiment_name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_remote</span><span class="p">:</span>
        <span class="n">remote_result_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_task_result_path</span><span class="p">(</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">model_revision</span><span class="o">=</span><span class="n">model_revision</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">task_name</span><span class="p">,</span>
            <span class="n">remote</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">experiment_name</span><span class="o">=</span><span class="n">experiment_name</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">remote_result_path</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span> <span class="ow">and</span> <span class="n">prioritize_remote</span><span class="p">:</span>
            <span class="n">result_path</span> <span class="o">=</span> <span class="n">remote_result_path</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">result_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">result_path</span> <span class="o">=</span> <span class="n">remote_result_path</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">result_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Results for </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> not found in </span><span class="si">{</span><span class="n">result_path</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">raise_if_not_found</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_disk</span><span class="p">(</span><span class="n">result_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.cache.ResultCache.save_to_cache" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_to_cache</span><span class="p">(</span><span class="n">task_result</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_revision</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#mteb.cache.ResultCache.save_to_cache" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Save the task results to the local cache directory in the location {model_name}/{model_revision}/{task_name}.json.</p>
<p>Where model_name is a path-normalized model name.
In addition we also save a model_meta.json in the revision folder to preserve the model metadata.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>task_result</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt;" href="#mteb.results.TaskResult">TaskResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The results of the task.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_name</code>
            </td>
            <td>
                  <code><span title="str">str</span> | <a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.models.model_meta.ModelMeta&lt;/code&gt; (&lt;code&gt;mteb.models.ModelMeta&lt;/code&gt;)" href="../model/#mteb.models.model_meta.ModelMeta">ModelMeta</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the model as a valid directory name or a ModelMeta object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_revision</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The revision of the model. Must be specified if model_name is a string.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/cache.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_to_cache</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">task_result</span><span class="p">:</span> <span class="n">TaskResult</span><span class="p">,</span>
    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">ModelMeta</span><span class="p">,</span>
    <span class="n">model_revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save the task results to the local cache directory in the location {model_name}/{model_revision}/{task_name}.json.</span>

<span class="sd">    Where model_name is a path-normalized model name.</span>
<span class="sd">    In addition we also save a model_meta.json in the revision folder to preserve the model metadata.</span>

<span class="sd">    Args:</span>
<span class="sd">        task_result: The results of the task.</span>
<span class="sd">        model_name: The name of the model as a valid directory name or a ModelMeta object.</span>
<span class="sd">        model_revision: The revision of the model. Must be specified if model_name is a string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_task_result_path</span><span class="p">(</span>
        <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
        <span class="n">model_revision</span><span class="o">=</span><span class="n">model_revision</span><span class="p">,</span>
        <span class="n">task_name</span><span class="o">=</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">result_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">task_result</span><span class="o">.</span><span class="n">to_disk</span><span class="p">(</span><span class="n">result_path</span><span class="p">)</span>

    <span class="n">model_meta_path</span> <span class="o">=</span> <span class="n">result_path</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;model_meta.json&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">ModelMeta</span><span class="p">):</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="n">model_name</span>
        <span class="k">with</span> <span class="n">model_meta_path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">meta</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="result-objects">Result Objects<a class="headerlink" href="#result-objects" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h3 id="mteb.results.TaskResult" class="doc doc-heading">
            <code>mteb.results.TaskResult</code>


<a href="#mteb.results.TaskResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>A class to represent the MTEB result.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.TaskResult.task_name">task_name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the MTEB task.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.TaskResult.dataset_revision">dataset_revision</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The revision dataset for the task on HuggingFace dataset hub.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.TaskResult.mteb_version">mteb_version</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The version of the MTEB used to evaluate the model.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.TaskResult.scores">scores</span></code></td>
            <td>
                  <code><span title="dict">dict</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;SplitName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.SplitName&lt;/code&gt;)" href="../types/#mteb.types._result.SplitName">SplitName</a>, <span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;ScoresDict&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Mapping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Score&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.ScoresDict&lt;/code&gt;)" href="../types/#mteb.types._result.ScoresDict">ScoresDict</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scores of the model on the dataset. The scores is a dictionary with the following structure; dict[SplitName, list[Scores]].
Where Scores is a dictionary with the following structure; dict[str, Any]. Where the keys and values are scores. Split is the split of
the dataset.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.TaskResult.evaluation_time">evaluation_time</span></code></td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time taken to evaluate the model.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.TaskResult.kg_co2_emissions">kg_co2_emissions</span></code></td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The kg of CO2 emissions produced by the model during evaluation.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">scores</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;evaluation_time&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;train&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;en-de&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;main_score&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>        <span class="s2">&quot;en-fr&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s2">&quot;main_score&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_task</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># some MTEB task</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mteb_results</span> <span class="o">=</span> <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_task_results</span><span class="p">(</span><span class="n">sample_task</span><span class="p">,</span> <span class="n">scores</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mteb_results</span><span class="o">.</span><span class="n">get_score</span><span class="p">()</span>  <span class="c1"># get the main score for all languages</span>
<span class="go">0.55</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mteb_results</span><span class="o">.</span><span class="n">get_score</span><span class="p">(</span><span class="n">languages</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fra&quot;</span><span class="p">])</span>  <span class="c1"># get the main score for French</span>
<span class="go">0.6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mteb_results</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="go">{&#39;dataset_revision&#39;: &#39;1.0&#39;, &#39;task_name&#39;: &#39;sample_task&#39;, &#39;mteb_version&#39;: &#39;1.0.0&#39;, &#39;evaluation_time&#39;: 100, &#39;scores&#39;: {&#39;train&#39;:</span>
<span class="go">    [</span>
<span class="go">        {&#39;main_score&#39;: 0.5, &#39;hf_subset&#39;: &#39;en-de&#39;, &#39;languages&#39;: [&#39;eng-Latn&#39;, &#39;deu-Latn&#39;]},</span>
<span class="go">        {&#39;main_score&#39;: 0.6, &#39;hf_subset&#39;: &#39;en-fr&#39;, &#39;languages&#39;: [&#39;eng-Latn&#39;, &#39;fra-Latn&#39;]}</span>
<span class="go">    ]}</span>
<span class="go">}</span>
</code></pre></div>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>mteb/results/task_result.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TaskResult</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class to represent the MTEB result.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        task_name: The name of the MTEB task.</span>
<span class="sd">        dataset_revision: The revision dataset for the task on HuggingFace dataset hub.</span>
<span class="sd">        mteb_version: The version of the MTEB used to evaluate the model.</span>
<span class="sd">        scores: The scores of the model on the dataset. The scores is a dictionary with the following structure; dict[SplitName, list[Scores]].</span>
<span class="sd">            Where Scores is a dictionary with the following structure; dict[str, Any]. Where the keys and values are scores. Split is the split of</span>
<span class="sd">            the dataset.</span>
<span class="sd">        evaluation_time: The time taken to evaluate the model.</span>
<span class="sd">        kg_co2_emissions: The kg of CO2 emissions produced by the model during evaluation.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; scores = {</span>
<span class="sd">        ...     &quot;evaluation_time&quot;: 100,</span>
<span class="sd">        ...     &quot;train&quot;: {</span>
<span class="sd">        ...         &quot;en-de&quot;: {</span>
<span class="sd">        ...             &quot;main_score&quot;: 0.5,</span>
<span class="sd">        ...         },</span>
<span class="sd">        ...         &quot;en-fr&quot;: {</span>
<span class="sd">        ...             &quot;main_score&quot;: 0.6,</span>
<span class="sd">        ...         },</span>
<span class="sd">        ...     },</span>
<span class="sd">        ... }</span>
<span class="sd">        &gt;&gt;&gt; sample_task = ... # some MTEB task</span>
<span class="sd">        &gt;&gt;&gt; mteb_results = TaskResult.from_task_results(sample_task, scores)</span>
<span class="sd">        &gt;&gt;&gt; mteb_results.get_score()  # get the main score for all languages</span>
<span class="sd">        0.55</span>
<span class="sd">        &gt;&gt;&gt; mteb_results.get_score(languages=[&quot;fra&quot;])  # get the main score for French</span>
<span class="sd">        0.6</span>
<span class="sd">        &gt;&gt;&gt; mteb_results.to_dict()</span>
<span class="sd">        {&#39;dataset_revision&#39;: &#39;1.0&#39;, &#39;task_name&#39;: &#39;sample_task&#39;, &#39;mteb_version&#39;: &#39;1.0.0&#39;, &#39;evaluation_time&#39;: 100, &#39;scores&#39;: {&#39;train&#39;:</span>
<span class="sd">            [</span>
<span class="sd">                {&#39;main_score&#39;: 0.5, &#39;hf_subset&#39;: &#39;en-de&#39;, &#39;languages&#39;: [&#39;eng-Latn&#39;, &#39;deu-Latn&#39;]},</span>
<span class="sd">                {&#39;main_score&#39;: 0.6, &#39;hf_subset&#39;: &#39;en-fr&#39;, &#39;languages&#39;: [&#39;eng-Latn&#39;, &#39;fra-Latn&#39;]}</span>
<span class="sd">            ]}</span>
<span class="sd">        }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dataset_revision</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">task_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">mteb_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
    <span class="n">scores</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">SplitName</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">ScoresDict</span><span class="p">]]</span>
    <span class="n">evaluation_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span>
    <span class="n">kg_co2_emissions</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_task_results</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">task</span><span class="p">:</span> <span class="n">AbsTask</span> <span class="o">|</span> <span class="nb">type</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">],</span>
        <span class="n">scores</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">SplitName</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">HFSubset</span><span class="p">,</span> <span class="n">ScoresDict</span><span class="p">]],</span>
        <span class="n">evaluation_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">kg_co2_emissions</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a TaskResult from the task and scores.</span>

<span class="sd">        Args:</span>
<span class="sd">            task: The task to create the TaskResult from.</span>
<span class="sd">            scores: The scores of the model on the dataset. The scores is a dictionary with the following structure; dict[SplitName, dict[HFSubset, Scores]].</span>
<span class="sd">                Where Scores is a dictionary with the following structure; dict[str, Any]. Where the keys and values are scores. Split is the split of</span>
<span class="sd">                the dataset.</span>
<span class="sd">            evaluation_time: The time taken to evaluate the model.</span>
<span class="sd">            kg_co2_emissions: The kg of CO2 emissions produced by the model during evaluation.</span>
<span class="sd">            date: The date the model was trained on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">task_meta</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">metadata</span>
        <span class="n">subset2langscripts</span> <span class="o">=</span> <span class="n">task_meta</span><span class="o">.</span><span class="n">hf_subsets_to_langscripts</span>
        <span class="n">flat_scores</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">hf_subset_scores</span> <span class="ow">in</span> <span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">hf_subset</span><span class="p">,</span> <span class="n">hf_scores</span> <span class="ow">in</span> <span class="n">hf_subset_scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">eval_langs</span> <span class="o">=</span> <span class="n">subset2langscripts</span><span class="p">[</span><span class="n">hf_subset</span><span class="p">]</span>
                <span class="n">_scores</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="o">**</span><span class="n">hf_scores</span><span class="p">,</span>
                    <span class="s2">&quot;hf_subset&quot;</span><span class="p">:</span> <span class="n">hf_subset</span><span class="p">,</span>
                    <span class="s2">&quot;languages&quot;</span><span class="p">:</span> <span class="n">eval_langs</span><span class="p">,</span>
                <span class="p">}</span>
                <span class="n">flat_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_scores</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">TaskResult</span><span class="p">(</span>
            <span class="n">dataset_revision</span><span class="o">=</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">revision</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">mteb_version</span><span class="o">=</span><span class="n">version</span><span class="p">(</span><span class="s2">&quot;mteb&quot;</span><span class="p">),</span>
            <span class="n">scores</span><span class="o">=</span><span class="n">flat_scores</span><span class="p">,</span>
            <span class="n">evaluation_time</span><span class="o">=</span><span class="n">evaluation_time</span><span class="p">,</span>
            <span class="n">kg_co2_emissions</span><span class="o">=</span><span class="n">kg_co2_emissions</span><span class="p">,</span>
            <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;scores&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_scores</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">SplitName</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">ScoresDict</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="n">SplitName</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">ScoresDict</span><span class="p">]]:</span>
        <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">hf_subset_scores</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">hf_subset_score</span> <span class="ow">in</span> <span class="n">hf_subset_scores</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hf_subset_score</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Scores should be a dictionary&quot;</span><span class="p">)</span>
                <span class="bp">cls</span><span class="o">.</span><span class="n">_validate_scores_dict</span><span class="p">(</span><span class="n">hf_subset_score</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_scores_dict</span><span class="p">(</span><span class="n">scores</span><span class="p">:</span> <span class="n">ScoresDict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;main_score&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;main_score&#39; should be in scores&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;hf_subset&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">scores</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;hf_subset should be in scores and should be a string&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;languages&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">scores</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="s2">&quot;languages&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;languages should be in scores and should be a list&quot;</span><span class="p">)</span>

        <span class="c1"># check that it is json serializable</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Scores are not json serializable: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">languages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the languages present in the scores.&quot;&quot;&quot;</span>
        <span class="n">langs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">split_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">split_res</span><span class="p">:</span>
                <span class="n">langs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">lang</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;languages&quot;</span><span class="p">]])</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">langs</span><span class="p">))</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">task</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AbsTask</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the task associated with the result.&quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">mteb.get_tasks</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_task</span>

        <span class="k">return</span> <span class="n">get_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">task_name</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">domains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TaskDomain</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the domains of the task.&quot;&quot;&quot;</span>
        <span class="n">doms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">domains</span>
        <span class="k">if</span> <span class="n">doms</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">doms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">doms</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">task_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the type of the task.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">type</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_public</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the task is public.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">is_public</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">hf_subsets</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the hf_subsets present in the scores.&quot;&quot;&quot;</span>
        <span class="n">hf_subsets</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">split_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">split_res</span><span class="p">:</span>
                <span class="n">hf_subsets</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">hf_subsets</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">eval_splits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the eval splits present in the scores.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert the TaskResult to a dictionary.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The TaskResult as a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a TaskResult from a dictionary.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The dictionary to create the TaskResult from.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The created TaskResult object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_round_scores</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scores</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">SplitName</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">ScoresDict</span><span class="p">]],</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Recursively round scores to n decimal places&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_round_scores</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_round_scores</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                        <span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>  <span class="c1"># type: ignore[call-overload]</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                <span class="n">scores</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_disk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save TaskResult to disk.</span>

<span class="sd">        Args:</span>
<span class="sd">            path: The path to the file to save.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">json_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
        <span class="n">json_obj</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_round_scores</span><span class="p">(</span><span class="n">json_obj</span><span class="p">[</span><span class="s2">&quot;scores&quot;</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">json_obj</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_disk</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">load_historic_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load TaskResult from disk.</span>

<span class="sd">        Args:</span>
<span class="sd">            path: The path to the file to load.</span>
<span class="sd">            load_historic_data: Whether to attempt to load historic data from before v1.11.0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The loaded TaskResult object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json_str</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">load_historic_data</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Error loading TaskResult from disk. You can try to load historic data by setting `load_historic_data=True`. Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
        <span class="n">pre_1_11_load</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span>
                <span class="s2">&quot;mteb_version&quot;</span> <span class="ow">in</span> <span class="n">data</span>
                <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="n">Version</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">Version</span><span class="p">(</span><span class="s2">&quot;1.11.0&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="ow">or</span> <span class="s2">&quot;mteb_version&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span>
        <span class="p">)</span>  <span class="c1"># assume it is before 1.11.0 if the version is not present</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span><span class="p">:</span> <span class="n">TaskResult</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pre_1_11_load</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">e</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Could not load TaskResult from disk, got error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Attempting to load from disk using format from before v1.11.0&quot;</span>
            <span class="p">)</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_convert_from_before_v1_11_0</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">pre_v_12_48</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;mteb_version&quot;</span> <span class="ow">in</span> <span class="n">data</span>
            <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">Version</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">Version</span><span class="p">(</span><span class="s2">&quot;1.12.48&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">pre_v_12_48</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_fix_pair_classification_scores</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">obj</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_fix_pair_classification_scores</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">TaskResult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">mteb</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_task</span>

        <span class="n">task_name</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">task_name</span>
        <span class="n">task</span><span class="p">:</span> <span class="n">AbsTask</span> <span class="o">|</span> <span class="nb">type</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">task_name</span> <span class="ow">in</span> <span class="n">outdated_tasks</span><span class="p">:</span>
            <span class="n">task</span> <span class="o">=</span> <span class="n">outdated_tasks</span><span class="p">[</span><span class="n">task_name</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">task</span> <span class="o">=</span> <span class="n">get_task</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">task_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;PairClassification&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">split_scores</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">hf_subset_scores</span> <span class="ow">in</span> <span class="n">split_scores</span><span class="p">:</span>
                    <span class="c1"># concatenate score e.g. [&quot;max&quot;][&quot;ap&quot;] -&gt; [&quot;max_ap&quot;]</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">hf_subset_scores</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hf_subset_scores</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">hf_subset_scores</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                                <span class="n">hf_subset_scores</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>  <span class="c1"># type: ignore[index]</span>
                            <span class="n">hf_subset_scores</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>  <span class="c1"># type: ignore[attr-defined]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_convert_from_before_v1_11_0</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">mteb.get_tasks</span><span class="w"> </span><span class="kn">import</span> <span class="n">_TASKS_REGISTRY</span>

        <span class="c1"># in case the task name is not found in the registry, try to find a lower case version</span>
        <span class="n">lower_case_registry</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">_TASKS_REGISTRY</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

        <span class="n">scores</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">data</span><span class="p">}</span>

        <span class="n">dataset_revision</span> <span class="o">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span>
            <span class="s2">&quot;dataset_revision&quot;</span><span class="p">,</span> <span class="s2">&quot;dataset revision not available&quot;</span>
        <span class="p">)</span>
        <span class="n">task_name</span> <span class="o">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;mteb_dataset_name&quot;</span><span class="p">)</span>
        <span class="n">mteb_version</span> <span class="o">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">,</span> <span class="s2">&quot;mteb version not available&quot;</span><span class="p">)</span>

        <span class="c1"># calculate evaluation time across all splits (move to top level)</span>
        <span class="n">evaluation_time</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">split_score</span> <span class="ow">in</span> <span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s2">&quot;evaluation_time&quot;</span> <span class="ow">in</span> <span class="n">split_score</span><span class="p">:</span>
                <span class="n">evaluation_time</span> <span class="o">+=</span> <span class="n">split_score</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;evaluation_time&quot;</span><span class="p">)</span>

        <span class="c1"># normalize the scores to always be {split: {hf_subset: scores}}</span>
        <span class="n">contains_hf_subset</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span>
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">hf_subset_scores</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">split_scores</span> <span class="ow">in</span> <span class="n">scores</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">hf_subset_scores</span> <span class="ow">in</span> <span class="n">split_scores</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">k</span>
            <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;v_measures&quot;</span><span class="p">,</span> <span class="s2">&quot;cos_sim&quot;</span><span class="p">,</span> <span class="s2">&quot;euclidean&quot;</span><span class="p">,</span> <span class="s2">&quot;manhattan&quot;</span><span class="p">,</span> <span class="s2">&quot;dot&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">contains_hf_subset</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">split_score</span> <span class="ow">in</span> <span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="n">split_score</span><span class="o">.</span><span class="n">copy</span><span class="p">()}</span>

        <span class="k">if</span> <span class="n">task_name</span> <span class="ow">in</span> <span class="n">outdated_tasks</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Loading </span><span class="si">{</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> as a dummy task as it no longer exists within MTEB. To avoid this set `load_historic_data=False`&quot;</span>
            <span class="p">)</span>
            <span class="n">task</span> <span class="o">=</span> <span class="n">outdated_tasks</span><span class="p">[</span><span class="n">task_name</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">task_name</span> <span class="ow">in</span> <span class="n">renamed_tasks</span><span class="p">:</span>
                <span class="n">task_name</span> <span class="o">=</span> <span class="n">renamed_tasks</span><span class="p">[</span><span class="n">task_name</span><span class="p">]</span>
            <span class="n">task</span> <span class="o">=</span> <span class="n">_TASKS_REGISTRY</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">task_name</span><span class="p">,</span> <span class="n">lower_case_registry</span><span class="p">[</span><span class="n">task_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
            <span class="p">)</span>

        <span class="c1"># make sure that main score exists</span>
        <span class="n">main_score</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">main_score</span>
        <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">split_score</span> <span class="ow">in</span> <span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">hf_subset</span><span class="p">,</span> <span class="n">hf_subset_scores</span> <span class="ow">in</span> <span class="n">split_score</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">prev_name</span> <span class="ow">in</span> <span class="p">[</span>
                    <span class="p">(</span><span class="n">ScoringFunction</span><span class="o">.</span><span class="n">COSINE</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;cos_sim&quot;</span><span class="p">),</span>
                    <span class="p">(</span><span class="n">ScoringFunction</span><span class="o">.</span><span class="n">MANHATTAN</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;manhattan&quot;</span><span class="p">),</span>
                    <span class="p">(</span><span class="n">ScoringFunction</span><span class="o">.</span><span class="n">EUCLIDEAN</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;euclidean&quot;</span><span class="p">),</span>
                    <span class="p">(</span><span class="n">ScoringFunction</span><span class="o">.</span><span class="n">DOT_PRODUCT</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;dot&quot;</span><span class="p">),</span>
                    <span class="p">(</span><span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">),</span>
                    <span class="p">(</span><span class="s2">&quot;similarity&quot;</span><span class="p">,</span> <span class="s2">&quot;similarity&quot;</span><span class="p">),</span>
                <span class="p">]:</span>
                    <span class="n">prev_name_scores</span> <span class="o">=</span> <span class="n">hf_subset_scores</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prev_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">prev_name_scores</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">prev_name_scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                            <span class="n">hf_subset_scores</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>

                <span class="k">if</span> <span class="s2">&quot;main_score&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">hf_subset_scores</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">main_score</span> <span class="ow">in</span> <span class="n">hf_subset_scores</span><span class="p">:</span>
                        <span class="n">hf_subset_scores</span><span class="p">[</span><span class="s2">&quot;main_score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hf_subset_scores</span><span class="p">[</span><span class="n">main_score</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Main score </span><span class="si">{</span><span class="n">main_score</span><span class="si">}</span><span class="s2"> not found in scores&quot;</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                        <span class="n">hf_subset_scores</span><span class="p">[</span><span class="s2">&quot;main_score&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># specific fixes:</span>
        <span class="k">if</span> <span class="n">task_name</span> <span class="o">==</span> <span class="s2">&quot;MLSUMClusteringP2P&quot;</span> <span class="ow">and</span> <span class="n">mteb_version</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="s2">&quot;1.1.2.dev0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;1.1.3.dev0&quot;</span><span class="p">,</span>
        <span class="p">]:</span>  <span class="c1"># back then it was only the french subsection which was implemented</span>
            <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">][</span><span class="s2">&quot;fr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">task_name</span> <span class="o">==</span> <span class="s2">&quot;MLSUMClusteringS2S&quot;</span> <span class="ow">and</span> <span class="n">mteb_version</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="s2">&quot;1.1.2.dev0&quot;</span><span class="p">,</span>
            <span class="s2">&quot;1.1.3.dev0&quot;</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">][</span><span class="s2">&quot;fr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">task_name</span> <span class="o">==</span> <span class="s2">&quot;XPQARetrieval&quot;</span><span class="p">:</span>  <span class="c1"># subset were renamed from &quot;fr&quot; to &quot;fra-fra&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;test&quot;</span> <span class="ow">in</span> <span class="n">scores</span> <span class="ow">and</span> <span class="s2">&quot;fr&quot;</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">]:</span>
                <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">][</span><span class="s2">&quot;fra-fra&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;fr&quot;</span><span class="p">)</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">TaskResult</span> <span class="o">=</span> <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_task_results</span><span class="p">(</span>
            <span class="n">task</span><span class="p">,</span>
            <span class="n">scores</span><span class="p">,</span>
            <span class="n">evaluation_time</span><span class="p">,</span>
            <span class="n">kg_co2_emissions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">dataset_revision</span> <span class="o">=</span> <span class="n">dataset_revision</span>
        <span class="n">result</span><span class="o">.</span><span class="n">mteb_version</span> <span class="o">=</span> <span class="n">mteb_version</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_score</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">splits</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SplitName</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguage</span> <span class="o">|</span> <span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scripts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">getter</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ScoresDict</span><span class="p">],</span> <span class="n">Score</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">scores</span><span class="p">:</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;main_score&quot;</span><span class="p">],</span>
        <span class="n">aggregation</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a score for the specified splits, languages, scripts and aggregation function.</span>

<span class="sd">        Args:</span>
<span class="sd">            splits: The splits to consider.</span>
<span class="sd">            languages: The languages to consider. Can be ISO language codes or ISO language script codes.</span>
<span class="sd">            scripts: The scripts to consider.</span>
<span class="sd">            getter: A function that takes a scores dictionary and returns a score e.g. &quot;main_score&quot; or &quot;evaluation_time&quot;.</span>
<span class="sd">            aggregation: The aggregation function to use.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The result of the aggregation function on the scores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">splits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">splits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="n">lang_scripts</span> <span class="o">=</span> <span class="n">LanguageScripts</span><span class="o">.</span><span class="n">from_languages_and_scripts</span><span class="p">(</span><span class="n">languages</span><span class="p">,</span> <span class="n">scripts</span><span class="p">)</span>

        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">split</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Split </span><span class="si">{</span><span class="n">split</span><span class="si">}</span><span class="s2"> not found in scores&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]:</span>
                <span class="n">eval_langs</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;languages&quot;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">eval_langs</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">lang_scripts</span><span class="o">.</span><span class="n">contains_language</span><span class="p">(</span><span class="n">lang</span><span class="p">):</span>
                        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">getter</span><span class="p">(</span><span class="n">scores</span><span class="p">))</span>
                        <span class="k">break</span>

        <span class="k">return</span> <span class="n">aggregation</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_score_fast</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">splits</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguage</span> <span class="o">|</span> <span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">subsets</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sped up version of get_score that will be used if no aggregation, script or getter needs to be specified.</span>

<span class="sd">        Args:</span>
<span class="sd">            splits: The splits to consider.</span>
<span class="sd">            languages: The languages to consider. Can be ISO language codes or ISO language script codes.</span>
<span class="sd">            subsets: The hf_subsets to consider.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The mean main score for the specified splits, languages and subsets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">splits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">splits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">val_sum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">n_val</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">split</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Split missing from scores: </span><span class="si">{</span><span class="n">split</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]:</span>
                <span class="n">langs</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;languages&quot;</span><span class="p">]</span>
                <span class="n">hf_subset</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">]</span>
                <span class="n">main_score</span> <span class="o">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;main_score&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">main_score</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing main score for subset: </span><span class="si">{</span><span class="n">hf_subset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">subsets</span> <span class="ow">and</span> <span class="n">hf_subset</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">subsets</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">elif</span> <span class="n">subsets</span><span class="p">:</span>
                    <span class="n">val_sum</span> <span class="o">+=</span> <span class="n">main_score</span>
                    <span class="n">n_val</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="n">languages</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">val_sum</span> <span class="o">+=</span> <span class="n">main_score</span>
                    <span class="n">n_val</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">continue</span>
                <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">langs</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">lang</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
                        <span class="n">val_sum</span> <span class="o">+=</span> <span class="n">main_score</span>
                        <span class="n">n_val</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">val_sum</span><span class="si">=}</span><span class="s2">, </span><span class="si">{</span><span class="n">n_val</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="k">break</span>
        <span class="k">if</span> <span class="n">n_val</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No splits had scores for the specified languages.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val_sum</span> <span class="o">/</span> <span class="n">n_val</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_validated</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a TaskResult from validated data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The created TaskResult object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;TaskResult(task_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2">, scores=...)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">only_main_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a new TaskResult object with only the main score.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new TaskResult object with only the main score.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_scores</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>
            <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">subset_scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]:</span>
                <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;hf_subset&quot;</span><span class="p">:</span> <span class="n">subset_scores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">),</span>
                        <span class="s2">&quot;main_score&quot;</span><span class="p">:</span> <span class="n">subset_scores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;main_score&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
                        <span class="s2">&quot;languages&quot;</span><span class="p">:</span> <span class="n">subset_scores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;languages&quot;</span><span class="p">,</span> <span class="p">[]),</span>
                    <span class="p">}</span>
                <span class="p">)</span>
        <span class="n">new_res</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="s2">&quot;scores&quot;</span><span class="p">:</span> <span class="n">new_scores</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_validated</span><span class="p">(</span><span class="o">**</span><span class="n">new_res</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate_and_filter_scores</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">task</span><span class="p">:</span> <span class="n">AbsTask</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate and filter the scores against the task metadata.</span>

<span class="sd">        This ensures that the scores are correct for the given task, by removing any splits besides those specified in the task metadata.</span>
<span class="sd">        Additionally it also ensure that all of the splits required as well as the languages are present in the scores.</span>
<span class="sd">        Returns new TaskResult object.</span>

<span class="sd">        Args:</span>
<span class="sd">            task: The task to validate the scores against. E.g. if the task supplied is limited to certain splits and languages,</span>
<span class="sd">                the scores will be filtered to only include those splits and languages. If None it will attempt to get the task from the task_name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new TaskResult object with the validated and filtered scores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">mteb.get_tasks</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_task</span>

        <span class="k">if</span> <span class="n">task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">task</span> <span class="o">=</span> <span class="n">get_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">task_name</span><span class="p">)</span>

        <span class="n">splits</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">eval_splits</span>
        <span class="n">hf_subsets</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">hf_subsets</span><span class="p">)</span>  <span class="c1"># Convert to set once</span>

        <span class="n">new_scores</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">seen_splits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">split</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">seen_subsets</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">is_aggregate</span><span class="p">:</span>
                <span class="c1"># aggregate tasks only have the default subset, but in metadata can be multiple</span>
                <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">_scores</span>
                    <span class="k">for</span> <span class="n">_scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">_scores</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span>
                <span class="p">]</span>
                <span class="n">seen_subsets</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">_scores</span>
                    <span class="k">for</span> <span class="n">_scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">_scores</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">hf_subsets</span>
                <span class="p">]</span>
            <span class="k">for</span> <span class="n">_scores</span> <span class="ow">in</span> <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]:</span>
                <span class="n">seen_subsets</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_scores</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">seen_subsets</span> <span class="o">!=</span> <span class="n">hf_subsets</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
                <span class="n">task</span><span class="o">.</span><span class="n">is_aggregate</span> <span class="ow">and</span> <span class="s2">&quot;default&quot;</span> <span class="ow">in</span> <span class="n">seen_subsets</span>
            <span class="p">):</span>
                <span class="n">missing_subsets</span> <span class="o">=</span> <span class="n">hf_subsets</span> <span class="o">-</span> <span class="n">seen_subsets</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">missing_subsets</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">subset1</span><span class="p">,</span> <span class="n">subset2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">missing_subsets</span><span class="p">)[:</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">missing_subsets_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">{{</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">subset1</span><span class="si">}</span><span class="s2">&#39;, &#39;</span><span class="si">{</span><span class="n">subset2</span><span class="si">}</span><span class="s2">&#39;, ...</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">missing_subsets_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">missing_subsets</span><span class="p">)</span>

                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: Missing subsets </span><span class="si">{</span><span class="n">missing_subsets_str</span><span class="si">}</span><span class="s2"> for split </span><span class="si">{</span><span class="n">split</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">missing_subset</span> <span class="ow">in</span> <span class="n">missing_subsets</span><span class="p">:</span>
                    <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;hf_subset&quot;</span><span class="p">:</span> <span class="n">missing_subset</span><span class="p">,</span>
                            <span class="s2">&quot;main_score&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                            <span class="s2">&quot;languages&quot;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">hf_subsets_to_langscripts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                <span class="n">missing_subset</span><span class="p">,</span> <span class="p">[]</span>
                            <span class="p">),</span>
                        <span class="p">}</span>
                    <span class="p">)</span>
            <span class="n">seen_splits</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">seen_splits</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">(</span><span class="n">splits</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: Missing splits </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">seen_splits</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">missing_split</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">-</span> <span class="n">seen_splits</span><span class="p">:</span>
                <span class="n">new_scores</span><span class="p">[</span><span class="n">missing_split</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">missing_subset</span> <span class="ow">in</span> <span class="n">hf_subsets</span><span class="p">:</span>
                    <span class="n">new_scores</span><span class="p">[</span><span class="n">missing_split</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;hf_subset&quot;</span><span class="p">:</span> <span class="n">missing_subset</span><span class="p">,</span>
                            <span class="s2">&quot;main_score&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                            <span class="s2">&quot;languages&quot;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">hf_subsets_to_langscripts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                                <span class="n">missing_subset</span><span class="p">,</span> <span class="p">[]</span>
                            <span class="p">),</span>
                        <span class="p">}</span>
                    <span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;scores&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_scores</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_mergeable</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">result</span><span class="p">:</span> <span class="n">TaskResult</span> <span class="o">|</span> <span class="n">AbsTask</span><span class="p">,</span>
        <span class="n">criteria</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Criteria</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;mteb_version&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dataset_revision&quot;</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="n">raise_error</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if the TaskResult object can be merged with another TaskResult or Task.</span>

<span class="sd">        Args:</span>
<span class="sd">            result: The TaskResult or Task object to check against.</span>
<span class="sd">            criteria: Additional criteria to check for merging. Can be &quot;mteb_version&quot; or &quot;dataset_revision&quot;.</span>
<span class="sd">                It will always check that the task name match.</span>
<span class="sd">            raise_error: If True, raises an error if the objects cannot be merged. If False, returns False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the TaskResult object can be merged with the other object, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="p">[</span><span class="n">Criteria</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">TaskResult</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">task_name</span>
            <span class="n">revision</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">dataset_revision</span>
            <span class="n">mteb_version</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">mteb_version</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">AbsTask</span><span class="p">):</span>
            <span class="n">mteb_version</span> <span class="o">=</span> <span class="n">version</span><span class="p">(</span><span class="s2">&quot;mteb&quot;</span><span class="p">)</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span>
            <span class="n">revision</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">revision</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;result must be a TaskResult or AbsTask object&quot;</span>
            <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_name</span> <span class="o">!=</span> <span class="n">name</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cannot merge TaskResult objects as they are derived from different tasks (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">MTEB_VERSION</span> <span class="ow">in</span> <span class="n">criteria</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mteb_version</span> <span class="o">!=</span> <span class="n">mteb_version</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cannot merge TaskResult objects as they are derived from different MTEB versions (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mteb_version</span><span class="si">}</span><span class="s2"> (loaded) and </span><span class="si">{</span><span class="n">mteb_version</span><span class="si">}</span><span class="s2"> (current))&quot;</span>
            <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">DATASET_REVISION</span> <span class="ow">in</span> <span class="n">criteria</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_revision</span> <span class="o">!=</span> <span class="n">revision</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cannot merge TaskResult objects as they are derived from different dataset revisions (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset_revision</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">)&quot;</span>
            <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">new_results</span><span class="p">:</span> <span class="n">TaskResult</span><span class="p">,</span>
        <span class="n">criteria</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Criteria</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;mteb_version&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dataset_revision&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merges two TaskResult objects.</span>

<span class="sd">        Args:</span>
<span class="sd">            new_results: The new TaskResult object to merge with the current one.</span>
<span class="sd">            criteria: Additional criteria to check for merging. Can be &quot;mteb_version&quot; or &quot;dataset_revision&quot;.</span>
<span class="sd">                It will always check that the task name match.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new TaskResult object with the merged scores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_mergeable</span><span class="p">(</span><span class="n">new_results</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="n">criteria</span><span class="p">,</span> <span class="n">raise_error</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">merged_scores</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">scores</span> <span class="ow">in</span> <span class="n">new_results</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">merged_scores</span><span class="p">:</span>
                <span class="n">merged_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merge_split_scores</span><span class="p">(</span>
                    <span class="n">merged_scores</span><span class="p">[</span><span class="n">split</span><span class="p">],</span> <span class="n">scores</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">merged_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span>

        <span class="n">existing_kg_co2_emissions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">kg_co2_emissions</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kg_co2_emissions</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="p">)</span>
        <span class="n">new_kg_co2_emissions</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">new_results</span><span class="o">.</span><span class="n">kg_co2_emissions</span> <span class="k">if</span> <span class="n">new_results</span><span class="o">.</span><span class="n">kg_co2_emissions</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="p">)</span>
        <span class="n">merged_kg_co2_emissions</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">existing_kg_co2_emissions</span> <span class="ow">and</span> <span class="n">new_kg_co2_emissions</span><span class="p">:</span>
            <span class="n">merged_kg_co2_emissions</span> <span class="o">=</span> <span class="n">existing_kg_co2_emissions</span> <span class="o">+</span> <span class="n">new_kg_co2_emissions</span>

        <span class="n">merged_evaluation_time</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation_time</span> <span class="ow">and</span> <span class="n">new_results</span><span class="o">.</span><span class="n">evaluation_time</span><span class="p">:</span>
            <span class="n">merged_evaluation_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation_time</span> <span class="o">+</span> <span class="n">new_results</span><span class="o">.</span><span class="n">evaluation_time</span>
        <span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span>
        <span class="k">if</span> <span class="n">new_results</span><span class="o">.</span><span class="n">date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">date</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">new_results</span><span class="o">.</span><span class="n">date</span> <span class="o">&gt;</span> <span class="n">date</span><span class="p">):</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">new_results</span><span class="o">.</span><span class="n">date</span>
        <span class="n">merged_results</span> <span class="o">=</span> <span class="n">TaskResult</span><span class="p">(</span>
            <span class="n">dataset_revision</span><span class="o">=</span><span class="n">new_results</span><span class="o">.</span><span class="n">dataset_revision</span><span class="p">,</span>
            <span class="n">task_name</span><span class="o">=</span><span class="n">new_results</span><span class="o">.</span><span class="n">task_name</span><span class="p">,</span>
            <span class="n">mteb_version</span><span class="o">=</span><span class="n">new_results</span><span class="o">.</span><span class="n">mteb_version</span><span class="p">,</span>
            <span class="n">scores</span><span class="o">=</span><span class="n">merged_scores</span><span class="p">,</span>
            <span class="n">evaluation_time</span><span class="o">=</span><span class="n">merged_evaluation_time</span><span class="p">,</span>
            <span class="n">kg_co2_emissions</span><span class="o">=</span><span class="n">merged_kg_co2_emissions</span><span class="p">,</span>
            <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">merged_results</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_merge_split_scores</span><span class="p">(</span>
        <span class="n">existing_scores</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ScoresDict</span><span class="p">],</span> <span class="n">new_scores</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ScoresDict</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">ScoresDict</span><span class="p">]:</span>
        <span class="n">merged</span> <span class="o">=</span> <span class="p">{</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">]:</span> <span class="n">score</span> <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">existing_scores</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">new_scores</span><span class="p">:</span>
            <span class="n">merged</span><span class="p">[</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">score</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">merged</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_missing_evaluations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">AbsTask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks which splits and subsets are missing from the results.</span>

<span class="sd">        Args:</span>
<span class="sd">            task: The task to check against.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary with the splits as keys and a list of missing subsets as values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">missing_splits</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">splits</span> <span class="ow">in</span> <span class="n">task</span><span class="o">.</span><span class="n">eval_splits</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">splits</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>  <span class="c1"># split it fully missing</span>
                <span class="n">missing_splits</span><span class="p">[</span><span class="n">splits</span><span class="p">]</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">hf_subsets</span>
            <span class="k">if</span> <span class="n">splits</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>
                <span class="n">hf_subsets</span> <span class="o">=</span> <span class="p">{</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">splits</span><span class="p">]}</span>
                <span class="n">missing_subsets</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">hf_subsets</span><span class="p">)</span> <span class="o">-</span> <span class="n">hf_subsets</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">missing_subsets</span><span class="p">:</span>
                    <span class="n">missing_splits</span><span class="p">[</span><span class="n">splits</span><span class="p">]</span> <span class="o">=</span> <span class="n">missing_subsets</span>

        <span class="k">return</span> <span class="n">missing_splits</span>

    <span class="nd">@deprecated</span><span class="p">(</span>
        <span class="s2">&quot;HF deprecated `EvalResults` in favor of `Benchmarks` and it&#39;s results. &quot;</span>
        <span class="s2">&quot;To push new results use ModelMeta.push_eval_results().&quot;</span>
    <span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_hf_eval_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">EvalResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create HF evaluation results objects from TaskResult objects.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of EvalResult objects for each split and subset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">task_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span>
        <span class="n">task_type</span> <span class="o">=</span> <span class="n">task_metadata</span><span class="o">.</span><span class="n">_hf_task_type</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">subset_results</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">:</span>
                <span class="n">subset</span> <span class="o">=</span> <span class="n">subset_results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">EvalResult</span><span class="p">(</span>
                        <span class="n">task_type</span><span class="o">=</span><span class="n">task_type</span><span class="p">,</span>
                        <span class="n">task_name</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                        <span class="n">dataset_type</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">],</span>
                        <span class="n">dataset_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">subset</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
                        <span class="n">dataset_config</span><span class="o">=</span><span class="n">subset</span><span class="p">,</span>
                        <span class="n">dataset_split</span><span class="o">=</span><span class="n">split</span><span class="p">,</span>
                        <span class="n">dataset_revision</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">],</span>
                        <span class="n">metric_type</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">main_score</span><span class="p">,</span>
                        <span class="n">metric_name</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">main_score</span><span class="p">,</span>
                        <span class="n">metric_value</span><span class="o">=</span><span class="n">subset_results</span><span class="p">[</span><span class="s2">&quot;main_score&quot;</span><span class="p">],</span>
                        <span class="n">source_name</span><span class="o">=</span><span class="s2">&quot;MTEB&quot;</span><span class="p">,</span>
                        <span class="n">source_url</span><span class="o">=</span><span class="s2">&quot;https://github.com/embeddings-benchmark/mteb/&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_to_hf_benchmark_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HFEvalResults</span><span class="p">:</span>
        <span class="n">task_metadata</span> <span class="o">=</span> <span class="n">mteb</span><span class="o">.</span><span class="n">get_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">task_name</span><span class="p">)</span><span class="o">.</span><span class="n">metadata</span>
        <span class="n">dataset_id</span> <span class="o">=</span> <span class="n">task_metadata</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>
        <span class="n">dataset_revision</span> <span class="o">=</span> <span class="n">task_metadata</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span>
        <span class="n">eval_results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">evaluated_splits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">evaluated_subsets</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="n">notes</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Obtained using MTEB v</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mteb_version</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">HFEvalResultSource</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://github.com/embeddings-benchmark/mteb/&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">notes</span><span class="p">,</span>
            <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">split_results</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">subset_results</span> <span class="ow">in</span> <span class="n">split_results</span><span class="p">:</span>
                <span class="n">subset_name</span> <span class="o">=</span> <span class="n">subset_results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>
                <span class="n">task_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">subset_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">split</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">eval_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">HFEvalResult</span><span class="p">(</span>
                        <span class="n">dataset</span><span class="o">=</span><span class="n">HFEvalResultDataset</span><span class="p">(</span>
                            <span class="nb">id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
                            <span class="n">task_id</span><span class="o">=</span><span class="n">task_id</span><span class="p">,</span>
                            <span class="n">revision</span><span class="o">=</span><span class="n">dataset_revision</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="n">value</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="n">subset_results</span><span class="p">[</span><span class="s2">&quot;main_score&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                        <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
                        <span class="n">date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
                        <span class="n">notes</span><span class="o">=</span><span class="n">notes</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="n">evaluated_subsets</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">subset_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">evaluated_splits</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">eval_splits</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span>
            <span class="n">evaluated_subsets</span>
        <span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">hf_subsets</span><span class="p">):</span>
            <span class="c1"># overall score</span>
            <span class="n">eval_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">HFEvalResult</span><span class="p">(</span>
                    <span class="n">dataset</span><span class="o">=</span><span class="n">HFEvalResultDataset</span><span class="p">(</span>
                        <span class="nb">id</span><span class="o">=</span><span class="n">dataset_id</span><span class="p">,</span>
                        <span class="n">task_id</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">revision</span><span class="o">=</span><span class="n">dataset_revision</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">value</span><span class="o">=</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_score</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                    <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
                    <span class="n">date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
                    <span class="n">notes</span><span class="o">=</span><span class="n">notes</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">HFEvalResults</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">eval_results</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.TaskResult.domains" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">domains</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.TaskResult.domains" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the domains of the task.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.TaskResult.eval_splits" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eval_splits</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.TaskResult.eval_splits" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the eval splits present in the scores.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.TaskResult.hf_subsets" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">hf_subsets</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.TaskResult.hf_subsets" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the hf_subsets present in the scores.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.TaskResult.is_public" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_public</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.TaskResult.is_public" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Check if the task is public.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.TaskResult.languages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">languages</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.TaskResult.languages" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the languages present in the scores.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.TaskResult.task" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">task</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.TaskResult.task" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the task associated with the result.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.TaskResult.task_type" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">task_type</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.TaskResult.task_type" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get the type of the task.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mteb.results.TaskResult.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a TaskResult from a dictionary.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dictionary to create the TaskResult from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing_extensions.Self">Self</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created TaskResult object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a TaskResult from a dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: The dictionary to create the TaskResult from.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created TaskResult object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.from_disk" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_disk</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">load_historic_data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mteb.results.TaskResult.from_disk" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Load TaskResult from disk.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the file to load.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>load_historic_data</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to attempt to load historic data from before v1.11.0.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt; (&lt;code&gt;mteb.results.task_result.TaskResult&lt;/code&gt;)" href="#mteb.results.TaskResult">TaskResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The loaded TaskResult object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_disk</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">load_historic_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load TaskResult from disk.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: The path to the file to load.</span>
<span class="sd">        load_historic_data: Whether to attempt to load historic data from before v1.11.0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The loaded TaskResult object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">json_str</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">load_historic_data</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error loading TaskResult from disk. You can try to load historic data by setting `load_historic_data=True`. Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
    <span class="n">pre_1_11_load</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="s2">&quot;mteb_version&quot;</span> <span class="ow">in</span> <span class="n">data</span>
            <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="n">Version</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">Version</span><span class="p">(</span><span class="s2">&quot;1.11.0&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="ow">or</span> <span class="s2">&quot;mteb_version&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span>
    <span class="p">)</span>  <span class="c1"># assume it is before 1.11.0 if the version is not present</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span><span class="p">:</span> <span class="n">TaskResult</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pre_1_11_load</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Could not load TaskResult from disk, got error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Attempting to load from disk using format from before v1.11.0&quot;</span>
        <span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_convert_from_before_v1_11_0</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">pre_v_12_48</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;mteb_version&quot;</span> <span class="ow">in</span> <span class="n">data</span>
        <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="ow">and</span> <span class="n">Version</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">Version</span><span class="p">(</span><span class="s2">&quot;1.12.48&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">pre_v_12_48</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_fix_pair_classification_scores</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.from_task_results" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_task_results</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">scores</span><span class="p">,</span> <span class="n">evaluation_time</span><span class="p">,</span> <span class="n">kg_co2_emissions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mteb.results.TaskResult.from_task_results" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a TaskResult from the task and scores.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>task</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.AbsTask&lt;/code&gt; (&lt;code&gt;mteb.abstasks.abstask.AbsTask&lt;/code&gt;)" href="../task/#mteb.AbsTask">AbsTask</a> | <span title="type">type</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.AbsTask&lt;/code&gt; (&lt;code&gt;mteb.abstasks.abstask.AbsTask&lt;/code&gt;)" href="../task/#mteb.AbsTask">AbsTask</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The task to create the TaskResult from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>scores</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;SplitName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.SplitName&lt;/code&gt;)" href="../types/#mteb.types._result.SplitName">SplitName</a>, <span title="collections.abc.Mapping">Mapping</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;HFSubset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.HFSubset&lt;/code&gt;)" href="../types/#mteb.types._result.HFSubset">HFSubset</a>, <a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;ScoresDict&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Mapping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Score&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.ScoresDict&lt;/code&gt;)" href="../types/#mteb.types._result.ScoresDict">ScoresDict</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scores of the model on the dataset. The scores is a dictionary with the following structure; dict[SplitName, dict[HFSubset, Scores]].
Where Scores is a dictionary with the following structure; dict[str, Any]. Where the keys and values are scores. Split is the split of
the dataset.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>evaluation_time</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time taken to evaluate the model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>kg_co2_emissions</code>
            </td>
            <td>
                  <code><span title="float">float</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The kg of CO2 emissions produced by the model during evaluation.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>date</code>
            </td>
            <td>
                  <code><span title="datetime.datetime">datetime</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The date the model was trained on.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_task_results</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">task</span><span class="p">:</span> <span class="n">AbsTask</span> <span class="o">|</span> <span class="nb">type</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">],</span>
    <span class="n">scores</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">SplitName</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">HFSubset</span><span class="p">,</span> <span class="n">ScoresDict</span><span class="p">]],</span>
    <span class="n">evaluation_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">kg_co2_emissions</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a TaskResult from the task and scores.</span>

<span class="sd">    Args:</span>
<span class="sd">        task: The task to create the TaskResult from.</span>
<span class="sd">        scores: The scores of the model on the dataset. The scores is a dictionary with the following structure; dict[SplitName, dict[HFSubset, Scores]].</span>
<span class="sd">            Where Scores is a dictionary with the following structure; dict[str, Any]. Where the keys and values are scores. Split is the split of</span>
<span class="sd">            the dataset.</span>
<span class="sd">        evaluation_time: The time taken to evaluate the model.</span>
<span class="sd">        kg_co2_emissions: The kg of CO2 emissions produced by the model during evaluation.</span>
<span class="sd">        date: The date the model was trained on.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">task_meta</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">metadata</span>
    <span class="n">subset2langscripts</span> <span class="o">=</span> <span class="n">task_meta</span><span class="o">.</span><span class="n">hf_subsets_to_langscripts</span>
    <span class="n">flat_scores</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">hf_subset_scores</span> <span class="ow">in</span> <span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">hf_subset</span><span class="p">,</span> <span class="n">hf_scores</span> <span class="ow">in</span> <span class="n">hf_subset_scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">eval_langs</span> <span class="o">=</span> <span class="n">subset2langscripts</span><span class="p">[</span><span class="n">hf_subset</span><span class="p">]</span>
            <span class="n">_scores</span> <span class="o">=</span> <span class="p">{</span>
                <span class="o">**</span><span class="n">hf_scores</span><span class="p">,</span>
                <span class="s2">&quot;hf_subset&quot;</span><span class="p">:</span> <span class="n">hf_subset</span><span class="p">,</span>
                <span class="s2">&quot;languages&quot;</span><span class="p">:</span> <span class="n">eval_langs</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="n">flat_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_scores</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">TaskResult</span><span class="p">(</span>
        <span class="n">dataset_revision</span><span class="o">=</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">revision</span><span class="p">,</span>
        <span class="n">task_name</span><span class="o">=</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">mteb_version</span><span class="o">=</span><span class="n">version</span><span class="p">(</span><span class="s2">&quot;mteb&quot;</span><span class="p">),</span>
        <span class="n">scores</span><span class="o">=</span><span class="n">flat_scores</span><span class="p">,</span>
        <span class="n">evaluation_time</span><span class="o">=</span><span class="n">evaluation_time</span><span class="p">,</span>
        <span class="n">kg_co2_emissions</span><span class="o">=</span><span class="n">kg_co2_emissions</span><span class="p">,</span>
        <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.from_validated" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_validated</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mteb.results.TaskResult.from_validated" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a TaskResult from validated data.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt; (&lt;code&gt;mteb.results.task_result.TaskResult&lt;/code&gt;)" href="#mteb.results.TaskResult">TaskResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The created TaskResult object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_validated</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a TaskResult from validated data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The created TaskResult object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.get_hf_eval_results" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_hf_eval_results</span><span class="p">()</span></code>

<a href="#mteb.results.TaskResult.get_hf_eval_results" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create HF evaluation results objects from TaskResult objects.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="huggingface_hub.EvalResult">EvalResult</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of EvalResult objects for each split and subset.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@deprecated</span><span class="p">(</span>
    <span class="s2">&quot;HF deprecated `EvalResults` in favor of `Benchmarks` and it&#39;s results. &quot;</span>
    <span class="s2">&quot;To push new results use ModelMeta.push_eval_results().&quot;</span>
<span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_hf_eval_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">EvalResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create HF evaluation results objects from TaskResult objects.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of EvalResult objects for each split and subset.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">task_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span>
    <span class="n">task_type</span> <span class="o">=</span> <span class="n">task_metadata</span><span class="o">.</span><span class="n">_hf_task_type</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">subset_results</span> <span class="ow">in</span> <span class="n">scores</span><span class="p">:</span>
            <span class="n">subset</span> <span class="o">=</span> <span class="n">subset_results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">EvalResult</span><span class="p">(</span>
                    <span class="n">task_type</span><span class="o">=</span><span class="n">task_type</span><span class="p">,</span>
                    <span class="n">task_name</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                    <span class="n">dataset_type</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">],</span>
                    <span class="n">dataset_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">subset</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
                    <span class="n">dataset_config</span><span class="o">=</span><span class="n">subset</span><span class="p">,</span>
                    <span class="n">dataset_split</span><span class="o">=</span><span class="n">split</span><span class="p">,</span>
                    <span class="n">dataset_revision</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">],</span>
                    <span class="n">metric_type</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">main_score</span><span class="p">,</span>
                    <span class="n">metric_name</span><span class="o">=</span><span class="n">task_metadata</span><span class="o">.</span><span class="n">main_score</span><span class="p">,</span>
                    <span class="n">metric_value</span><span class="o">=</span><span class="n">subset_results</span><span class="p">[</span><span class="s2">&quot;main_score&quot;</span><span class="p">],</span>
                    <span class="n">source_name</span><span class="o">=</span><span class="s2">&quot;MTEB&quot;</span><span class="p">,</span>
                    <span class="n">source_url</span><span class="o">=</span><span class="s2">&quot;https://github.com/embeddings-benchmark/mteb/&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.get_missing_evaluations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_missing_evaluations</span><span class="p">(</span><span class="n">task</span><span class="p">)</span></code>

<a href="#mteb.results.TaskResult.get_missing_evaluations" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Checks which splits and subsets are missing from the results.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>task</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.AbsTask&lt;/code&gt; (&lt;code&gt;mteb.abstasks.abstask.AbsTask&lt;/code&gt;)" href="../task/#mteb.AbsTask">AbsTask</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The task to check against.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="list">list</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with the splits as keys and a list of missing subsets as values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_missing_evaluations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">AbsTask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks which splits and subsets are missing from the results.</span>

<span class="sd">    Args:</span>
<span class="sd">        task: The task to check against.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary with the splits as keys and a list of missing subsets as values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">missing_splits</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">splits</span> <span class="ow">in</span> <span class="n">task</span><span class="o">.</span><span class="n">eval_splits</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">splits</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>  <span class="c1"># split it fully missing</span>
            <span class="n">missing_splits</span><span class="p">[</span><span class="n">splits</span><span class="p">]</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">hf_subsets</span>
        <span class="k">if</span> <span class="n">splits</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>
            <span class="n">hf_subsets</span> <span class="o">=</span> <span class="p">{</span><span class="n">score</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">splits</span><span class="p">]}</span>
            <span class="n">missing_subsets</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">hf_subsets</span><span class="p">)</span> <span class="o">-</span> <span class="n">hf_subsets</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">missing_subsets</span><span class="p">:</span>
                <span class="n">missing_splits</span><span class="p">[</span><span class="n">splits</span><span class="p">]</span> <span class="o">=</span> <span class="n">missing_subsets</span>

    <span class="k">return</span> <span class="n">missing_splits</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.get_score" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_score</span><span class="p">(</span><span class="n">splits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">languages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scripts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">getter</span><span class="o">=</span><span class="k">lambda</span> <span class="n">scores</span><span class="p">:</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;main_score&#39;</span><span class="p">],</span> <span class="n">aggregation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span></code>

<a href="#mteb.results.TaskResult.get_score" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get a score for the specified splits, languages, scripts and aggregation function.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>splits</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;SplitName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.SplitName&lt;/code&gt;)" href="../types/#mteb.types._result.SplitName">SplitName</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The splits to consider.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>languages</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;ISOLanguage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.ISOLanguage&lt;/code&gt;)" href="../types/#mteb.types._metadata.ISOLanguage">ISOLanguage</a> | <a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;ISOLanguageScript&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.ISOLanguageScript&lt;/code&gt;)" href="../types/#mteb.types._metadata.ISOLanguageScript">ISOLanguageScript</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The languages to consider. Can be ISO language codes or ISO language script codes.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>scripts</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;ISOLanguageScript&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.ISOLanguageScript&lt;/code&gt;)" href="../types/#mteb.types._metadata.ISOLanguageScript">ISOLanguageScript</a>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scripts to consider.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>getter</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;ScoresDict&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Mapping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Score&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.ScoresDict&lt;/code&gt;)" href="../types/#mteb.types._result.ScoresDict">ScoresDict</a>], <a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Score&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Any&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.Score&lt;/code&gt;)" href="../types/#mteb.types._result.Score">Score</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function that takes a scores dictionary and returns a score e.g. "main_score" or "evaluation_time".</p>
              </div>
            </td>
            <td>
                  <code>lambda scores: <span title="mteb.results.task_result.TaskResult.scores">scores</span>[&#39;main_score&#39;]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>aggregation</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Score&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Any&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.Score&lt;/code&gt;)" href="../types/#mteb.types._result.Score">Score</a>]], <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The aggregation function to use.</p>
              </div>
            </td>
            <td>
                  <code><span title="numpy.mean">mean</span></code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The result of the aggregation function on the scores.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_score</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">splits</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SplitName</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguage</span> <span class="o">|</span> <span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">scripts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">getter</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ScoresDict</span><span class="p">],</span> <span class="n">Score</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">scores</span><span class="p">:</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;main_score&quot;</span><span class="p">],</span>
    <span class="n">aggregation</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a score for the specified splits, languages, scripts and aggregation function.</span>

<span class="sd">    Args:</span>
<span class="sd">        splits: The splits to consider.</span>
<span class="sd">        languages: The languages to consider. Can be ISO language codes or ISO language script codes.</span>
<span class="sd">        scripts: The scripts to consider.</span>
<span class="sd">        getter: A function that takes a scores dictionary and returns a score e.g. &quot;main_score&quot; or &quot;evaluation_time&quot;.</span>
<span class="sd">        aggregation: The aggregation function to use.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The result of the aggregation function on the scores.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">splits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">splits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="n">lang_scripts</span> <span class="o">=</span> <span class="n">LanguageScripts</span><span class="o">.</span><span class="n">from_languages_and_scripts</span><span class="p">(</span><span class="n">languages</span><span class="p">,</span> <span class="n">scripts</span><span class="p">)</span>

    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">split</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Split </span><span class="si">{</span><span class="n">split</span><span class="si">}</span><span class="s2"> not found in scores&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]:</span>
            <span class="n">eval_langs</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;languages&quot;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">eval_langs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">lang_scripts</span><span class="o">.</span><span class="n">contains_language</span><span class="p">(</span><span class="n">lang</span><span class="p">):</span>
                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">getter</span><span class="p">(</span><span class="n">scores</span><span class="p">))</span>
                    <span class="k">break</span>

    <span class="k">return</span> <span class="n">aggregation</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.is_mergeable" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_mergeable</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mteb_version&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset_revision&#39;</span><span class="p">],</span> <span class="n">raise_error</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#mteb.results.TaskResult.is_mergeable" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Checks if the TaskResult object can be merged with another TaskResult or Task.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>result</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt; (&lt;code&gt;mteb.results.task_result.TaskResult&lt;/code&gt;)" href="#mteb.results.TaskResult">TaskResult</a> | <a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.AbsTask&lt;/code&gt; (&lt;code&gt;mteb.abstasks.abstask.AbsTask&lt;/code&gt;)" href="../task/#mteb.AbsTask">AbsTask</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The TaskResult or Task object to check against.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>criteria</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | <span title="list">list</span>[<span title="mteb.results.task_result.Criteria">Criteria</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional criteria to check for merging. Can be "mteb_version" or "dataset_revision".
It will always check that the task name match.</p>
              </div>
            </td>
            <td>
                  <code>[&#39;mteb_version&#39;, &#39;dataset_revision&#39;]</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>raise_error</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, raises an error if the objects cannot be merged. If False, returns False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the TaskResult object can be merged with the other object, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_mergeable</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">result</span><span class="p">:</span> <span class="n">TaskResult</span> <span class="o">|</span> <span class="n">AbsTask</span><span class="p">,</span>
    <span class="n">criteria</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Criteria</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;mteb_version&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset_revision&quot;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">raise_error</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if the TaskResult object can be merged with another TaskResult or Task.</span>

<span class="sd">    Args:</span>
<span class="sd">        result: The TaskResult or Task object to check against.</span>
<span class="sd">        criteria: Additional criteria to check for merging. Can be &quot;mteb_version&quot; or &quot;dataset_revision&quot;.</span>
<span class="sd">            It will always check that the task name match.</span>
<span class="sd">        raise_error: If True, raises an error if the objects cannot be merged. If False, returns False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the TaskResult object can be merged with the other object, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">criteria</span> <span class="o">=</span> <span class="p">[</span><span class="n">Criteria</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">TaskResult</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">task_name</span>
        <span class="n">revision</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">dataset_revision</span>
        <span class="n">mteb_version</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">mteb_version</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">AbsTask</span><span class="p">):</span>
        <span class="n">mteb_version</span> <span class="o">=</span> <span class="n">version</span><span class="p">(</span><span class="s2">&quot;mteb&quot;</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span>
        <span class="n">revision</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">revision</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;result must be a TaskResult or AbsTask object&quot;</span>
        <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_name</span> <span class="o">!=</span> <span class="n">name</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cannot merge TaskResult objects as they are derived from different tasks (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">MTEB_VERSION</span> <span class="ow">in</span> <span class="n">criteria</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mteb_version</span> <span class="o">!=</span> <span class="n">mteb_version</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cannot merge TaskResult objects as they are derived from different MTEB versions (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mteb_version</span><span class="si">}</span><span class="s2"> (loaded) and </span><span class="si">{</span><span class="n">mteb_version</span><span class="si">}</span><span class="s2"> (current))&quot;</span>
        <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">DATASET_REVISION</span> <span class="ow">in</span> <span class="n">criteria</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataset_revision</span> <span class="o">!=</span> <span class="n">revision</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Cannot merge TaskResult objects as they are derived from different dataset revisions (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dataset_revision</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">revision</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">if</span> <span class="n">raise_error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.merge" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">merge</span><span class="p">(</span><span class="n">new_results</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mteb_version&#39;</span><span class="p">,</span> <span class="s1">&#39;dataset_revision&#39;</span><span class="p">])</span></code>

<a href="#mteb.results.TaskResult.merge" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Merges two TaskResult objects.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>new_results</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt; (&lt;code&gt;mteb.results.task_result.TaskResult&lt;/code&gt;)" href="#mteb.results.TaskResult">TaskResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new TaskResult object to merge with the current one.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>criteria</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | <span title="list">list</span>[<span title="mteb.results.task_result.Criteria">Criteria</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional criteria to check for merging. Can be "mteb_version" or "dataset_revision".
It will always check that the task name match.</p>
              </div>
            </td>
            <td>
                  <code>[&#39;mteb_version&#39;, &#39;dataset_revision&#39;]</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt; (&lt;code&gt;mteb.results.task_result.TaskResult&lt;/code&gt;)" href="#mteb.results.TaskResult">TaskResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new TaskResult object with the merged scores.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">new_results</span><span class="p">:</span> <span class="n">TaskResult</span><span class="p">,</span>
    <span class="n">criteria</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Criteria</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;mteb_version&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dataset_revision&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Merges two TaskResult objects.</span>

<span class="sd">    Args:</span>
<span class="sd">        new_results: The new TaskResult object to merge with the current one.</span>
<span class="sd">        criteria: Additional criteria to check for merging. Can be &quot;mteb_version&quot; or &quot;dataset_revision&quot;.</span>
<span class="sd">            It will always check that the task name match.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new TaskResult object with the merged scores.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_mergeable</span><span class="p">(</span><span class="n">new_results</span><span class="p">,</span> <span class="n">criteria</span><span class="o">=</span><span class="n">criteria</span><span class="p">,</span> <span class="n">raise_error</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">merged_scores</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">scores</span> <span class="ow">in</span> <span class="n">new_results</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">split</span> <span class="ow">in</span> <span class="n">merged_scores</span><span class="p">:</span>
            <span class="n">merged_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_merge_split_scores</span><span class="p">(</span>
                <span class="n">merged_scores</span><span class="p">[</span><span class="n">split</span><span class="p">],</span> <span class="n">scores</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">merged_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span>

    <span class="n">existing_kg_co2_emissions</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kg_co2_emissions</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kg_co2_emissions</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="p">)</span>
    <span class="n">new_kg_co2_emissions</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">new_results</span><span class="o">.</span><span class="n">kg_co2_emissions</span> <span class="k">if</span> <span class="n">new_results</span><span class="o">.</span><span class="n">kg_co2_emissions</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="p">)</span>
    <span class="n">merged_kg_co2_emissions</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">existing_kg_co2_emissions</span> <span class="ow">and</span> <span class="n">new_kg_co2_emissions</span><span class="p">:</span>
        <span class="n">merged_kg_co2_emissions</span> <span class="o">=</span> <span class="n">existing_kg_co2_emissions</span> <span class="o">+</span> <span class="n">new_kg_co2_emissions</span>

    <span class="n">merged_evaluation_time</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation_time</span> <span class="ow">and</span> <span class="n">new_results</span><span class="o">.</span><span class="n">evaluation_time</span><span class="p">:</span>
        <span class="n">merged_evaluation_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation_time</span> <span class="o">+</span> <span class="n">new_results</span><span class="o">.</span><span class="n">evaluation_time</span>
    <span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span>
    <span class="k">if</span> <span class="n">new_results</span><span class="o">.</span><span class="n">date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">date</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">new_results</span><span class="o">.</span><span class="n">date</span> <span class="o">&gt;</span> <span class="n">date</span><span class="p">):</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">new_results</span><span class="o">.</span><span class="n">date</span>
    <span class="n">merged_results</span> <span class="o">=</span> <span class="n">TaskResult</span><span class="p">(</span>
        <span class="n">dataset_revision</span><span class="o">=</span><span class="n">new_results</span><span class="o">.</span><span class="n">dataset_revision</span><span class="p">,</span>
        <span class="n">task_name</span><span class="o">=</span><span class="n">new_results</span><span class="o">.</span><span class="n">task_name</span><span class="p">,</span>
        <span class="n">mteb_version</span><span class="o">=</span><span class="n">new_results</span><span class="o">.</span><span class="n">mteb_version</span><span class="p">,</span>
        <span class="n">scores</span><span class="o">=</span><span class="n">merged_scores</span><span class="p">,</span>
        <span class="n">evaluation_time</span><span class="o">=</span><span class="n">merged_evaluation_time</span><span class="p">,</span>
        <span class="n">kg_co2_emissions</span><span class="o">=</span><span class="n">merged_kg_co2_emissions</span><span class="p">,</span>
        <span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">merged_results</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.only_main_score" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">only_main_score</span><span class="p">()</span></code>

<a href="#mteb.results.TaskResult.only_main_score" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return a new TaskResult object with only the main score.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt; (&lt;code&gt;mteb.results.task_result.TaskResult&lt;/code&gt;)" href="#mteb.results.TaskResult">TaskResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new TaskResult object with only the main score.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">only_main_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a new TaskResult object with only the main score.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new TaskResult object with only the main score.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_scores</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>
        <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">subset_scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]:</span>
            <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;hf_subset&quot;</span><span class="p">:</span> <span class="n">subset_scores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">),</span>
                    <span class="s2">&quot;main_score&quot;</span><span class="p">:</span> <span class="n">subset_scores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;main_score&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span>
                    <span class="s2">&quot;languages&quot;</span><span class="p">:</span> <span class="n">subset_scores</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;languages&quot;</span><span class="p">,</span> <span class="p">[]),</span>
                <span class="p">}</span>
            <span class="p">)</span>
    <span class="n">new_res</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="s2">&quot;scores&quot;</span><span class="p">:</span> <span class="n">new_scores</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_validated</span><span class="p">(</span><span class="o">**</span><span class="n">new_res</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.to_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#mteb.results.TaskResult.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the TaskResult to a dictionary.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The TaskResult as a dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the TaskResult to a dictionary.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The TaskResult as a dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.to_disk" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

<a href="#mteb.results.TaskResult.to_disk" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Save TaskResult to disk.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the file to save.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_disk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save TaskResult to disk.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: The path to the file to save.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">json_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
    <span class="n">json_obj</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_round_scores</span><span class="p">(</span><span class="n">json_obj</span><span class="p">[</span><span class="s2">&quot;scores&quot;</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">json_obj</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.TaskResult.validate_and_filter_scores" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">validate_and_filter_scores</span><span class="p">(</span><span class="n">task</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#mteb.results.TaskResult.validate_and_filter_scores" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Validate and filter the scores against the task metadata.</p>
<p>This ensures that the scores are correct for the given task, by removing any splits besides those specified in the task metadata.
Additionally it also ensure that all of the splits required as well as the languages are present in the scores.
Returns new TaskResult object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>task</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.AbsTask&lt;/code&gt; (&lt;code&gt;mteb.abstasks.abstask.AbsTask&lt;/code&gt;)" href="../task/#mteb.AbsTask">AbsTask</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The task to validate the scores against. E.g. if the task supplied is limited to certain splits and languages,
the scores will be filtered to only include those splits and languages. If None it will attempt to get the task from the task_name.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt; (&lt;code&gt;mteb.results.task_result.TaskResult&lt;/code&gt;)" href="#mteb.results.TaskResult">TaskResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new TaskResult object with the validated and filtered scores.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/task_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_and_filter_scores</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">task</span><span class="p">:</span> <span class="n">AbsTask</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate and filter the scores against the task metadata.</span>

<span class="sd">    This ensures that the scores are correct for the given task, by removing any splits besides those specified in the task metadata.</span>
<span class="sd">    Additionally it also ensure that all of the splits required as well as the languages are present in the scores.</span>
<span class="sd">    Returns new TaskResult object.</span>

<span class="sd">    Args:</span>
<span class="sd">        task: The task to validate the scores against. E.g. if the task supplied is limited to certain splits and languages,</span>
<span class="sd">            the scores will be filtered to only include those splits and languages. If None it will attempt to get the task from the task_name.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new TaskResult object with the validated and filtered scores.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">mteb.get_tasks</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_task</span>

    <span class="k">if</span> <span class="n">task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">get_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">task_name</span><span class="p">)</span>

    <span class="n">splits</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">eval_splits</span>
    <span class="n">hf_subsets</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">hf_subsets</span><span class="p">)</span>  <span class="c1"># Convert to set once</span>

    <span class="n">new_scores</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">seen_splits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">split</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">split</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">splits</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">seen_subsets</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">is_aggregate</span><span class="p">:</span>
            <span class="c1"># aggregate tasks only have the default subset, but in metadata can be multiple</span>
            <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">_scores</span>
                <span class="k">for</span> <span class="n">_scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">_scores</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;default&quot;</span>
            <span class="p">]</span>
            <span class="n">seen_subsets</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">_scores</span>
                <span class="k">for</span> <span class="n">_scores</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">_scores</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">hf_subsets</span>
            <span class="p">]</span>
        <span class="k">for</span> <span class="n">_scores</span> <span class="ow">in</span> <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]:</span>
            <span class="n">seen_subsets</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">_scores</span><span class="p">[</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">seen_subsets</span> <span class="o">!=</span> <span class="n">hf_subsets</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
            <span class="n">task</span><span class="o">.</span><span class="n">is_aggregate</span> <span class="ow">and</span> <span class="s2">&quot;default&quot;</span> <span class="ow">in</span> <span class="n">seen_subsets</span>
        <span class="p">):</span>
            <span class="n">missing_subsets</span> <span class="o">=</span> <span class="n">hf_subsets</span> <span class="o">-</span> <span class="n">seen_subsets</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">missing_subsets</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">subset1</span><span class="p">,</span> <span class="n">subset2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">missing_subsets</span><span class="p">)[:</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">missing_subsets_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">{{</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">subset1</span><span class="si">}</span><span class="s2">&#39;, &#39;</span><span class="si">{</span><span class="n">subset2</span><span class="si">}</span><span class="s2">&#39;, ...</span><span class="se">}}</span><span class="s2">&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">missing_subsets_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">missing_subsets</span><span class="p">)</span>

            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: Missing subsets </span><span class="si">{</span><span class="n">missing_subsets_str</span><span class="si">}</span><span class="s2"> for split </span><span class="si">{</span><span class="n">split</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">missing_subset</span> <span class="ow">in</span> <span class="n">missing_subsets</span><span class="p">:</span>
                <span class="n">new_scores</span><span class="p">[</span><span class="n">split</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;hf_subset&quot;</span><span class="p">:</span> <span class="n">missing_subset</span><span class="p">,</span>
                        <span class="s2">&quot;main_score&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                        <span class="s2">&quot;languages&quot;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">hf_subsets_to_langscripts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="n">missing_subset</span><span class="p">,</span> <span class="p">[]</span>
                        <span class="p">),</span>
                    <span class="p">}</span>
                <span class="p">)</span>
        <span class="n">seen_splits</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">seen_splits</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">(</span><span class="n">splits</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: Missing splits </span><span class="si">{</span><span class="nb">set</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">seen_splits</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">missing_split</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">-</span> <span class="n">seen_splits</span><span class="p">:</span>
            <span class="n">new_scores</span><span class="p">[</span><span class="n">missing_split</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">missing_subset</span> <span class="ow">in</span> <span class="n">hf_subsets</span><span class="p">:</span>
                <span class="n">new_scores</span><span class="p">[</span><span class="n">missing_split</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;hf_subset&quot;</span><span class="p">:</span> <span class="n">missing_subset</span><span class="p">,</span>
                        <span class="s2">&quot;main_score&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
                        <span class="s2">&quot;languages&quot;</span><span class="p">:</span> <span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">hf_subsets_to_langscripts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="n">missing_subset</span><span class="p">,</span> <span class="p">[]</span>
                        <span class="p">),</span>
                    <span class="p">}</span>
                <span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;scores&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_scores</span>
    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="mteb.results.ModelResult" class="doc doc-heading">
            <code>mteb.results.ModelResult</code>


<a href="#mteb.results.ModelResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Data class to hold the results of a model on a set of tasks.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.ModelResult.model_name">model_name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the model.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.ModelResult.model_revision">model_revision</span></code></td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Revision of the model.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.ModelResult.task_results">task_results</span></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.TaskResult&lt;/code&gt; (&lt;code&gt;mteb.results.task_result.TaskResult&lt;/code&gt;)" href="#mteb.results.TaskResult">TaskResult</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of TaskResult objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>mteb/results/model_result.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ModelResult</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data class to hold the results of a model on a set of tasks.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        model_name: Name of the model.</span>
<span class="sd">        model_revision: Revision of the model.</span>
<span class="sd">        task_results: List of TaskResult objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">model_revision</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
    <span class="n">task_results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TaskResult</span><span class="p">]</span>
    <span class="n">default_modalities</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Modalities</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="p">[</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;Modalities&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">)],</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;modalities&quot;</span>
    <span class="p">)</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">ConfigDict</span><span class="p">(</span>  <span class="c1"># to free up the name model_* which is otherwise protected</span>
            <span class="n">protected_namespaces</span><span class="o">=</span><span class="p">(),</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">exceptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TaskError</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">experiment_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">n_entries</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;ModelResult(model_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2">, model_revision=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_revision</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;experiment_name=&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">experiment_name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;, &#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">experiment_name</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;task_results=[...](#</span><span class="si">{</span><span class="n">n_entries</span><span class="si">}</span><span class="s2">))&quot;</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_validated</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">ModelResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a ModelResult from validated data.</span>

<span class="sd">        Args:</span>
<span class="sd">            data: The validated data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;task_results&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>  <span class="c1"># type: ignore[assignment]</span>
            <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_validated</span><span class="p">(</span><span class="o">**</span><span class="n">res</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
            <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;task_results&quot;</span><span class="p">]</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_filter_tasks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">task_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">domains</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TaskDomain</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">task_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TaskType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modalities</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Modalities</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_public</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelResult</span><span class="p">:</span>
        <span class="n">new_task_results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">task_result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">task_names</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">task_names</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">languages</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">task_languages</span> <span class="o">=</span> <span class="n">task_result</span><span class="o">.</span><span class="n">languages</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">lang</span> <span class="ow">in</span> <span class="n">task_languages</span> <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">):</span>
                    <span class="k">continue</span>
            <span class="k">if</span> <span class="n">domains</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">task_domains</span> <span class="o">=</span> <span class="n">task_result</span><span class="o">.</span><span class="n">domains</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">domain</span> <span class="ow">in</span> <span class="n">task_domains</span> <span class="k">for</span> <span class="n">domain</span> <span class="ow">in</span> <span class="n">domains</span><span class="p">):</span>
                    <span class="k">continue</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">task_types</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">task_types</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">modalities</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">task_modalities</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">task_result</span><span class="p">,</span> <span class="s2">&quot;modalities&quot;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">modality</span> <span class="ow">in</span> <span class="n">task_modalities</span> <span class="k">for</span> <span class="n">modality</span> <span class="ow">in</span> <span class="n">modalities</span><span class="p">):</span>
                    <span class="k">continue</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">is_public</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">task_result</span><span class="o">.</span><span class="n">is_public</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">is_public</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">new_task_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task_result</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span>
            <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">model_revision</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_revision</span><span class="p">,</span>
            <span class="n">task_results</span><span class="o">=</span><span class="n">new_task_results</span><span class="p">,</span>
            <span class="n">experiment_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">experiment_name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">select_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">ModelResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Select tasks from the ModelResult based on a list of AbsTask objects.</span>

<span class="sd">        Args:</span>
<span class="sd">            tasks: A sequence of AbsTask objects to select from the ModelResult.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">task_name_to_task</span> <span class="o">=</span> <span class="p">{</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">task</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">}</span>
        <span class="n">new_task_results</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">task_res</span><span class="o">.</span><span class="n">validate_and_filter_scores</span><span class="p">(</span><span class="n">task_name_to_task</span><span class="p">[</span><span class="n">task_res</span><span class="o">.</span><span class="n">task_name</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">task_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span>
            <span class="k">if</span> <span class="n">task_res</span><span class="o">.</span><span class="n">task_name</span> <span class="ow">in</span> <span class="n">task_name_to_task</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span>
            <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">model_revision</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_revision</span><span class="p">,</span>
            <span class="n">task_results</span><span class="o">=</span><span class="n">new_task_results</span><span class="p">,</span>
            <span class="n">experiment_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">experiment_name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_scores</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">splits</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SplitName</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguage</span> <span class="o">|</span> <span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scripts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">getter</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ScoresDict</span><span class="p">],</span> <span class="n">Score</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggregation</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;wide&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wide&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_scores</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">splits</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SplitName</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguage</span> <span class="o">|</span> <span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scripts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">getter</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ScoresDict</span><span class="p">],</span> <span class="n">Score</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggregation</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;long&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span> <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_scores</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">splits</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SplitName</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguage</span> <span class="o">|</span> <span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scripts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">getter</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ScoresDict</span><span class="p">],</span> <span class="n">Score</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggregation</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wide&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span> <span class="o">|</span> <span class="nb">list</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">getter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">aggregation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">scripts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">use_fast</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">getter</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">getter</span> <span class="k">if</span> <span class="n">getter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="k">lambda</span> <span class="n">scores</span><span class="p">:</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;main_score&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">aggregation</span> <span class="o">=</span> <span class="n">aggregation</span> <span class="k">if</span> <span class="n">aggregation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">use_fast</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">aggregation</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;Callable[[list[Score]], Any]&quot;</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">)</span>
        <span class="n">getter</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;Callable[[ScoresDict], Score]&quot;</span><span class="p">,</span> <span class="n">getter</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;wide&quot;</span><span class="p">:</span>
            <span class="n">scores</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">use_fast</span><span class="p">:</span>
                        <span class="n">scores</span><span class="p">[</span><span class="n">res</span><span class="o">.</span><span class="n">task_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">_get_score_fast</span><span class="p">(</span>
                            <span class="n">splits</span><span class="o">=</span><span class="n">splits</span><span class="p">,</span>
                            <span class="n">languages</span><span class="o">=</span><span class="n">languages</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">scores</span><span class="p">[</span><span class="n">res</span><span class="o">.</span><span class="n">task_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get_score</span><span class="p">(</span>
                            <span class="n">splits</span><span class="o">=</span><span class="n">splits</span><span class="p">,</span>
                            <span class="n">languages</span><span class="o">=</span><span class="n">languages</span><span class="p">,</span>
                            <span class="n">aggregation</span><span class="o">=</span><span class="n">aggregation</span><span class="p">,</span>
                            <span class="n">getter</span><span class="o">=</span><span class="n">getter</span><span class="p">,</span>
                            <span class="n">scripts</span><span class="o">=</span><span class="n">scripts</span><span class="p">,</span>
                        <span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Couldn&#39;t get scores for </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> due to </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span>
                    <span class="p">)</span>
            <span class="k">return</span> <span class="n">scores</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;long&quot;</span><span class="p">:</span>
            <span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">task_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">use_fast</span><span class="p">:</span>
                        <span class="n">score</span> <span class="o">=</span> <span class="n">task_res</span><span class="o">.</span><span class="n">_get_score_fast</span><span class="p">(</span>
                            <span class="n">splits</span><span class="o">=</span><span class="n">splits</span><span class="p">,</span>
                            <span class="n">languages</span><span class="o">=</span><span class="n">languages</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">score</span> <span class="o">=</span> <span class="n">task_res</span><span class="o">.</span><span class="n">get_score</span><span class="p">(</span>
                            <span class="n">splits</span><span class="o">=</span><span class="n">splits</span><span class="p">,</span>
                            <span class="n">languages</span><span class="o">=</span><span class="n">languages</span><span class="p">,</span>
                            <span class="n">aggregation</span><span class="o">=</span><span class="n">aggregation</span><span class="p">,</span>
                            <span class="n">getter</span><span class="o">=</span><span class="n">getter</span><span class="p">,</span>
                            <span class="n">scripts</span><span class="o">=</span><span class="n">scripts</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="n">entry</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                        <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
                        <span class="n">model_revision</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_revision</span><span class="p">,</span>
                        <span class="n">task_name</span><span class="o">=</span><span class="n">task_res</span><span class="o">.</span><span class="n">task_name</span><span class="p">,</span>
                        <span class="n">score</span><span class="o">=</span><span class="n">score</span><span class="p">,</span>
                        <span class="n">mteb_version</span><span class="o">=</span><span class="n">task_res</span><span class="o">.</span><span class="n">mteb_version</span><span class="p">,</span>
                        <span class="n">dataset_revision</span><span class="o">=</span><span class="n">task_res</span><span class="o">.</span><span class="n">dataset_revision</span><span class="p">,</span>
                        <span class="n">evaluation_time</span><span class="o">=</span><span class="n">task_res</span><span class="o">.</span><span class="n">evaluation_time</span><span class="p">,</span>
                        <span class="n">kg_co2_emissions</span><span class="o">=</span><span class="n">task_res</span><span class="o">.</span><span class="n">kg_co2_emissions</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Couldn&#39;t get scores for </span><span class="si">{</span><span class="n">task_res</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2"> due to </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">.&quot;</span>
                    <span class="p">)</span>
            <span class="k">return</span> <span class="n">entries</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_score_for_table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
        <span class="n">scores_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_name</span>
        <span class="k">for</span> <span class="n">task_result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
            <span class="n">task_name</span> <span class="o">=</span> <span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span>
            <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="n">scores_list</span> <span class="ow">in</span> <span class="n">task_result</span><span class="o">.</span><span class="n">scores</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">score_item</span> <span class="ow">in</span> <span class="n">scores_list</span><span class="p">:</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="n">model_name</span><span class="p">,</span>
                        <span class="s2">&quot;model_revision&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_revision</span><span class="p">,</span>
                        <span class="s2">&quot;task_name&quot;</span><span class="p">:</span> <span class="n">task_name</span><span class="p">,</span>
                        <span class="s2">&quot;split&quot;</span><span class="p">:</span> <span class="n">split</span><span class="p">,</span>
                        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">score_item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;languages&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;Unknown&quot;</span><span class="p">]),</span>
                        <span class="s2">&quot;subset&quot;</span><span class="p">:</span> <span class="n">score_item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hf_subset&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">),</span>
                        <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">score_item</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;main_score&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                    <span class="p">}</span>
                    <span class="n">scores_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">scores_data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dataframe</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">aggregation_level</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;subset&quot;</span><span class="p">,</span> <span class="s2">&quot;split&quot;</span><span class="p">,</span> <span class="s2">&quot;task&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;task&quot;</span><span class="p">,</span>
        <span class="n">aggregation_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_model_revision</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wide&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a DataFrame with the scores for all models and tasks.</span>

<span class="sd">        The DataFrame will have the following columns in addition to the metadata columns:</span>

<span class="sd">        - model_name: The name of the model.</span>
<span class="sd">        - task_name: The name of the task.</span>
<span class="sd">        - score: The main score of the model on the task.</span>

<span class="sd">        In addition, the DataFrame can have the following columns depending on the aggregation level:</span>

<span class="sd">        - split: The split of the task. E.g. &quot;test&quot;, &quot;train&quot;, &quot;validation&quot;.</span>
<span class="sd">        - subset: The subset of the task. E.g. &quot;en&quot;, &quot;fr-en&quot;.</span>

<span class="sd">        Afterwards, the DataFrame will be aggregated according to the aggregation method and pivoted to either a wide format.</span>

<span class="sd">        Args:</span>
<span class="sd">            aggregation_level: The aggregation to use. Can be one of:</span>
<span class="sd">                - &quot;subset&quot;/None: No aggregation will be done. The DataFrame will have one row per model, task, split and subset.</span>
<span class="sd">                - &quot;split&quot;: Aggregates the scores by split. The DataFrame will have one row per model, task and split.</span>
<span class="sd">                - &quot;task&quot;: Aggregates the scores by task. The DataFrame will have one row per model and task.</span>
<span class="sd">            aggregation_fn: The function to use for aggregation. If None, the mean will be used.</span>
<span class="sd">            include_model_revision: If True, the model revision will be included in the DataFrame. If False, it will be excluded.</span>
<span class="sd">            format: The format of the DataFrame. Can be one of:</span>
<span class="sd">                - &quot;wide&quot;: The DataFrame will be of shape (number of tasks, number of models). Scores will be in the cells.</span>
<span class="sd">                - &quot;long&quot;: The DataFrame will of length (number of tasks * number of model). Scores will be in columns.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A DataFrame with the scores for all models and tasks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">scores_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_score_for_table</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">scores_data</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No scores data available. Returning empty DataFrame.&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

        <span class="c1"># Create DataFrame</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scores_data</span><span class="p">)</span>

        <span class="n">_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;model_name&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">include_model_revision</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;model_revision&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;model_revision&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_aggregate_and_pivot</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">columns</span><span class="o">=</span><span class="n">_columns</span><span class="p">,</span>
            <span class="n">aggregation_level</span><span class="o">=</span><span class="n">aggregation_level</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
            <span class="n">aggregation_fn</span><span class="o">=</span><span class="n">aggregation_fn</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">TaskResult</span><span class="p">]:</span>  <span class="c1"># type: ignore[override]</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskResult</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">languages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all languages in the model results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of languages in the model results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">langs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">task_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
            <span class="n">langs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">task_res</span><span class="o">.</span><span class="n">languages</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">langs</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">domains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all domains in the model results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of domains in the model results.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">task_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
            <span class="n">ds</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">task_res</span><span class="o">.</span><span class="n">domains</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ds</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">task_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all task types in the model results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of task types in the model results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">({</span><span class="n">task_res</span><span class="o">.</span><span class="n">task_type</span> <span class="k">for</span> <span class="n">task_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">})</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">task_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all task names in the model results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of task names in the model results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">task_res</span><span class="o">.</span><span class="n">task_name</span> <span class="k">for</span> <span class="n">task_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">modalities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Modalities</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all modalities in the task results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of modalities in the task results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mods</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Modalities</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">task_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
            <span class="n">task_modalities</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">task_res</span><span class="p">,</span> <span class="s2">&quot;modalities&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="n">mods</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">task_modalities</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">mods</span><span class="p">:</span>
            <span class="n">mods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_modalities</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">mods</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_disk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save ModelResult to disk as JSON.</span>

<span class="sd">        Args:</span>
<span class="sd">            path: The path to the file to save.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_disk</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load ModelResult from disk.</span>

<span class="sd">        Args:</span>
<span class="sd">            path: The path to the JSON file to load.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The loaded ModelResult object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">push_model_results</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">create_pr</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Push the model results to the Hugging Face Hub.</span>

<span class="sd">        Args:</span>
<span class="sd">            user: The user or organization of results source.</span>
<span class="sd">            create_pr: Whether to create a pull request</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">task_result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
                <span class="n">task_results</span> <span class="o">=</span> <span class="n">task_result</span><span class="o">.</span><span class="n">_to_hf_benchmark_result</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
                <span class="k">with</span> <span class="p">(</span><span class="n">path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2">.yaml&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
                    <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span>
                <span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">task_results</span><span class="o">.</span><span class="n">to_yaml</span><span class="p">())</span>

            <span class="n">huggingface_hub</span><span class="o">.</span><span class="n">upload_folder</span><span class="p">(</span>
                <span class="n">repo_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
                <span class="n">repo_type</span><span class="o">=</span><span class="s2">&quot;model&quot;</span><span class="p">,</span>
                <span class="n">path_in_repo</span><span class="o">=</span><span class="s2">&quot;.eval_results&quot;</span><span class="p">,</span>
                <span class="n">folder_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
                <span class="n">commit_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Add evaluation results for model </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> revision </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_revision</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">create_pr</span><span class="o">=</span><span class="n">create_pr</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.ModelResult.domains" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">domains</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.ModelResult.domains" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all domains in the model results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of domains in the model results.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.ModelResult.languages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">languages</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.ModelResult.languages" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all languages in the model results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of languages in the model results.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.ModelResult.modalities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modalities</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.ModelResult.modalities" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all modalities in the task results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Modalities&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Literal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;text&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;image&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;audio&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.Modalities&lt;/code&gt;)" href="../types/#mteb.types._metadata.Modalities">Modalities</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of modalities in the task results.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.ModelResult.task_names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">task_names</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.ModelResult.task_names" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all task names in the model results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of task names in the model results.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.ModelResult.task_types" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">task_types</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.ModelResult.task_types" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all task types in the model results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of task types in the model results.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="mteb.results.ModelResult.from_disk" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mteb.results.ModelResult.from_disk" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Load ModelResult from disk.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the JSON file to load.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.ModelResult&lt;/code&gt; (&lt;code&gt;mteb.results.model_result.ModelResult&lt;/code&gt;)" href="#mteb.results.ModelResult">ModelResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The loaded ModelResult object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/model_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_disk</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load ModelResult from disk.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: The path to the JSON file to load.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The loaded ModelResult object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.ModelResult.from_validated" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_validated</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mteb.results.ModelResult.from_validated" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create a ModelResult from validated data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The validated data.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/model_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_validated</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">ModelResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a ModelResult from validated data.</span>

<span class="sd">    Args:</span>
<span class="sd">        data: The validated data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;task_results&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="n">TaskResult</span><span class="o">.</span><span class="n">from_validated</span><span class="p">(</span><span class="o">**</span><span class="n">res</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
        <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;task_results&quot;</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.ModelResult.push_model_results" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">push_model_results</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">create_pr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#mteb.results.ModelResult.push_model_results" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Push the model results to the Hugging Face Hub.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The user or organization of results source.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>create_pr</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to create a pull request</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/model_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">push_model_results</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">create_pr</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Push the model results to the Hugging Face Hub.</span>

<span class="sd">    Args:</span>
<span class="sd">        user: The user or organization of results source.</span>
<span class="sd">        create_pr: Whether to create a pull request</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdir</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">task_result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
            <span class="n">task_results</span> <span class="o">=</span> <span class="n">task_result</span><span class="o">.</span><span class="n">_to_hf_benchmark_result</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
            <span class="k">with</span> <span class="p">(</span><span class="n">path</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="si">}</span><span class="s2">.yaml&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
                <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span>
            <span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">task_results</span><span class="o">.</span><span class="n">to_yaml</span><span class="p">())</span>

        <span class="n">huggingface_hub</span><span class="o">.</span><span class="n">upload_folder</span><span class="p">(</span>
            <span class="n">repo_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
            <span class="n">repo_type</span><span class="o">=</span><span class="s2">&quot;model&quot;</span><span class="p">,</span>
            <span class="n">path_in_repo</span><span class="o">=</span><span class="s2">&quot;.eval_results&quot;</span><span class="p">,</span>
            <span class="n">folder_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span>
            <span class="n">commit_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Add evaluation results for model </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> revision </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_revision</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">create_pr</span><span class="o">=</span><span class="n">create_pr</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.ModelResult.select_tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">select_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span></code>

<a href="#mteb.results.ModelResult.select_tasks" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Select tasks from the ModelResult based on a list of AbsTask objects.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tasks</code>
            </td>
            <td>
                  <code><span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.AbsTask&lt;/code&gt; (&lt;code&gt;mteb.abstasks.abstask.AbsTask&lt;/code&gt;)" href="../task/#mteb.AbsTask">AbsTask</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A sequence of AbsTask objects to select from the ModelResult.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/model_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">select_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">ModelResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Select tasks from the ModelResult based on a list of AbsTask objects.</span>

<span class="sd">    Args:</span>
<span class="sd">        tasks: A sequence of AbsTask objects to select from the ModelResult.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">task_name_to_task</span> <span class="o">=</span> <span class="p">{</span><span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">task</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">}</span>
    <span class="n">new_task_results</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">task_res</span><span class="o">.</span><span class="n">validate_and_filter_scores</span><span class="p">(</span><span class="n">task_name_to_task</span><span class="p">[</span><span class="n">task_res</span><span class="o">.</span><span class="n">task_name</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">task_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">task_results</span>
        <span class="k">if</span> <span class="n">task_res</span><span class="o">.</span><span class="n">task_name</span> <span class="ow">in</span> <span class="n">task_name_to_task</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span>
        <span class="n">model_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
        <span class="n">model_revision</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_revision</span><span class="p">,</span>
        <span class="n">task_results</span><span class="o">=</span><span class="n">new_task_results</span><span class="p">,</span>
        <span class="n">experiment_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">experiment_name</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.ModelResult.to_dataframe" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_dataframe</span><span class="p">(</span><span class="n">aggregation_level</span><span class="o">=</span><span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="n">aggregation_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">include_model_revision</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;wide&#39;</span><span class="p">)</span></code>

<a href="#mteb.results.ModelResult.to_dataframe" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get a DataFrame with the scores for all models and tasks.</p>
<p>The DataFrame will have the following columns in addition to the metadata columns:</p>
<ul>
<li>model_name: The name of the model.</li>
<li>task_name: The name of the task.</li>
<li>score: The main score of the model on the task.</li>
</ul>
<p>In addition, the DataFrame can have the following columns depending on the aggregation level:</p>
<ul>
<li>split: The split of the task. E.g. "test", "train", "validation".</li>
<li>subset: The subset of the task. E.g. "en", "fr-en".</li>
</ul>
<p>Afterwards, the DataFrame will be aggregated according to the aggregation method and pivoted to either a wide format.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>aggregation_level</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;subset&#39;, &#39;split&#39;, &#39;task&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The aggregation to use. Can be one of:
- "subset"/None: No aggregation will be done. The DataFrame will have one row per model, task, split and subset.
- "split": Aggregates the scores by split. The DataFrame will have one row per model, task and split.
- "task": Aggregates the scores by task. The DataFrame will have one row per model and task.</p>
              </div>
            </td>
            <td>
                  <code>&#39;task&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>aggregation_fn</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Score&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Any&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.Score&lt;/code&gt;)" href="../types/#mteb.types._result.Score">Score</a>]], <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to use for aggregation. If None, the mean will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_model_revision</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the model revision will be included in the DataFrame. If False, it will be excluded.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>format</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;wide&#39;, &#39;long&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format of the DataFrame. Can be one of:
- "wide": The DataFrame will be of shape (number of tasks, number of models). Scores will be in the cells.
- "long": The DataFrame will of length (number of tasks * number of model). Scores will be in columns.</p>
              </div>
            </td>
            <td>
                  <code>&#39;wide&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A DataFrame with the scores for all models and tasks.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/model_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dataframe</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">aggregation_level</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;subset&quot;</span><span class="p">,</span> <span class="s2">&quot;split&quot;</span><span class="p">,</span> <span class="s2">&quot;task&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;task&quot;</span><span class="p">,</span>
    <span class="n">aggregation_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">include_model_revision</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wide&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a DataFrame with the scores for all models and tasks.</span>

<span class="sd">    The DataFrame will have the following columns in addition to the metadata columns:</span>

<span class="sd">    - model_name: The name of the model.</span>
<span class="sd">    - task_name: The name of the task.</span>
<span class="sd">    - score: The main score of the model on the task.</span>

<span class="sd">    In addition, the DataFrame can have the following columns depending on the aggregation level:</span>

<span class="sd">    - split: The split of the task. E.g. &quot;test&quot;, &quot;train&quot;, &quot;validation&quot;.</span>
<span class="sd">    - subset: The subset of the task. E.g. &quot;en&quot;, &quot;fr-en&quot;.</span>

<span class="sd">    Afterwards, the DataFrame will be aggregated according to the aggregation method and pivoted to either a wide format.</span>

<span class="sd">    Args:</span>
<span class="sd">        aggregation_level: The aggregation to use. Can be one of:</span>
<span class="sd">            - &quot;subset&quot;/None: No aggregation will be done. The DataFrame will have one row per model, task, split and subset.</span>
<span class="sd">            - &quot;split&quot;: Aggregates the scores by split. The DataFrame will have one row per model, task and split.</span>
<span class="sd">            - &quot;task&quot;: Aggregates the scores by task. The DataFrame will have one row per model and task.</span>
<span class="sd">        aggregation_fn: The function to use for aggregation. If None, the mean will be used.</span>
<span class="sd">        include_model_revision: If True, the model revision will be included in the DataFrame. If False, it will be excluded.</span>
<span class="sd">        format: The format of the DataFrame. Can be one of:</span>
<span class="sd">            - &quot;wide&quot;: The DataFrame will be of shape (number of tasks, number of models). Scores will be in the cells.</span>
<span class="sd">            - &quot;long&quot;: The DataFrame will of length (number of tasks * number of model). Scores will be in columns.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A DataFrame with the scores for all models and tasks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">scores_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_score_for_table</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">scores_data</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No scores data available. Returning empty DataFrame.&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="c1"># Create DataFrame</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scores_data</span><span class="p">)</span>

    <span class="n">_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;model_name&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">include_model_revision</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;model_revision&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;model_revision&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_aggregate_and_pivot</span><span class="p">(</span>
        <span class="n">df</span><span class="p">,</span>
        <span class="n">columns</span><span class="o">=</span><span class="n">_columns</span><span class="p">,</span>
        <span class="n">aggregation_level</span><span class="o">=</span><span class="n">aggregation_level</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
        <span class="n">aggregation_fn</span><span class="o">=</span><span class="n">aggregation_fn</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.ModelResult.to_disk" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

<a href="#mteb.results.ModelResult.to_disk" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Save ModelResult to disk as JSON.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the file to save.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/model_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_disk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save ModelResult to disk as JSON.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: The path to the file to save.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="mteb.results.BenchmarkResults" class="doc doc-heading">
            <code>mteb.results.BenchmarkResults</code>


<a href="#mteb.results.BenchmarkResults" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Data class to hold the benchmark results of a model.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="mteb.results.BenchmarkResults.model_results">model_results</span></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.ModelResult&lt;/code&gt; (&lt;code&gt;mteb.results.model_result.ModelResult&lt;/code&gt;)" href="#mteb.results.ModelResult">ModelResult</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of ModelResult objects.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BenchmarkResults</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Data class to hold the benchmark results of a model.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        model_results: List of ModelResult objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">model_results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ModelResult</span><span class="p">]</span>
    <span class="n">benchmark</span><span class="p">:</span> <span class="n">Benchmark</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span>
        <span class="n">protected_namespaces</span><span class="o">=</span><span class="p">(),</span>  <span class="c1"># to free up the name model_results which is otherwise protected</span>
        <span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Benchmark is dataclasses.dataclass</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">n_models</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;BenchmarkResults(model_results=[...](#</span><span class="si">{</span><span class="n">n_models</span><span class="si">}</span><span class="s2">))&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_filter_tasks</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">task_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">domains</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TaskDomain</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">task_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TaskType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">modalities</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Modalities</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_public</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
        <span class="c1"># TODO: Same as filter_models</span>
        <span class="n">model_results</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">res</span><span class="o">.</span><span class="n">_filter_tasks</span><span class="p">(</span>
                <span class="n">task_names</span><span class="o">=</span><span class="n">task_names</span><span class="p">,</span>
                <span class="n">languages</span><span class="o">=</span><span class="n">languages</span><span class="p">,</span>
                <span class="n">domains</span><span class="o">=</span><span class="n">domains</span><span class="p">,</span>
                <span class="n">task_types</span><span class="o">=</span><span class="n">task_types</span><span class="p">,</span>
                <span class="n">modalities</span><span class="o">=</span><span class="n">modalities</span><span class="p">,</span>
                <span class="n">is_public</span><span class="o">=</span><span class="n">is_public</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span>
            <span class="n">model_results</span><span class="o">=</span><span class="p">[</span><span class="n">res</span> <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">model_results</span> <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">task_results</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">select_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Select tasks from the benchmark results.</span>

<span class="sd">        Args:</span>
<span class="sd">            tasks: List of tasks to select. Can be a list of AbsTask objects or task names.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new BenchmarkResults object with the selected tasks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_model_results</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">model_res</span><span class="o">.</span><span class="n">select_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span> <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">new_model_results</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">select_models</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ModelMeta</span><span class="p">],</span>
        <span class="n">revisions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get models by name and revision.</span>

<span class="sd">        Args:</span>
<span class="sd">            names: List of model names to filter by. Can also be a list of ModelMeta objects. In which case, the revision is ignored.</span>
<span class="sd">            revisions: List of model revisions to filter by. If None, all revisions are returned.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new BenchmarkResults object with the filtered models.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">models_res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">_revisions</span> <span class="o">=</span> <span class="n">revisions</span> <span class="k">if</span> <span class="n">revisions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>

        <span class="n">name_rev</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">_revisions</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;The length of names and revisions must be the same or revisions must be None.&quot;</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">revision</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">_revisions</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">ModelMeta</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;name in ModelMeta is None. It must be a string.&quot;</span><span class="p">)</span>
                <span class="n">name_rev</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">revision</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name_</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;str&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                <span class="n">name_rev</span><span class="p">[</span><span class="n">name_</span><span class="p">]</span> <span class="o">=</span> <span class="n">revision</span>

        <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">:</span>
            <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_res</span><span class="o">.</span><span class="n">model_name</span>
            <span class="n">revision</span> <span class="o">=</span> <span class="n">model_res</span><span class="o">.</span><span class="n">model_revision</span>
            <span class="k">if</span> <span class="n">model_name</span> <span class="ow">in</span> <span class="n">name_rev</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">name_rev</span><span class="p">[</span><span class="n">model_name</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">revision</span> <span class="o">==</span> <span class="n">name_rev</span><span class="p">[</span><span class="n">model_name</span><span class="p">]:</span>
                    <span class="n">models_res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_res</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">models_res</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_filter_models</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model_names</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">languages</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">open_weights</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">frameworks</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">n_parameters_range</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
        <span class="n">use_instructions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">zero_shot_on</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
        <span class="c1"># mostly a utility function for the leaderboard app.</span>
        <span class="c1"># I would probably move the filtering of the models outside of this call. No need to call get_model_metas inside the filter.</span>
        <span class="c1"># interface would then be the same as the get_models function</span>

        <span class="n">model_metas</span> <span class="o">=</span> <span class="n">get_model_metas</span><span class="p">(</span>
            <span class="n">model_names</span><span class="o">=</span><span class="n">model_names</span><span class="p">,</span>
            <span class="n">languages</span><span class="o">=</span><span class="n">languages</span><span class="p">,</span>
            <span class="n">open_weights</span><span class="o">=</span><span class="n">open_weights</span><span class="p">,</span>
            <span class="n">frameworks</span><span class="o">=</span><span class="n">frameworks</span><span class="p">,</span>
            <span class="n">n_parameters_range</span><span class="o">=</span><span class="n">n_parameters_range</span><span class="p">,</span>
            <span class="n">use_instructions</span><span class="o">=</span><span class="n">use_instructions</span><span class="p">,</span>
            <span class="n">zero_shot_on</span><span class="o">=</span><span class="n">zero_shot_on</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">models</span> <span class="o">=</span> <span class="p">{</span><span class="n">meta</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">meta</span> <span class="ow">in</span> <span class="n">model_metas</span><span class="p">}</span>
        <span class="c1"># model_revision_pairs = {(meta.name, meta.revision) for meta in model_metas}</span>
        <span class="n">new_model_results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">model_res</span><span class="o">.</span><span class="n">model_name</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
                <span class="n">new_model_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_res</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">new_model_results</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">join_revisions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Join revisions of the same model.</span>

<span class="sd">        In case of conflicts, the following rules are applied:</span>
<span class="sd">        1) If the main revision is present, it is kept. The main revision is the defined in the models ModelMeta object.</span>
<span class="sd">        2) If there is multiple revisions and some of them are None or na, they are filtered out.</span>
<span class="sd">        3) If there is no main revision, we prefer the one run using the latest mteb version.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A new BenchmarkResults object with the revisions joined.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_result</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">task_result</span> <span class="ow">in</span> <span class="n">model_result</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
                <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="nb">dict</span><span class="p">(</span>
                        <span class="n">model</span><span class="o">=</span><span class="n">model_result</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
                        <span class="n">revision</span><span class="o">=</span><span class="n">model_result</span><span class="o">.</span><span class="n">model_revision</span><span class="p">,</span>
                        <span class="n">task_name</span><span class="o">=</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="p">,</span>
                        <span class="n">mteb_version</span><span class="o">=</span><span class="n">task_result</span><span class="o">.</span><span class="n">mteb_version</span><span class="p">,</span>
                        <span class="n">task_result</span><span class="o">=</span><span class="n">task_result</span><span class="p">,</span>
                        <span class="n">has_scores</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">task_result</span><span class="o">.</span><span class="n">scores</span><span class="p">),</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">records</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">BenchmarkResults</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">task_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>

        <span class="c1"># Use cached model metas</span>
        <span class="n">model_to_main_revision</span> <span class="o">=</span> <span class="n">_get_cached_model_metas</span><span class="p">()</span>
        <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;main_revision&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">model_to_main_revision</span><span class="p">)</span>

        <span class="c1"># Use cached version parsing</span>
        <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">_parse_version_cached</span><span class="p">)</span>

        <span class="c1"># Filter out rows without scores first</span>
        <span class="n">task_df</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;has_scores&quot;</span><span class="p">]]</span>

        <span class="c1"># Optimize groupby with vectorized operations</span>
        <span class="c1"># Sort by priority: main_revision match, then mteb_version (descending), then revision</span>
        <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;is_main_revision&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;main_revision&quot;</span><span class="p">]</span>

        <span class="c1"># Handle None/NA/external revisions</span>
        <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision_clean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">(),</span> <span class="s2">&quot;revision_clean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;no_revision_available&quot;</span>
        <span class="p">)</span>
        <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span> <span class="s2">&quot;revision_clean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;no_revision_available&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Create a priority column for sorting</span>
        <span class="c1"># Higher priority = better to keep</span>
        <span class="c1"># Priority: main_revision (1000), has valid mteb_version (100), has valid revision (10)</span>
        <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;priority&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;is_main_revision&quot;</span><span class="p">],</span> <span class="s2">&quot;priority&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1000</span>
        <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">(),</span> <span class="s2">&quot;priority&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">100</span>
        <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
            <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision_clean&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;no_revision_available&quot;</span><span class="p">,</span> <span class="s2">&quot;priority&quot;</span>
        <span class="p">]</span> <span class="o">+=</span> <span class="mi">10</span>

        <span class="c1"># Sort by priority (desc), mteb_version (desc), and take first per group</span>
        <span class="n">task_df</span> <span class="o">=</span> <span class="n">task_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;task_name&quot;</span><span class="p">,</span> <span class="s2">&quot;priority&quot;</span><span class="p">,</span> <span class="s2">&quot;mteb_version&quot;</span><span class="p">],</span>
            <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
            <span class="n">na_position</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">task_df</span> <span class="o">=</span> <span class="n">task_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;task_name&quot;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

        <span class="c1"># Reconstruct model results</span>
        <span class="n">model_results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Group by original revision to maintain deterministic behavior</span>
        <span class="c1"># After the first() selection above, each (model, task_name) is unique,</span>
        <span class="c1"># so grouping by original revision ensures consistent ModelResult creation</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">model_revision</span><span class="p">),</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">task_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;revision&quot;</span><span class="p">]):</span>
            <span class="n">model_result</span> <span class="o">=</span> <span class="n">ModelResult</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span>
                <span class="n">model_name</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
                <span class="n">model_revision</span><span class="o">=</span><span class="n">model_revision</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
                <span class="n">task_results</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="s2">&quot;task_result&quot;</span><span class="p">]),</span>
            <span class="p">)</span>
            <span class="n">model_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">BenchmarkResults</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">model_results</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_scores</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">splits</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SplitName</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">languages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguage</span> <span class="o">|</span> <span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">scripts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ISOLanguageScript</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">getter</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">ScoresDict</span><span class="p">],</span> <span class="n">Score</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggregation</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wide&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;wide&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">model_scores</span> <span class="o">=</span> <span class="n">model_res</span><span class="o">.</span><span class="n">_get_scores</span><span class="p">(</span>
                        <span class="n">splits</span><span class="o">=</span><span class="n">splits</span><span class="p">,</span>
                        <span class="n">languages</span><span class="o">=</span><span class="n">languages</span><span class="p">,</span>
                        <span class="n">scripts</span><span class="o">=</span><span class="n">scripts</span><span class="p">,</span>
                        <span class="n">getter</span><span class="o">=</span><span class="n">getter</span><span class="p">,</span>
                        <span class="n">aggregation</span><span class="o">=</span><span class="n">aggregation</span><span class="p">,</span>
                        <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="n">model_res</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
                            <span class="s2">&quot;revision&quot;</span><span class="p">:</span> <span class="n">model_res</span><span class="o">.</span><span class="n">model_revision</span><span class="p">,</span>
                            <span class="o">**</span><span class="n">model_scores</span><span class="p">,</span>
                        <span class="p">}</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Couldn&#39;t get scores for </span><span class="si">{</span><span class="n">model_res</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">model_res</span><span class="o">.</span><span class="n">model_revision</span><span class="si">}</span><span class="s2">), due to: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;long&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">entries</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="n">model_res</span><span class="o">.</span><span class="n">_get_scores</span><span class="p">(</span>
                            <span class="n">splits</span><span class="o">=</span><span class="n">splits</span><span class="p">,</span>
                            <span class="n">languages</span><span class="o">=</span><span class="n">languages</span><span class="p">,</span>
                            <span class="n">scripts</span><span class="o">=</span><span class="n">scripts</span><span class="p">,</span>
                            <span class="n">getter</span><span class="o">=</span><span class="n">getter</span><span class="p">,</span>
                            <span class="n">aggregation</span><span class="o">=</span><span class="n">aggregation</span><span class="p">,</span>
                            <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;long&quot;</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Couldn&#39;t get scores for </span><span class="si">{</span><span class="n">model_res</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">model_res</span><span class="o">.</span><span class="n">model_revision</span><span class="si">}</span><span class="s2">), due to: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
        <span class="k">return</span> <span class="n">entries</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dataframe</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">aggregation_level</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;subset&quot;</span><span class="p">,</span> <span class="s2">&quot;split&quot;</span><span class="p">,</span> <span class="s2">&quot;task&quot;</span><span class="p">,</span> <span class="s2">&quot;language&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;task&quot;</span><span class="p">,</span>
        <span class="n">aggregation_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_model_revision</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wide&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a DataFrame with the scores for all models and tasks.</span>

<span class="sd">        The DataFrame will have the following columns in addition to the metadata columns:</span>

<span class="sd">        - model_name: The name of the model.</span>
<span class="sd">        - task_name: The name of the task.</span>
<span class="sd">        - score: The main score of the model on the task.</span>

<span class="sd">        In addition, the DataFrame can have the following columns depending on the aggregation level:</span>

<span class="sd">        - split: The split of the task. E.g. &quot;test&quot;, &quot;train&quot;, &quot;validation&quot;.</span>
<span class="sd">        - subset: The subset of the task. E.g. &quot;en&quot;, &quot;fr-en&quot;.</span>

<span class="sd">        Afterward, the DataFrame will be aggregated according to the aggregation method and pivoted to either a wide format.</span>

<span class="sd">        Args:</span>
<span class="sd">            aggregation_level: The aggregation to use. Can be one of:</span>
<span class="sd">                - &quot;subset&quot;/None: No aggregation will be done. The DataFrame will have one row per model, task, split and subset.</span>
<span class="sd">                - &quot;split&quot;: Aggregates the scores by split. The DataFrame will have one row per model, task and split.</span>
<span class="sd">                - &quot;task&quot;: Aggregates the scores by task. The DataFrame will have one row per model and task.</span>
<span class="sd">                - &quot;language&quot;: Aggregates the scores by language. The DataFrame will have one row per model and language.</span>
<span class="sd">            aggregation_fn: The function to use for aggregation. If None, the mean will be used.</span>
<span class="sd">            include_model_revision: If True, the model revision will be included in the DataFrame. If False, it will be excluded.</span>
<span class="sd">                If there are multiple revisions for the same model, they will be joined using the `join_revisions` method.</span>
<span class="sd">            format: The format of the DataFrame. Can be one of:</span>
<span class="sd">                - &quot;wide&quot;: The DataFrame will be of shape (number of tasks, number of models). Scores will be in the cells.</span>
<span class="sd">                - &quot;long&quot;: The DataFrame will of length (number of tasks * number of model). Scores will be in columns.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A DataFrame with the scores for all models and tasks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bench_results</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">include_model_revision</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">bench_results</span> <span class="o">=</span> <span class="n">bench_results</span><span class="o">.</span><span class="n">join_revisions</span><span class="p">()</span>

        <span class="n">scores_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_result</span> <span class="ow">in</span> <span class="n">bench_results</span><span class="p">:</span>
            <span class="n">scores_data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">model_result</span><span class="o">.</span><span class="n">_get_score_for_table</span><span class="p">())</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">scores_data</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No scores data available. Returning empty DataFrame.&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

        <span class="c1"># Create DataFrame</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scores_data</span><span class="p">)</span>

        <span class="n">_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;model_name&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">include_model_revision</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;model_revision&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;model_revision&quot;</span><span class="p">)</span>

        <span class="c1"># Aggregation</span>
        <span class="k">return</span> <span class="n">_aggregate_and_pivot</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">columns</span><span class="o">=</span><span class="n">_columns</span><span class="p">,</span>
            <span class="n">aggregation_level</span><span class="o">=</span><span class="n">aggregation_level</span><span class="p">,</span>
            <span class="n">aggregation_fn</span><span class="o">=</span><span class="n">aggregation_fn</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_benchmark_result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get aggregated scores for each model in the benchmark.</span>

<span class="sd">        Uses the benchmark&#39;s summary table creation method to compute scores.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A DataFrame with the aggregated benchmark scores for each model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">benchmark</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;No benchmark associated with these results (self.benchmark is None). &quot;</span>
                <span class="s2">&quot;To get benchmark results, load results with a Benchmark object. &quot;</span>
                <span class="s2">&quot;`results = cache.load_results(tasks=&#39;MTEB(eng, v2)&#39;)`&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">benchmark</span><span class="o">.</span><span class="n">_create_summary_table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">ModelResult</span><span class="p">]:</span>  <span class="c1"># type: ignore[override]</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModelResult</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert BenchmarkResults to a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create BenchmarkResults from a dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_disk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the BenchmarkResults to a JSON file.&quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out_file</span><span class="p">:</span>
            <span class="n">out_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_validated</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create BenchmarkResults from validated data.</span>

<span class="sd">        Args:</span>
<span class="sd">            **data: Arbitrary keyword arguments containing the data.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An instance of BenchmarkResults.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model_results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;model_results&quot;</span><span class="p">]:</span>
            <span class="n">model_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ModelResult</span><span class="o">.</span><span class="n">from_validated</span><span class="p">(</span><span class="o">**</span><span class="n">model_res</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">model_results</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_disk</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load the BenchmarkResults from a JSON file.</span>

<span class="sd">        Args:</span>
<span class="sd">            path: Path to the JSON file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An instance of BenchmarkResults.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">()</span> <span class="k">as</span> <span class="n">in_file</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">in_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">languages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all languages in the benchmark results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of languages in ISO 639-1 format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">langs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">:</span>
            <span class="n">langs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">model_res</span><span class="o">.</span><span class="n">languages</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">langs</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">domains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all domains in the benchmark results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of domains in ISO 639-1 format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">:</span>
            <span class="n">ds</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">model_res</span><span class="o">.</span><span class="n">domains</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ds</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">task_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all task types in the benchmark results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of task types.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">:</span>
            <span class="n">ts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">model_res</span><span class="o">.</span><span class="n">task_types</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">ts</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">task_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all task names in the benchmark results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of task names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">:</span>
            <span class="n">names</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">model_res</span><span class="o">.</span><span class="n">task_names</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">names</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">modalities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all modalities in the benchmark results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of modalities.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">:</span>
            <span class="n">mod</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">model_res</span><span class="o">.</span><span class="n">modalities</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">mod</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">model_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all model names in the benchmark results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of model names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">model_res</span><span class="o">.</span><span class="n">model_name</span> <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">model_revisions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all model revisions in the benchmark results.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A list of dictionaries with model names and revisions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="n">model_res</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span> <span class="s2">&quot;revision&quot;</span><span class="p">:</span> <span class="n">model_res</span><span class="o">.</span><span class="n">model_revision</span><span class="p">}</span>
            <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span>
        <span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.BenchmarkResults.domains" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">domains</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.domains" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all domains in the benchmark results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of domains in ISO 639-1 format.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.BenchmarkResults.languages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">languages</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.languages" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all languages in the benchmark results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of languages in ISO 639-1 format.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.BenchmarkResults.modalities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">modalities</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.modalities" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all modalities in the benchmark results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of modalities.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.BenchmarkResults.model_names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model_names</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.model_names" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all model names in the benchmark results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of model names.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.BenchmarkResults.model_revisions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">model_revisions</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.model_revisions" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all model revisions in the benchmark results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="dict">dict</span>[<span title="str">str</span>, <span title="str">str</span> | None]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of dictionaries with model names and revisions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.BenchmarkResults.task_names" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">task_names</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.task_names" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all task names in the benchmark results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of task names.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="mteb.results.BenchmarkResults.task_types" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">task_types</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.task_types" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get all task types in the benchmark results.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of task types.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.from_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create BenchmarkResults from a dictionary.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create BenchmarkResults from a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.from_disk" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.from_disk" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Load the BenchmarkResults from a JSON file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the JSON file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing_extensions.Self">Self</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of BenchmarkResults.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_disk</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load the BenchmarkResults from a JSON file.</span>

<span class="sd">    Args:</span>
<span class="sd">        path: Path to the JSON file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An instance of BenchmarkResults.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">()</span> <span class="k">as</span> <span class="n">in_file</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">in_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.from_validated" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_validated</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#mteb.results.BenchmarkResults.from_validated" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Create BenchmarkResults from validated data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>**data</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arbitrary keyword arguments containing the data.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.BenchmarkResults&lt;/code&gt; (&lt;code&gt;mteb.results.benchmark_results.BenchmarkResults&lt;/code&gt;)" href="#mteb.results.BenchmarkResults">BenchmarkResults</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of BenchmarkResults.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_validated</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create BenchmarkResults from validated data.</span>

<span class="sd">    Args:</span>
<span class="sd">        **data: Arbitrary keyword arguments containing the data.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An instance of BenchmarkResults.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;model_results&quot;</span><span class="p">]:</span>
        <span class="n">model_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ModelResult</span><span class="o">.</span><span class="n">from_validated</span><span class="p">(</span><span class="o">**</span><span class="n">model_res</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">model_results</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.get_benchmark_result" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_benchmark_result</span><span class="p">()</span></code>

<a href="#mteb.results.BenchmarkResults.get_benchmark_result" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get aggregated scores for each model in the benchmark.</p>
<p>Uses the benchmark's summary table creation method to compute scores.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A DataFrame with the aggregated benchmark scores for each model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_benchmark_result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get aggregated scores for each model in the benchmark.</span>

<span class="sd">    Uses the benchmark&#39;s summary table creation method to compute scores.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A DataFrame with the aggregated benchmark scores for each model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">benchmark</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;No benchmark associated with these results (self.benchmark is None). &quot;</span>
            <span class="s2">&quot;To get benchmark results, load results with a Benchmark object. &quot;</span>
            <span class="s2">&quot;`results = cache.load_results(tasks=&#39;MTEB(eng, v2)&#39;)`&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">benchmark</span><span class="o">.</span><span class="n">_create_summary_table</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.join_revisions" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">join_revisions</span><span class="p">()</span></code>

<a href="#mteb.results.BenchmarkResults.join_revisions" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Join revisions of the same model.</p>
<p>In case of conflicts, the following rules are applied:
1) If the main revision is present, it is kept. The main revision is the defined in the models ModelMeta object.
2) If there is multiple revisions and some of them are None or na, they are filtered out.
3) If there is no main revision, we prefer the one run using the latest mteb version.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.BenchmarkResults&lt;/code&gt; (&lt;code&gt;mteb.results.benchmark_results.BenchmarkResults&lt;/code&gt;)" href="#mteb.results.BenchmarkResults">BenchmarkResults</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new BenchmarkResults object with the revisions joined.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">join_revisions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Join revisions of the same model.</span>

<span class="sd">    In case of conflicts, the following rules are applied:</span>
<span class="sd">    1) If the main revision is present, it is kept. The main revision is the defined in the models ModelMeta object.</span>
<span class="sd">    2) If there is multiple revisions and some of them are None or na, they are filtered out.</span>
<span class="sd">    3) If there is no main revision, we prefer the one run using the latest mteb version.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new BenchmarkResults object with the revisions joined.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">model_result</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">task_result</span> <span class="ow">in</span> <span class="n">model_result</span><span class="o">.</span><span class="n">task_results</span><span class="p">:</span>
            <span class="n">records</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="nb">dict</span><span class="p">(</span>
                    <span class="n">model</span><span class="o">=</span><span class="n">model_result</span><span class="o">.</span><span class="n">model_name</span><span class="p">,</span>
                    <span class="n">revision</span><span class="o">=</span><span class="n">model_result</span><span class="o">.</span><span class="n">model_revision</span><span class="p">,</span>
                    <span class="n">task_name</span><span class="o">=</span><span class="n">task_result</span><span class="o">.</span><span class="n">task_name</span><span class="p">,</span>
                    <span class="n">mteb_version</span><span class="o">=</span><span class="n">task_result</span><span class="o">.</span><span class="n">mteb_version</span><span class="p">,</span>
                    <span class="n">task_result</span><span class="o">=</span><span class="n">task_result</span><span class="p">,</span>
                    <span class="n">has_scores</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">task_result</span><span class="o">.</span><span class="n">scores</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">records</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">BenchmarkResults</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="p">[])</span>
    <span class="n">task_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>

    <span class="c1"># Use cached model metas</span>
    <span class="n">model_to_main_revision</span> <span class="o">=</span> <span class="n">_get_cached_model_metas</span><span class="p">()</span>
    <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;main_revision&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">model_to_main_revision</span><span class="p">)</span>

    <span class="c1"># Use cached version parsing</span>
    <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">_parse_version_cached</span><span class="p">)</span>

    <span class="c1"># Filter out rows without scores first</span>
    <span class="n">task_df</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;has_scores&quot;</span><span class="p">]]</span>

    <span class="c1"># Optimize groupby with vectorized operations</span>
    <span class="c1"># Sort by priority: main_revision match, then mteb_version (descending), then revision</span>
    <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;is_main_revision&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;main_revision&quot;</span><span class="p">]</span>

    <span class="c1"># Handle None/NA/external revisions</span>
    <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision_clean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">(),</span> <span class="s2">&quot;revision_clean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;no_revision_available&quot;</span>
    <span class="p">)</span>
    <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;external&quot;</span><span class="p">,</span> <span class="s2">&quot;revision_clean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;no_revision_available&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Create a priority column for sorting</span>
    <span class="c1"># Higher priority = better to keep</span>
    <span class="c1"># Priority: main_revision (1000), has valid mteb_version (100), has valid revision (10)</span>
    <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;priority&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;is_main_revision&quot;</span><span class="p">],</span> <span class="s2">&quot;priority&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1000</span>
    <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;mteb_version&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">(),</span> <span class="s2">&quot;priority&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">100</span>
    <span class="n">task_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
        <span class="n">task_df</span><span class="p">[</span><span class="s2">&quot;revision_clean&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;no_revision_available&quot;</span><span class="p">,</span> <span class="s2">&quot;priority&quot;</span>
    <span class="p">]</span> <span class="o">+=</span> <span class="mi">10</span>

    <span class="c1"># Sort by priority (desc), mteb_version (desc), and take first per group</span>
    <span class="n">task_df</span> <span class="o">=</span> <span class="n">task_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;task_name&quot;</span><span class="p">,</span> <span class="s2">&quot;priority&quot;</span><span class="p">,</span> <span class="s2">&quot;mteb_version&quot;</span><span class="p">],</span>
        <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
        <span class="n">na_position</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">task_df</span> <span class="o">=</span> <span class="n">task_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;task_name&quot;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

    <span class="c1"># Reconstruct model results</span>
    <span class="n">model_results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Group by original revision to maintain deterministic behavior</span>
    <span class="c1"># After the first() selection above, each (model, task_name) is unique,</span>
    <span class="c1"># so grouping by original revision ensures consistent ModelResult creation</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">model_revision</span><span class="p">),</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">task_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="s2">&quot;revision&quot;</span><span class="p">]):</span>
        <span class="n">model_result</span> <span class="o">=</span> <span class="n">ModelResult</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span>
            <span class="n">model_name</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
            <span class="n">model_revision</span><span class="o">=</span><span class="n">model_revision</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span>
            <span class="n">task_results</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">group</span><span class="p">[</span><span class="s2">&quot;task_result&quot;</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="n">model_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">BenchmarkResults</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">model_results</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.select_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">select_models</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">revisions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#mteb.results.BenchmarkResults.select_models" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get models by name and revision.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>names</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | <span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.models.model_meta.ModelMeta&lt;/code&gt; (&lt;code&gt;mteb.models.ModelMeta&lt;/code&gt;)" href="../model/#mteb.models.model_meta.ModelMeta">ModelMeta</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of model names to filter by. Can also be a list of ModelMeta objects. In which case, the revision is ignored.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>revisions</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span> | None] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of model revisions to filter by. If None, all revisions are returned.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.BenchmarkResults&lt;/code&gt; (&lt;code&gt;mteb.results.benchmark_results.BenchmarkResults&lt;/code&gt;)" href="#mteb.results.BenchmarkResults">BenchmarkResults</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new BenchmarkResults object with the filtered models.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">select_models</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">ModelMeta</span><span class="p">],</span>
    <span class="n">revisions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get models by name and revision.</span>

<span class="sd">    Args:</span>
<span class="sd">        names: List of model names to filter by. Can also be a list of ModelMeta objects. In which case, the revision is ignored.</span>
<span class="sd">        revisions: List of model revisions to filter by. If None, all revisions are returned.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new BenchmarkResults object with the filtered models.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">models_res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_revisions</span> <span class="o">=</span> <span class="n">revisions</span> <span class="k">if</span> <span class="n">revisions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>

    <span class="n">name_rev</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">_revisions</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The length of names and revisions must be the same or revisions must be None.&quot;</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">revision</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">_revisions</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">ModelMeta</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;name in ModelMeta is None. It must be a string.&quot;</span><span class="p">)</span>
            <span class="n">name_rev</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">revision</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name_</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;str&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">name_rev</span><span class="p">[</span><span class="n">name_</span><span class="p">]</span> <span class="o">=</span> <span class="n">revision</span>

    <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span><span class="p">:</span>
        <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_res</span><span class="o">.</span><span class="n">model_name</span>
        <span class="n">revision</span> <span class="o">=</span> <span class="n">model_res</span><span class="o">.</span><span class="n">model_revision</span>
        <span class="k">if</span> <span class="n">model_name</span> <span class="ow">in</span> <span class="n">name_rev</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name_rev</span><span class="p">[</span><span class="n">model_name</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">revision</span> <span class="o">==</span> <span class="n">name_rev</span><span class="p">[</span><span class="n">model_name</span><span class="p">]:</span>
                <span class="n">models_res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_res</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">models_res</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.select_tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">select_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span></code>

<a href="#mteb.results.BenchmarkResults.select_tasks" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Select tasks from the benchmark results.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tasks</code>
            </td>
            <td>
                  <code><span title="collections.abc.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.AbsTask&lt;/code&gt; (&lt;code&gt;mteb.abstasks.abstask.AbsTask&lt;/code&gt;)" href="../task/#mteb.AbsTask">AbsTask</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of tasks to select. Can be a list of AbsTask objects or task names.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="&lt;code&gt;mteb.results.BenchmarkResults&lt;/code&gt; (&lt;code&gt;mteb.results.benchmark_results.BenchmarkResults&lt;/code&gt;)" href="#mteb.results.BenchmarkResults">BenchmarkResults</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A new BenchmarkResults object with the selected tasks.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">select_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">AbsTask</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">BenchmarkResults</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Select tasks from the benchmark results.</span>

<span class="sd">    Args:</span>
<span class="sd">        tasks: List of tasks to select. Can be a list of AbsTask objects or task names.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A new BenchmarkResults object with the selected tasks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_model_results</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">model_res</span><span class="o">.</span><span class="n">select_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span> <span class="k">for</span> <span class="n">model_res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_results</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">model_construct</span><span class="p">(</span><span class="n">model_results</span><span class="o">=</span><span class="n">new_model_results</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.to_dataframe" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_dataframe</span><span class="p">(</span><span class="n">aggregation_level</span><span class="o">=</span><span class="s1">&#39;task&#39;</span><span class="p">,</span> <span class="n">aggregation_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">include_model_revision</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;wide&#39;</span><span class="p">)</span></code>

<a href="#mteb.results.BenchmarkResults.to_dataframe" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Get a DataFrame with the scores for all models and tasks.</p>
<p>The DataFrame will have the following columns in addition to the metadata columns:</p>
<ul>
<li>model_name: The name of the model.</li>
<li>task_name: The name of the task.</li>
<li>score: The main score of the model on the task.</li>
</ul>
<p>In addition, the DataFrame can have the following columns depending on the aggregation level:</p>
<ul>
<li>split: The split of the task. E.g. "test", "train", "validation".</li>
<li>subset: The subset of the task. E.g. "en", "fr-en".</li>
</ul>
<p>Afterward, the DataFrame will be aggregated according to the aggregation method and pivoted to either a wide format.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>aggregation_level</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;subset&#39;, &#39;split&#39;, &#39;task&#39;, &#39;language&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The aggregation to use. Can be one of:
- "subset"/None: No aggregation will be done. The DataFrame will have one row per model, task, split and subset.
- "split": Aggregates the scores by split. The DataFrame will have one row per model, task and split.
- "task": Aggregates the scores by task. The DataFrame will have one row per model and task.
- "language": Aggregates the scores by language. The DataFrame will have one row per model and language.</p>
              </div>
            </td>
            <td>
                  <code>&#39;task&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>aggregation_fn</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<span title="list">list</span>[<a class="autorefs autorefs-internal" title="&lt;code class=&quot;highlight language-python&quot;&gt;&lt;span class=&quot;n&quot;&gt;Score&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Any&lt;/span&gt;&lt;/code&gt;

  &lt;span class=&quot;doc doc-labels&quot;&gt;
      &lt;small class=&quot;doc doc-label doc-label-module-attribute&quot;&gt;&lt;code&gt;module-attribute&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt; (&lt;code&gt;mteb.types.Score&lt;/code&gt;)" href="../types/#mteb.types._result.Score">Score</a>]], <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The function to use for aggregation. If None, the mean will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_model_revision</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, the model revision will be included in the DataFrame. If False, it will be excluded.
If there are multiple revisions for the same model, they will be joined using the <code>join_revisions</code> method.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>format</code>
            </td>
            <td>
                  <code><span title="typing.Literal">Literal</span>[&#39;wide&#39;, &#39;long&#39;]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The format of the DataFrame. Can be one of:
- "wide": The DataFrame will be of shape (number of tasks, number of models). Scores will be in the cells.
- "long": The DataFrame will of length (number of tasks * number of model). Scores will be in columns.</p>
              </div>
            </td>
            <td>
                  <code>&#39;wide&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A DataFrame with the scores for all models and tasks.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dataframe</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">aggregation_level</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;subset&quot;</span><span class="p">,</span> <span class="s2">&quot;split&quot;</span><span class="p">,</span> <span class="s2">&quot;task&quot;</span><span class="p">,</span> <span class="s2">&quot;language&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;task&quot;</span><span class="p">,</span>
    <span class="n">aggregation_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">Score</span><span class="p">]],</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">include_model_revision</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wide&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a DataFrame with the scores for all models and tasks.</span>

<span class="sd">    The DataFrame will have the following columns in addition to the metadata columns:</span>

<span class="sd">    - model_name: The name of the model.</span>
<span class="sd">    - task_name: The name of the task.</span>
<span class="sd">    - score: The main score of the model on the task.</span>

<span class="sd">    In addition, the DataFrame can have the following columns depending on the aggregation level:</span>

<span class="sd">    - split: The split of the task. E.g. &quot;test&quot;, &quot;train&quot;, &quot;validation&quot;.</span>
<span class="sd">    - subset: The subset of the task. E.g. &quot;en&quot;, &quot;fr-en&quot;.</span>

<span class="sd">    Afterward, the DataFrame will be aggregated according to the aggregation method and pivoted to either a wide format.</span>

<span class="sd">    Args:</span>
<span class="sd">        aggregation_level: The aggregation to use. Can be one of:</span>
<span class="sd">            - &quot;subset&quot;/None: No aggregation will be done. The DataFrame will have one row per model, task, split and subset.</span>
<span class="sd">            - &quot;split&quot;: Aggregates the scores by split. The DataFrame will have one row per model, task and split.</span>
<span class="sd">            - &quot;task&quot;: Aggregates the scores by task. The DataFrame will have one row per model and task.</span>
<span class="sd">            - &quot;language&quot;: Aggregates the scores by language. The DataFrame will have one row per model and language.</span>
<span class="sd">        aggregation_fn: The function to use for aggregation. If None, the mean will be used.</span>
<span class="sd">        include_model_revision: If True, the model revision will be included in the DataFrame. If False, it will be excluded.</span>
<span class="sd">            If there are multiple revisions for the same model, they will be joined using the `join_revisions` method.</span>
<span class="sd">        format: The format of the DataFrame. Can be one of:</span>
<span class="sd">            - &quot;wide&quot;: The DataFrame will be of shape (number of tasks, number of models). Scores will be in the cells.</span>
<span class="sd">            - &quot;long&quot;: The DataFrame will of length (number of tasks * number of model). Scores will be in columns.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A DataFrame with the scores for all models and tasks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bench_results</span> <span class="o">=</span> <span class="bp">self</span>
    <span class="k">if</span> <span class="n">include_model_revision</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">bench_results</span> <span class="o">=</span> <span class="n">bench_results</span><span class="o">.</span><span class="n">join_revisions</span><span class="p">()</span>

    <span class="n">scores_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">model_result</span> <span class="ow">in</span> <span class="n">bench_results</span><span class="p">:</span>
        <span class="n">scores_data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">model_result</span><span class="o">.</span><span class="n">_get_score_for_table</span><span class="p">())</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">scores_data</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No scores data available. Returning empty DataFrame.&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="c1"># Create DataFrame</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">scores_data</span><span class="p">)</span>

    <span class="n">_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;model_name&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">include_model_revision</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;model_revision&quot;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_columns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;model_revision&quot;</span><span class="p">)</span>

    <span class="c1"># Aggregation</span>
    <span class="k">return</span> <span class="n">_aggregate_and_pivot</span><span class="p">(</span>
        <span class="n">df</span><span class="p">,</span>
        <span class="n">columns</span><span class="o">=</span><span class="n">_columns</span><span class="p">,</span>
        <span class="n">aggregation_level</span><span class="o">=</span><span class="n">aggregation_level</span><span class="p">,</span>
        <span class="n">aggregation_fn</span><span class="o">=</span><span class="n">aggregation_fn</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.to_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

<a href="#mteb.results.BenchmarkResults.to_dict" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert BenchmarkResults to a dictionary.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert BenchmarkResults to a dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="mteb.results.BenchmarkResults.to_disk" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_disk</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></code>

<a href="#mteb.results.BenchmarkResults.to_disk" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Save the BenchmarkResults to a JSON file.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>mteb/results/benchmark_results.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_disk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save the BenchmarkResults to a JSON file.&quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out_file</span><span class="p">:</span>
        <span class="n">out_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../model/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Model">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Model
              </div>
            </div>
          </a>
        
        
          
          <a href="../types/" class="md-footer__link md-footer__link--next" aria-label="Next: Additional Types">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Additional Types
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      This text is freely available under a Creative Commons Attribution 4.0 license
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/embeddings-benchmark/mteb" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tracking", "navigation.instant", "navigation.tabs", "navigation.sections", "navigation.top", "search.suggest", "search.highlight", "content.action.edit", "content.action.view", "content.code.copy", "content.code.annotate", "content.code.annotation", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>