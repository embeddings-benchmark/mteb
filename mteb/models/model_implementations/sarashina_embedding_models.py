from mteb.models.model_meta import ModelMeta
from mteb.models.sentence_transformer_wrapper import sentence_transformers_loader

SARASHINA_TRAINING_DATA = {"NQ", "MrTidyRetrieval"}

SARASHINA_TRAINING_DATA_LINKS = {
    "https://huggingface.co/datasets/hpprc/emb",
    "https://huggingface.co/datasets/hpprc/mqa-ja",
    "https://huggingface.co/datasets/izumi-lab/llm-japanese-dataset",
    "https://huggingface.co/datasets/wikimedia/wikipedia",
    "https://huggingface.co/datasets/sentence-transformers/NQ-retrieval",
    "https://huggingface.co/datasets/sbintuitions/JSQuAD",
    "https://aclanthology.org/L18-1185",
    "https://huggingface.co/datasets/SkelterLabsInc/JaQuAD",
    "https://github.com/apple/ml-mkqa",
}

SARASHINA_V2_PROMPTS = {
    "Retrieval-query": "task: クエリを与えるので、もっともクエリに意味が似ている一節を探してください。\nquery: ",
    "Retrieval-document": "text: ",
    "Reranking-query": "task: クエリを与えるので、もっともクエリに意味が似ている一節を探してください。\nquery: ",
    "Reranking-document": "text: ",
    "Classification": "task: 与えられたドキュメントを適切なカテゴリに分類してください。\nquery: ",
    "Clustering": "task: 与えられたドキュメントのトピックまたはテーマを特定してください。\nquery: ",
    # optimization regarding JMTEB
    "LivedoorNewsClustering.v2": "task: 与えられたニュース記事のトピックを特定してください。\nquery: ",
    "MewsC16JaClustering": "task: 与えられたニュース記事のトピックを特定してください。\nquery: ",
    "SIB200ClusteringS2S": "task: 与えられたテキストのトピックを特定してください。\nquery: ",
    "AmazonReviewsClassification": "task: 与えられたAmazonレビューを適切な評価カテゴリに分類してください。\nquery: ",
    "AmazonCounterfactualClassification": "task: 与えられたAmazonのカスタマーレビューのテキストを反事実か反事実でないかに分類してください。\nquery: ",
    "MassiveIntentClassification": "task: ユーザーの発話をクエリとして与えるので、ユーザーの意図を見つけてください。\nquery: ",
    "MassiveScenarioClassification": "task: ユーザーの発話をクエリとして与えるので、ユーザーシナリオを見つけてください。\nquery: ",
    "JapaneseSentimentClassification": "task: 与えられたテキストの感情極性をポジティブ(1)かネガティブか(0)に分類してください。\nquery: ",
    "SIB200Classification": "task: 与えられたテキストのトピックを特定してください。\nquery: ",
    "WRIMEClassification": "task: 与えられたテキストの感情極性（-2:強いネガティブ、-1:ネガティブ、0:ニュートラル、1:ポジティブ、2:強いポジティブ）を分類してください。\nquery: ",
    "JSTS": "task: クエリを与えるので，もっともクエリに意味が似ている一節を探してください。\nquery: ",
    "JSICK": "task: クエリを与えるので，もっともクエリに意味が似ている一節を探してください。\nquery: ",
    "JaqketRetrieval-query": "task: 質問を与えるので、その質問に答えるのに役立つWikipediaの文章を検索してください。\nquery: ",
    "JaqketRetrieval-document": "text: ",
    "MrTidyRetrieval-query": "task: 質問を与えるので、その質問に答えるWikipediaの文章を検索するしてください。\nquery: ",
    "MrTidyRetrieval-document": "text: ",
    "JaGovFaqsRetrieval-query": "task: 質問を与えるので、その質問に答えるのに役立つ関連文書を検索してください。\nquery: ",
    "JaGovFaqsRetrieval-document": "text: ",
    "NLPJournalTitleAbsRetrieval.V2-query": "task: 論文のタイトルを与えるので、タイトルに対応する要約を検索してください。\nquery: ",
    "NLPJournalTitleAbsRetrieval.V2-document": "text: ",
    "NLPJournalTitleIntroRetrieval.V2-query": "task: 論文のタイトルを与えるので、タイトルに対応する要約を検索してください。\nquery: ",
    "NLPJournalTitleIntroRetrieval.V2-document": "text: ",
    "NLPJournalAbsIntroRetrieval.V2-query": "task: 論文の序論を与えるので、序論に対応する全文を検索してください。\nquery: ",
    "NLPJournalAbsIntroRetrieval.V2-document": "text: ",
    "NLPJournalAbsArticleRetrieval.V2-query": "task: 論文の序論を与えるので、序論に対応する全文を検索してください。\nquery: ",
    "NLPJournalAbsArticleRetrieval.V2-document": "text: ",
    "JaCWIRRetrieval-query": "task: 記事のタイトルを与えるので、そのタイトルと合っている記事の中身を検索してください。\nquery: ",
    "JaCWIRRetrieval-document": "text: ",
    "MIRACLRetrieval-query": "task: 質問を与えるので、その質問に答えるのに役立つ関連文書を検索してください。\nquery: ",
    "MIRACLRetrieval-document": "text: ",
    "MintakaRetrieval-query": "task: 質問を与えるので、その質問に答えられるテキストを検索してください。\nquery: ",
    "MintakaRetrieval-document": "text: ",
    "MultiLongDocRetrieval-query": "task: 質問を与えるので、その質問に答えるのに役立つWikipediaの文章を検索してください。\nquery: ",
    "MultiLongDocRetrieval-document": "text: ",
    "ESCIReranking-query": "task: クエリを与えるので、与えられたWeb検索クエリに答える関連文章を検索してください。\nquery: ",
    "ESCIReranking-document": "text: ",
    "JQaRAReranking-query": "task: 質問を与えるので、その質問に答えるのに役立つWikipediaの文章を検索してください。\nquery: ",
    "JQaRAReranking-document": "text: ",
    "JaCWIRReranking-query": "task: 記事のタイトルを与えるので、そのタイトルと合っている記事の中身を検索してください。\nquery: ",
    "JaCWIRReranking-document": "text: ",
    "MIRACLReranking-query": "task: 質問を与えるので、その質問に答えるのに役立つ関連文書を検索してください。\nquery: ",
    "MIRACLReranking-document": "text: ",
    "MultiLongDocReranking-query": "task: 質問を与えるので、その質問に答えるのに役立つWikipediaの文章を検索してください。\nquery: ",
    "MultiLongDocReranking-document": "text: ",
}


sbintuitions_sarashina_embedding_v2_1b = ModelMeta(
    loader=sentence_transformers_loader,
    name="sbintuitions/sarashina-embedding-v2-1b",
    languages=["jpn-Jpan"],
    open_weights=True,
    revision="1f3408afaa7b617e3445d891310a9c26dd0c68a5",
    release_date="2025-07-30",
    n_parameters=1_224_038_144,
    memory_usage_mb=4669,
    embed_dim=1792,
    license="https://huggingface.co/sbintuitions/sarashina-embedding-v2-1b/blob/main/LICENSE",
    max_tokens=8192,
    reference="https://huggingface.co/sbintuitions/sarashina-embedding-v2-1b",
    similarity_fn_name="cosine",
    framework=["Sentence Transformers", "PyTorch"],
    use_instructions=True,
    adapted_from="sbintuitions/sarashina2.2-1b",
    superseded_by=None,
    training_datasets={"NQ", "MrTidyRetrieval"},
    public_training_code=None,
    public_training_data=SARASHINA_TRAINING_DATA_LINKS,
    citation=None,
    contacts=["Sraym1217", "akiFQC", "lsz05"],
)

sbintuitions_sarashina_embedding_v1_1b = ModelMeta(
    loader=sentence_transformers_loader,
    name="sbintuitions/sarashina-embedding-v1-1b",
    languages=["jpn-Jpan"],
    open_weights=True,
    revision="d060fcd8984075071e7fad81baff035cbb3b6c7e",
    release_date="2024-11-22",
    n_parameters=1_224_038_144,
    memory_usage_mb=4669,
    embed_dim=1792,
    license="https://huggingface.co/sbintuitions/sarashina-embedding-v1-1b/blob/main/LICENSE",
    max_tokens=8192,
    reference="https://huggingface.co/sbintuitions/sarashina-embedding-v1-1b",
    similarity_fn_name="cosine",
    framework=["Sentence Transformers", "PyTorch"],
    use_instructions=False,
    adapted_from="sbintuitions/sarashina2.1-1b",
    superseded_by="sbintuitions/sarashina-embedding-v2-1b",
    training_datasets={"NQ", "MrTidyRetrieval"},
    public_training_code=None,
    public_training_data=SARASHINA_TRAINING_DATA_LINKS,
    citation=None,
    contacts=["akiFQC", "lsz05"],
)
